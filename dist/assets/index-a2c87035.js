function Ic(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function oi(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ae={},_s=[],nt=()=>{},aa=()=>!1,qr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ai=t=>t.startsWith("onUpdate:"),Oe=Object.assign,li=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},xc=Object.prototype.hasOwnProperty,re=(t,e)=>xc.call(t,e),W=Array.isArray,vs=t=>ir(t)==="[object Map]",Hr=t=>ir(t)==="[object Set]",Bi=t=>ir(t)==="[object Date]",Q=t=>typeof t=="function",ve=t=>typeof t=="string",pt=t=>typeof t=="symbol",le=t=>t!==null&&typeof t=="object",la=t=>(le(t)||Q(t))&&Q(t.then)&&Q(t.catch),ca=Object.prototype.toString,ir=t=>ca.call(t),jc=t=>ir(t).slice(8,-1),ua=t=>ir(t)==="[object Object]",ci=t=>ve(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Bs=oi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Nc=/-\w/g,Xe=Kr(t=>t.replace(Nc,e=>e.slice(1).toUpperCase())),$c=/\B([A-Z])/g,Mt=Kr(t=>t.replace($c,"-$1").toLowerCase()),Wr=Kr(t=>t.charAt(0).toUpperCase()+t.slice(1)),cn=Kr(t=>t?`on${Wr(t)}`:""),Dt=(t,e)=>!Object.is(t,e),br=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},da=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},Gr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Mi;const zr=()=>Mi||(Mi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jr(t){if(W(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=ve(r)?Bc(r):Jr(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(ve(t)||le(t))return t}const Dc=/;(?![^(]*\))/g,Uc=/:([^]+)/,Lc=/\/\*[^]*?\*\//g;function Bc(t){const e={};return t.replace(Lc,"").split(Dc).forEach(s=>{if(s){const r=s.split(Uc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Se(t){let e="";if(ve(t))e=t;else if(W(t))for(let s=0;s<t.length;s++){const r=Se(t[s]);r&&(e+=r+" ")}else if(le(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Mc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vc=oi(Mc);function ha(t){return!!t||t===""}function Fc(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=Qr(t[r],e[r]);return s}function Qr(t,e){if(t===e)return!0;let s=Bi(t),r=Bi(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=pt(t),r=pt(e),s||r)return t===e;if(s=W(t),r=W(e),s||r)return s&&r?Fc(t,e):!1;if(s=le(t),r=le(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Qr(t[o],e[o]))return!1}}return String(t)===String(e)}function qc(t,e){return t.findIndex(s=>Qr(s,e))}const fa=t=>!!(t&&t.__v_isRef===!0),$=t=>ve(t)?t:t==null?"":W(t)||le(t)&&(t.toString===ca||!Q(t.toString))?fa(t)?$(t.value):JSON.stringify(t,pa,2):String(t),pa=(t,e)=>fa(e)?pa(t,e.value):vs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[un(r,i)+" =>"]=n,s),{})}:Hr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>un(s))}:pt(e)?un(e):le(e)&&!W(e)&&!ua(e)?String(e):e,un=(t,e="")=>{var s;return pt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Be;class Hc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Be,!e&&Be&&(this.index=(Be.scopes||(Be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Be;try{return Be=this,e()}finally{Be=s}}}on(){++this._on===1&&(this.prevScope=Be,Be=this)}off(){this._on>0&&--this._on===0&&(Be=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Kc(){return Be}let de;const dn=new WeakSet;class ga{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Be&&Be.active&&Be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,dn.has(this)&&(dn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||va(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vi(this),ma(this);const e=de,s=it;de=this,it=!0;try{return this.fn()}finally{ya(this),de=e,it=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)hi(e);this.deps=this.depsTail=void 0,Vi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?dn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xn(this)&&this.run()}get dirty(){return xn(this)}}let _a=0,Ms,Vs;function va(t,e=!1){if(t.flags|=8,e){t.next=Vs,Vs=t;return}t.next=Ms,Ms=t}function ui(){_a++}function di(){if(--_a>0)return;if(Vs){let e=Vs;for(Vs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ms;){let e=Ms;for(Ms=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function ma(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ya(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),hi(r),Wc(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function xn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(wa(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function wa(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Js)||(t.globalVersion=Js,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xn(t))))return;t.flags|=2;const e=t.dep,s=de,r=it;de=t,it=!0;try{ma(t);const n=t.fn(t._value);(e.version===0||Dt(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{de=s,it=r,ya(t),t.flags&=-3}}function hi(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)hi(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Wc(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let it=!0;const ba=[];function Tt(){ba.push(it),it=!1}function kt(){const t=ba.pop();it=t===void 0?!0:t}function Vi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=de;de=void 0;try{e()}finally{de=s}}}let Js=0;class Gc{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!de||!it||de===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==de)s=this.activeLink=new Gc(de,this),de.deps?(s.prevDep=de.depsTail,de.depsTail.nextDep=s,de.depsTail=s):de.deps=de.depsTail=s,Ea(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=de.depsTail,s.nextDep=void 0,de.depsTail.nextDep=s,de.depsTail=s,de.deps===s&&(de.deps=r)}return s}trigger(e){this.version++,Js++,this.notify(e)}notify(e){ui();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{di()}}}function Ea(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ea(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const jn=new WeakMap,ss=Symbol(""),Nn=Symbol(""),Qs=Symbol("");function Ce(t,e,s){if(it&&de){let r=jn.get(t);r||jn.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new fi),n.map=r,n.key=s),n.track()}}function Et(t,e,s,r,n,i){const o=jn.get(t);if(!o){Js++;return}const a=l=>{l&&l.trigger()};if(ui(),e==="clear")o.forEach(a);else{const l=W(t),c=l&&ci(s);if(l&&s==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Qs||!pt(f)&&f>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(Qs)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ss)),vs(t)&&a(o.get(Nn)));break;case"delete":l||(a(o.get(ss)),vs(t)&&a(o.get(Nn)));break;case"set":vs(t)&&a(o.get(ss));break}}di()}function os(t){const e=se(t);return e===t?e:(Ce(e,"iterate",Qs),Ye(t)?e:e.map(Ae))}function Yr(t){return Ce(t=se(t),"iterate",Qs),t}const zc={__proto__:null,[Symbol.iterator](){return hn(this,Symbol.iterator,Ae)},concat(...t){return os(this).concat(...t.map(e=>W(e)?os(e):e))},entries(){return hn(this,"entries",t=>(t[1]=Ae(t[1]),t))},every(t,e){return mt(this,"every",t,e,void 0,arguments)},filter(t,e){return mt(this,"filter",t,e,s=>s.map(Ae),arguments)},find(t,e){return mt(this,"find",t,e,Ae,arguments)},findIndex(t,e){return mt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mt(this,"findLast",t,e,Ae,arguments)},findLastIndex(t,e){return mt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mt(this,"forEach",t,e,void 0,arguments)},includes(...t){return fn(this,"includes",t)},indexOf(...t){return fn(this,"indexOf",t)},join(t){return os(this).join(t)},lastIndexOf(...t){return fn(this,"lastIndexOf",t)},map(t,e){return mt(this,"map",t,e,void 0,arguments)},pop(){return Ns(this,"pop")},push(...t){return Ns(this,"push",t)},reduce(t,...e){return Fi(this,"reduce",t,e)},reduceRight(t,...e){return Fi(this,"reduceRight",t,e)},shift(){return Ns(this,"shift")},some(t,e){return mt(this,"some",t,e,void 0,arguments)},splice(...t){return Ns(this,"splice",t)},toReversed(){return os(this).toReversed()},toSorted(t){return os(this).toSorted(t)},toSpliced(...t){return os(this).toSpliced(...t)},unshift(...t){return Ns(this,"unshift",t)},values(){return hn(this,"values",Ae)}};function hn(t,e,s){const r=Yr(t),n=r[e]();return r!==t&&!Ye(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.done||(i.value=s(i.value)),i}),n}const Jc=Array.prototype;function mt(t,e,s,r,n,i){const o=Yr(t),a=o!==t&&!Ye(t),l=o[e];if(l!==Jc[e]){const d=l.apply(t,i);return a?Ae(d):d}let c=s;o!==t&&(a?c=function(d,f){return s.call(this,Ae(d),f,t)}:s.length>2&&(c=function(d,f){return s.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&n?n(u):u}function Fi(t,e,s,r){const n=Yr(t);let i=s;return n!==t&&(Ye(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,Ae(a),l,t)}),n[e](i,...r)}function fn(t,e,s){const r=se(t);Ce(r,"iterate",Qs);const n=r[e](...s);return(n===-1||n===!1)&&_i(s[0])?(s[0]=se(s[0]),r[e](...s)):n}function Ns(t,e,s=[]){Tt(),ui();const r=se(t)[e].apply(t,s);return di(),kt(),r}const Qc=oi("__proto__,__v_isRef,__isVue"),Sa=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pt));function Yc(t){pt(t)||(t=String(t));const e=se(this);return Ce(e,"has",t),e.hasOwnProperty(t)}class Oa{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?au:Ra:i?Aa:ka).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=W(e);if(!n){let l;if(o&&(l=zc[s]))return l;if(s==="hasOwnProperty")return Yc}const a=Reflect.get(e,s,Ie(e)?e:r);if((pt(s)?Sa.has(s):Qc(s))||(n||Ce(e,"get",s),i))return a;if(Ie(a)){const l=o&&ci(s)?a:a.value;return n&&le(l)?Dn(l):l}return le(a)?n?Dn(a):Xr(a):a}}class Ta extends Oa{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const l=Lt(i);if(!Ye(r)&&!Lt(r)&&(i=se(i),r=se(r)),!W(e)&&Ie(i)&&!Ie(r))return l||(i.value=r),!0}const o=W(e)&&ci(s)?Number(s)<e.length:re(e,s),a=Reflect.set(e,s,r,Ie(e)?e:n);return e===se(n)&&(o?Dt(r,i)&&Et(e,"set",s,r):Et(e,"add",s,r)),a}deleteProperty(e,s){const r=re(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&Et(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!pt(s)||!Sa.has(s))&&Ce(e,"has",s),r}ownKeys(e){return Ce(e,"iterate",W(e)?"length":ss),Reflect.ownKeys(e)}}class Xc extends Oa{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Zc=new Ta,eu=new Xc,tu=new Ta(!0);const $n=t=>t,cr=t=>Reflect.getPrototypeOf(t);function su(t,e,s){return function(...r){const n=this.__v_raw,i=se(n),o=vs(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...r),u=s?$n:e?Ar:Ae;return!e&&Ce(i,"iterate",l?Nn:ss),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function ur(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ru(t,e){const s={get(n){const i=this.__v_raw,o=se(i),a=se(n);t||(Dt(n,a)&&Ce(o,"get",n),Ce(o,"get",a));const{has:l}=cr(o),c=e?$n:t?Ar:Ae;if(l.call(o,n))return c(i.get(n));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&Ce(se(n),"iterate",ss),n.size},has(n){const i=this.__v_raw,o=se(i),a=se(n);return t||(Dt(n,a)&&Ce(o,"has",n),Ce(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=se(a),c=e?$n:t?Ar:Ae;return!t&&Ce(l,"iterate",ss),a.forEach((u,d)=>n.call(i,c(u),c(d),o))}};return Oe(s,t?{add:ur("add"),set:ur("set"),delete:ur("delete"),clear:ur("clear")}:{add(n){!e&&!Ye(n)&&!Lt(n)&&(n=se(n));const i=se(this);return cr(i).has.call(i,n)||(i.add(n),Et(i,"add",n,n)),this},set(n,i){!e&&!Ye(i)&&!Lt(i)&&(i=se(i));const o=se(this),{has:a,get:l}=cr(o);let c=a.call(o,n);c||(n=se(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,i),c?Dt(i,u)&&Et(o,"set",n,i):Et(o,"add",n,i),this},delete(n){const i=se(this),{has:o,get:a}=cr(i);let l=o.call(i,n);l||(n=se(n),l=o.call(i,n)),a&&a.call(i,n);const c=i.delete(n);return l&&Et(i,"delete",n,void 0),c},clear(){const n=se(this),i=n.size!==0,o=n.clear();return i&&Et(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=su(n,t,e)}),s}function pi(t,e){const s=ru(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(re(s,n)&&n in r?s:r,n,i)}const nu={get:pi(!1,!1)},iu={get:pi(!1,!0)},ou={get:pi(!0,!1)};const ka=new WeakMap,Aa=new WeakMap,Ra=new WeakMap,au=new WeakMap;function lu(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cu(t){return t.__v_skip||!Object.isExtensible(t)?0:lu(jc(t))}function Xr(t){return Lt(t)?t:gi(t,!1,Zc,nu,ka)}function Ca(t){return gi(t,!1,tu,iu,Aa)}function Dn(t){return gi(t,!0,eu,ou,Ra)}function gi(t,e,s,r,n){if(!le(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=cu(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function ms(t){return Lt(t)?ms(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function Ye(t){return!!(t&&t.__v_isShallow)}function _i(t){return t?!!t.__v_raw:!1}function se(t){const e=t&&t.__v_raw;return e?se(e):t}function uu(t){return!re(t,"__v_skip")&&Object.isExtensible(t)&&da(t,"__v_skip",!0),t}const Ae=t=>le(t)?Xr(t):t,Ar=t=>le(t)?Dn(t):t;function Ie(t){return t?t.__v_isRef===!0:!1}function du(t){return Pa(t,!1)}function hu(t){return Pa(t,!0)}function Pa(t,e){return Ie(t)?t:new fu(t,e)}class fu{constructor(e,s){this.dep=new fi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:se(e),this._value=s?e:Ae(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||Ye(e)||Lt(e);e=r?e:se(e),Dt(e,s)&&(this._rawValue=e,this._value=r?e:Ae(e),this.dep.trigger())}}function ys(t){return Ie(t)?t.value:t}const pu={get:(t,e,s)=>e==="__v_raw"?t:ys(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Ie(n)&&!Ie(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function Ia(t){return ms(t)?t:new Proxy(t,pu)}class gu{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new fi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&de!==this)return va(this,!0),!0}get value(){const e=this.dep.track();return wa(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _u(t,e,s=!1){let r,n;return Q(t)?r=t:(r=t.get,n=t.set),new gu(r,n,s)}const dr={},Rr=new WeakMap;let zt;function vu(t,e=!1,s=zt){if(s){let r=Rr.get(s);r||Rr.set(s,r=[]),r.push(t)}}function mu(t,e,s=ae){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,c=k=>n?k:Ye(k)||n===!1||n===0?St(k,1):St(k);let u,d,f,p,v=!1,y=!1;if(Ie(t)?(d=()=>t.value,v=Ye(t)):ms(t)?(d=()=>c(t),v=!0):W(t)?(y=!0,v=t.some(k=>ms(k)||Ye(k)),d=()=>t.map(k=>{if(Ie(k))return k.value;if(ms(k))return c(k);if(Q(k))return l?l(k,2):k()})):Q(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Tt();try{f()}finally{kt()}}const k=zt;zt=u;try{return l?l(t,3,[p]):t(p)}finally{zt=k}}:d=nt,e&&n){const k=d,q=n===!0?1/0:n;d=()=>St(k(),q)}const w=Kc(),T=()=>{u.stop(),w&&w.active&&li(w.effects,u)};if(i&&e){const k=e;e=(...q)=>{k(...q),T()}}let S=y?new Array(t.length).fill(dr):dr;const b=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(e){const q=u.run();if(n||v||(y?q.some((z,J)=>Dt(z,S[J])):Dt(q,S))){f&&f();const z=zt;zt=u;try{const J=[q,S===dr?void 0:y&&S[0]===dr?[]:S,p];S=q,l?l(e,3,J):e(...J)}finally{zt=z}}}else u.run()};return a&&a(b),u=new ga(d),u.scheduler=o?()=>o(b,!1):b,p=k=>vu(k,!1,u),f=u.onStop=()=>{const k=Rr.get(u);if(k){if(l)l(k,4);else for(const q of k)q();Rr.delete(u)}},e?r?b(!0):S=u.run():o?o(b.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function St(t,e=1/0,s){if(e<=0||!le(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Ie(t))St(t.value,e,s);else if(W(t))for(let r=0;r<t.length;r++)St(t[r],e,s);else if(Hr(t)||vs(t))t.forEach(r=>{St(r,e,s)});else if(ua(t)){for(const r in t)St(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&St(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function or(t,e,s,r){try{return r?t(...r):t()}catch(n){Zr(n,e,s)}}function gt(t,e,s,r){if(Q(t)){const n=or(t,e,s,r);return n&&la(n)&&n.catch(i=>{Zr(i,e,s)}),n}if(W(t)){const n=[];for(let i=0;i<t.length;i++)n.push(gt(t[i],e,s,r));return n}}function Zr(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ae;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){Tt(),or(i,null,10,[t,l,c]),kt();return}}yu(t,s,n,r,o)}function yu(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const Ne=[];let ht=-1;const ws=[];let xt=null,hs=0;const xa=Promise.resolve();let Cr=null;function vi(t){const e=Cr||xa;return t?e.then(this?t.bind(this):t):e}function wu(t){let e=ht+1,s=Ne.length;for(;e<s;){const r=e+s>>>1,n=Ne[r],i=Ys(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function mi(t){if(!(t.flags&1)){const e=Ys(t),s=Ne[Ne.length-1];!s||!(t.flags&2)&&e>=Ys(s)?Ne.push(t):Ne.splice(wu(e),0,t),t.flags|=1,ja()}}function ja(){Cr||(Cr=xa.then($a))}function bu(t){W(t)?ws.push(...t):xt&&t.id===-1?xt.splice(hs+1,0,t):t.flags&1||(ws.push(t),t.flags|=1),ja()}function qi(t,e,s=ht+1){for(;s<Ne.length;s++){const r=Ne[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ne.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Na(t){if(ws.length){const e=[...new Set(ws)].sort((s,r)=>Ys(s)-Ys(r));if(ws.length=0,xt){xt.push(...e);return}for(xt=e,hs=0;hs<xt.length;hs++){const s=xt[hs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}xt=null,hs=0}}const Ys=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $a(t){const e=nt;try{for(ht=0;ht<Ne.length;ht++){const s=Ne[ht];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),or(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ht<Ne.length;ht++){const s=Ne[ht];s&&(s.flags&=-2)}ht=-1,Ne.length=0,Na(),Cr=null,(Ne.length||ws.length)&&$a()}}let We=null,Da=null;function Pr(t){const e=We;return We=t,Da=t&&t.type.__scopeId||null,e}function Qe(t,e=We,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&jr(-1);const i=Pr(e);let o;try{o=t(...n)}finally{Pr(i),r._d&&jr(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Xs(t,e){if(We===null)return t;const s=rn(We),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=ae]=e[n];i&&(Q(i)&&(i={mounted:i,updated:i}),i.deep&&St(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ht(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Tt(),gt(l,s,8,[t.el,a,t,e]),kt())}}const Eu=Symbol("_vte"),Su=t=>t.__isTeleport,Ou=Symbol("_leaveCb");function yi(t,e){t.shapeFlag&6&&t.component?(t.transition=e,yi(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ua(t,e){return Q(t)?(()=>Oe({name:t.name},e,{setup:t}))():t}function La(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ir=new WeakMap;function Fs(t,e,s,r,n=!1){if(W(t)){t.forEach((v,y)=>Fs(v,e&&(W(e)?e[y]:e),s,r,n));return}if(qs(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Fs(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?rn(r.component):r.el,o=n?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ae?a.refs={}:a.refs,d=a.setupState,f=se(d),p=d===ae?aa:v=>re(f,v);if(c!=null&&c!==l){if(Hi(e),ve(c))u[c]=null,p(c)&&(d[c]=null);else if(Ie(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(Q(l))or(l,a,12,[o,u]);else{const v=ve(l),y=Ie(l);if(v||y){const w=()=>{if(t.f){const T=v?p(l)?d[l]:u[l]:l.value;if(n)W(T)&&li(T,i);else if(W(T))T.includes(i)||T.push(i);else if(v)u[l]=[i],p(l)&&(d[l]=u[l]);else{const S=[i];l.value=S,t.k&&(u[t.k]=S)}}else v?(u[l]=o,p(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const T=()=>{w(),Ir.delete(t)};T.id=-1,Ir.set(t,T),qe(T,s)}else Hi(t),w()}}}function Hi(t){const e=Ir.get(t);e&&(e.flags|=8,Ir.delete(t))}zr().requestIdleCallback;zr().cancelIdleCallback;const qs=t=>!!t.type.__asyncLoader,Ba=t=>t.type.__isKeepAlive;function Tu(t,e){Ma(t,"a",e)}function ku(t,e){Ma(t,"da",e)}function Ma(t,e,s=Pe){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(en(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Ba(n.parent.vnode)&&Au(r,e,s,n),n=n.parent}}function Au(t,e,s,r){const n=en(e,t,r,!0);Va(()=>{li(r[e],n)},s)}function en(t,e,s=Pe,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Tt();const a=ar(s),l=gt(e,s,t,o);return a(),kt(),l});return r?n.unshift(i):n.push(i),i}}const At=t=>(e,s=Pe)=>{(!er||t==="sp")&&en(t,(...r)=>e(...r),s)},Ru=At("bm"),Cu=At("m"),Pu=At("bu"),Iu=At("u"),xu=At("bum"),Va=At("um"),ju=At("sp"),Nu=At("rtg"),$u=At("rtc");function Du(t,e=Pe){en("ec",t,e)}const Fa="components";function bs(t,e){return Lu(Fa,t,!0,e)||t}const Uu=Symbol.for("v-ndc");function Lu(t,e,s=!0,r=!1){const n=We||Pe;if(n){const i=n.type;if(t===Fa){const a=Ad(i,!1);if(a&&(a===e||a===Xe(e)||a===Wr(Xe(e))))return i}const o=Ki(n[t]||i[t],e)||Ki(n.appContext[t],e);return!o&&r?i:o}}function Ki(t,e){return t&&(t[e]||t[Xe(e)]||t[Wr(Xe(e))])}function De(t,e,s,r){let n;const i=s&&s[r],o=W(t);if(o||ve(t)){const a=o&&ms(t);let l=!1,c=!1;a&&(l=!Ye(t),c=Lt(t),t=Yr(t)),n=new Array(t.length);for(let u=0,d=t.length;u<d;u++)n[u]=e(l?c?Ar(Ae(t[u])):Ae(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i&&i[a])}else if(le(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=e(t[u],u,l,i&&i[l])}}else n=[];return s&&(s[r]=n),n}const Un=t=>t?ll(t)?rn(t):Un(t.parent):null,Hs=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Un(t.parent),$root:t=>Un(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>wi(t),$forceUpdate:t=>t.f||(t.f=()=>{mi(t.update)}),$nextTick:t=>t.n||(t.n=vi.bind(t.proxy)),$watch:t=>id.bind(t)}),pn=(t,e)=>t!==ae&&!t.__isScriptSetup&&re(t,e),Bu={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(pn(r,e))return o[e]=1,r[e];if(n!==ae&&re(n,e))return o[e]=2,n[e];if((c=t.propsOptions[0])&&re(c,e))return o[e]=3,i[e];if(s!==ae&&re(s,e))return o[e]=4,s[e];Ln&&(o[e]=0)}}const u=Hs[e];let d,f;if(u)return e==="$attrs"&&Ce(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(s!==ae&&re(s,e))return o[e]=4,s[e];if(f=l.config.globalProperties,re(f,e))return f[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return pn(n,e)?(n[e]=s,!0):r!==ae&&re(r,e)?(r[e]=s,!0):re(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i,type:o}},a){let l,c;return!!(s[a]||t!==ae&&a[0]!=="$"&&re(t,a)||pn(e,a)||(l=i[0])&&re(l,a)||re(r,a)||re(Hs,a)||re(n.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:re(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Wi(t){return W(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Ln=!0;function Mu(t){const e=wi(t),s=t.proxy,r=t.ctx;Ln=!1,e.beforeCreate&&Gi(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:v,activated:y,deactivated:w,beforeDestroy:T,beforeUnmount:S,destroyed:b,unmounted:k,render:q,renderTracked:z,renderTriggered:J,errorCaptured:me,serverPrefetch:be,expose:at,inheritAttrs:Rt,components:Ft,directives:lt,filters:xs}=e;if(c&&Vu(c,r,null),o)for(const ie in o){const ee=o[ie];Q(ee)&&(r[ie]=ee.bind(s))}if(n){const ie=n.call(s,s);le(ie)&&(t.data=Xr(ie))}if(Ln=!0,i)for(const ie in i){const ee=i[ie],vt=Q(ee)?ee.bind(s,s):Q(ee.get)?ee.get.bind(s,s):nt,Ct=!Q(ee)&&Q(ee.set)?ee.set.bind(s):nt,ct=rt({get:vt,set:Ct});Object.defineProperty(r,ie,{enumerable:!0,configurable:!0,get:()=>ct.value,set:Ue=>ct.value=Ue})}if(a)for(const ie in a)qa(a[ie],r,s,ie);if(l){const ie=Q(l)?l.call(s):l;Reflect.ownKeys(ie).forEach(ee=>{Er(ee,ie[ee])})}u&&Gi(u,t,"c");function Ee(ie,ee){W(ee)?ee.forEach(vt=>ie(vt.bind(s))):ee&&ie(ee.bind(s))}if(Ee(Ru,d),Ee(Cu,f),Ee(Pu,p),Ee(Iu,v),Ee(Tu,y),Ee(ku,w),Ee(Du,me),Ee($u,z),Ee(Nu,J),Ee(xu,S),Ee(Va,k),Ee(ju,be),W(at))if(at.length){const ie=t.exposed||(t.exposed={});at.forEach(ee=>{Object.defineProperty(ie,ee,{get:()=>s[ee],set:vt=>s[ee]=vt,enumerable:!0})})}else t.exposed||(t.exposed={});q&&t.render===nt&&(t.render=q),Rt!=null&&(t.inheritAttrs=Rt),Ft&&(t.components=Ft),lt&&(t.directives=lt),be&&La(t)}function Vu(t,e,s=nt){W(t)&&(t=Bn(t));for(const r in t){const n=t[r];let i;le(n)?"default"in n?i=Ot(n.from||r,n.default,!0):i=Ot(n.from||r):i=Ot(n),Ie(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Gi(t,e,s){gt(W(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function qa(t,e,s,r){let n=r.includes(".")?sl(s,r):()=>s[r];if(ve(t)){const i=e[t];Q(i)&&Sr(n,i)}else if(Q(t))Sr(n,t.bind(s));else if(le(t))if(W(t))t.forEach(i=>qa(i,e,s,r));else{const i=Q(t.handler)?t.handler.bind(s):e[t.handler];Q(i)&&Sr(n,i,t)}}function wi(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(c=>xr(l,c,o,!0)),xr(l,e,o)),le(e)&&i.set(e,l),l}function xr(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&xr(t,i,s,!0),n&&n.forEach(o=>xr(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=Fu[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Fu={data:zi,props:Ji,emits:Ji,methods:Us,computed:Us,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:Us,directives:Us,watch:Hu,provide:zi,inject:qu};function zi(t,e){return e?t?function(){return Oe(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function qu(t,e){return Us(Bn(t),Bn(e))}function Bn(t){if(W(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function xe(t,e){return t?[...new Set([].concat(t,e))]:e}function Us(t,e){return t?Oe(Object.create(null),t,e):e}function Ji(t,e){return t?W(t)&&W(e)?[...new Set([...t,...e])]:Oe(Object.create(null),Wi(t),Wi(e??{})):e}function Hu(t,e){if(!t)return e;if(!e)return t;const s=Oe(Object.create(null),t);for(const r in e)s[r]=xe(t[r],e[r]);return s}function Ha(){return{app:null,config:{isNativeTag:aa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ku=0;function Wu(t,e){return function(r,n=null){Q(r)||(r=Oe({},r)),n!=null&&!le(n)&&(n=null);const i=Ha(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Ku++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:Cd,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Q(u.install)?(o.add(u),u.install(c,...d)):Q(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||oe(r,n);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(p,u):t(p,u,f),l=!0,c._container=u,u.__vue_app__=c,rn(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(gt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Es;Es=c;try{return u()}finally{Es=d}}};return c}}let Es=null;function Er(t,e){if(Pe){let s=Pe.provides;const r=Pe.parent&&Pe.parent.provides;r===s&&(s=Pe.provides=Object.create(r)),s[t]=e}}function Ot(t,e,s=!1){const r=Ed();if(r||Es){let n=Es?Es._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&Q(e)?e.call(r&&r.proxy):e}}const Ka={},Wa=()=>Object.create(Ka),Ga=t=>Object.getPrototypeOf(t)===Ka;function Gu(t,e,s,r=!1){const n={},i=Wa();t.propsDefaults=Object.create(null),za(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Ca(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function zu(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=se(n),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(tn(t.emitsOptions,f))continue;const p=e[f];if(l)if(re(i,f))p!==i[f]&&(i[f]=p,c=!0);else{const v=Xe(f);n[v]=Mn(l,a,v,p,t,!1)}else p!==i[f]&&(i[f]=p,c=!0)}}}else{za(t,e,n,i)&&(c=!0);let u;for(const d in a)(!e||!re(e,d)&&((u=Mt(d))===d||!re(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(n[d]=Mn(l,a,d,void 0,t,!0)):delete n[d]);if(i!==a)for(const d in i)(!e||!re(e,d))&&(delete i[d],c=!0)}c&&Et(t.attrs,"set","")}function za(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Bs(l))continue;const c=e[l];let u;n&&re(n,u=Xe(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:tn(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=se(s),c=a||ae;for(let u=0;u<i.length;u++){const d=i[u];s[d]=Mn(n,l,d,c[d],t,!re(c,d))}}return o}function Mn(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=re(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Q(l)){const{propsDefaults:c}=n;if(s in c)r=c[s];else{const u=ar(n);r=c[s]=l.call(null,e),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Mt(s))&&(r=!0))}return r}const Ju=new WeakMap;function Ja(t,e,s=!1){const r=s?Ju:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!Q(t)){const u=d=>{l=!0;const[f,p]=Ja(d,e,!0);Oe(o,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return le(t)&&r.set(t,_s),_s;if(W(i))for(let u=0;u<i.length;u++){const d=Xe(i[u]);Qi(d)&&(o[d]=ae)}else if(i)for(const u in i){const d=Xe(u);if(Qi(d)){const f=i[u],p=o[d]=W(f)||Q(f)?{type:f}:Oe({},f),v=p.type;let y=!1,w=!0;if(W(v))for(let T=0;T<v.length;++T){const S=v[T],b=Q(S)&&S.name;if(b==="Boolean"){y=!0;break}else b==="String"&&(w=!1)}else y=Q(v)&&v.name==="Boolean";p[0]=y,p[1]=w,(y||re(p,"default"))&&a.push(d)}}const c=[o,a];return le(t)&&r.set(t,c),c}function Qi(t){return t[0]!=="$"&&!Bs(t)}const bi=t=>t==="_"||t==="_ctx"||t==="$stable",Ei=t=>W(t)?t.map(ft):[ft(t)],Qu=(t,e,s)=>{if(e._n)return e;const r=Qe((...n)=>Ei(e(...n)),s);return r._c=!1,r},Qa=(t,e,s)=>{const r=t._ctx;for(const n in t){if(bi(n))continue;const i=t[n];if(Q(i))e[n]=Qu(n,i,r);else if(i!=null){const o=Ei(i);e[n]=()=>o}}},Ya=(t,e)=>{const s=Ei(e);t.slots.default=()=>s},Xa=(t,e,s)=>{for(const r in e)(s||!bi(r))&&(t[r]=e[r])},Yu=(t,e,s)=>{const r=t.slots=Wa();if(t.vnode.shapeFlag&32){const n=e._;n?(Xa(r,e,s),s&&da(r,"_",n,!0)):Qa(e,r)}else e&&Ya(t,e)},Xu=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=ae;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Xa(n,e,s):(i=!e.$stable,Qa(e,n)),o=e}else e&&(Ya(t,e),o={default:1});if(i)for(const a in n)!bi(a)&&o[a]==null&&delete n[a]},qe=fd;function Zu(t){return ed(t)}function ed(t,e){const s=zr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=nt,insertStaticContent:v}=t,y=(g,_,m,A=null,E=null,R=null,x=void 0,I=null,P=!!_.dynamicChildren)=>{if(g===_)return;g&&!$s(g,_)&&(A=O(g),Ue(g,E,R,!0),g=null),_.patchFlag===-2&&(P=!1,_.dynamicChildren=null);const{type:C,ref:H,shapeFlag:N}=_;switch(C){case sn:w(g,_,m,A);break;case Bt:T(g,_,m,A);break;case Or:g==null&&S(_,m,A,x);break;case fe:Ft(g,_,m,A,E,R,x,I,P);break;default:N&1?q(g,_,m,A,E,R,x,I,P):N&6?lt(g,_,m,A,E,R,x,I,P):(N&64||N&128)&&C.process(g,_,m,A,E,R,x,I,P,F)}H!=null&&E?Fs(H,g&&g.ref,R,_||g,!_):H==null&&g&&g.ref!=null&&Fs(g.ref,null,R,g,!0)},w=(g,_,m,A)=>{if(g==null)r(_.el=a(_.children),m,A);else{const E=_.el=g.el;_.children!==g.children&&c(E,_.children)}},T=(g,_,m,A)=>{g==null?r(_.el=l(_.children||""),m,A):_.el=g.el},S=(g,_,m,A)=>{[g.el,g.anchor]=v(g.children,_,m,A,g.el,g.anchor)},b=({el:g,anchor:_},m,A)=>{let E;for(;g&&g!==_;)E=f(g),r(g,m,A),g=E;r(_,m,A)},k=({el:g,anchor:_})=>{let m;for(;g&&g!==_;)m=f(g),n(g),g=m;n(_)},q=(g,_,m,A,E,R,x,I,P)=>{if(_.type==="svg"?x="svg":_.type==="math"&&(x="mathml"),g==null)z(_,m,A,E,R,x,I,P);else{const C=g.el&&g.el._isVueCE?g.el:null;try{C&&C._beginPatch(),be(g,_,E,R,x,I,P)}finally{C&&C._endPatch()}}},z=(g,_,m,A,E,R,x,I)=>{let P,C;const{props:H,shapeFlag:N,transition:V,dirs:G}=g;if(P=g.el=o(g.type,R,H&&H.is,H),N&8?u(P,g.children):N&16&&me(g.children,P,null,A,E,gn(g,R),x,I),G&&Ht(g,null,A,"created"),J(P,g,g.scopeId,x,A),H){for(const ce in H)ce!=="value"&&!Bs(ce)&&i(P,ce,null,H[ce],R,A);"value"in H&&i(P,"value",null,H.value,R),(C=H.onVnodeBeforeMount)&&dt(C,A,g)}G&&Ht(g,null,A,"beforeMount");const X=td(E,V);X&&V.beforeEnter(P),r(P,_,m),((C=H&&H.onVnodeMounted)||X||G)&&qe(()=>{C&&dt(C,A,g),X&&V.enter(P),G&&Ht(g,null,A,"mounted")},E)},J=(g,_,m,A,E)=>{if(m&&p(g,m),A)for(let R=0;R<A.length;R++)p(g,A[R]);if(E){let R=E.subTree;if(_===R||nl(R.type)&&(R.ssContent===_||R.ssFallback===_)){const x=E.vnode;J(g,x,x.scopeId,x.slotScopeIds,E.parent)}}},me=(g,_,m,A,E,R,x,I,P=0)=>{for(let C=P;C<g.length;C++){const H=g[C]=I?jt(g[C]):ft(g[C]);y(null,H,_,m,A,E,R,x,I)}},be=(g,_,m,A,E,R,x)=>{const I=_.el=g.el;let{patchFlag:P,dynamicChildren:C,dirs:H}=_;P|=g.patchFlag&16;const N=g.props||ae,V=_.props||ae;let G;if(m&&Kt(m,!1),(G=V.onVnodeBeforeUpdate)&&dt(G,m,_,g),H&&Ht(_,g,m,"beforeUpdate"),m&&Kt(m,!0),(N.innerHTML&&V.innerHTML==null||N.textContent&&V.textContent==null)&&u(I,""),C?at(g.dynamicChildren,C,I,m,A,gn(_,E),R):x||ee(g,_,I,null,m,A,gn(_,E),R,!1),P>0){if(P&16)Rt(I,N,V,m,E);else if(P&2&&N.class!==V.class&&i(I,"class",null,V.class,E),P&4&&i(I,"style",N.style,V.style,E),P&8){const X=_.dynamicProps;for(let ce=0;ce<X.length;ce++){const ne=X[ce],Le=N[ne],Re=V[ne];(Re!==Le||ne==="value")&&i(I,ne,Le,Re,E,m)}}P&1&&g.children!==_.children&&u(I,_.children)}else!x&&C==null&&Rt(I,N,V,m,E);((G=V.onVnodeUpdated)||H)&&qe(()=>{G&&dt(G,m,_,g),H&&Ht(_,g,m,"updated")},A)},at=(g,_,m,A,E,R,x)=>{for(let I=0;I<_.length;I++){const P=g[I],C=_[I],H=P.el&&(P.type===fe||!$s(P,C)||P.shapeFlag&198)?d(P.el):m;y(P,C,H,null,A,E,R,x,!0)}},Rt=(g,_,m,A,E)=>{if(_!==m){if(_!==ae)for(const R in _)!Bs(R)&&!(R in m)&&i(g,R,_[R],null,E,A);for(const R in m){if(Bs(R))continue;const x=m[R],I=_[R];x!==I&&R!=="value"&&i(g,R,I,x,E,A)}"value"in m&&i(g,"value",_.value,m.value,E)}},Ft=(g,_,m,A,E,R,x,I,P)=>{const C=_.el=g?g.el:a(""),H=_.anchor=g?g.anchor:a("");let{patchFlag:N,dynamicChildren:V,slotScopeIds:G}=_;G&&(I=I?I.concat(G):G),g==null?(r(C,m,A),r(H,m,A),me(_.children||[],m,H,E,R,x,I,P)):N>0&&N&64&&V&&g.dynamicChildren?(at(g.dynamicChildren,V,m,E,R,x,I),(_.key!=null||E&&_===E.subTree)&&Za(g,_,!0)):ee(g,_,m,H,E,R,x,I,P)},lt=(g,_,m,A,E,R,x,I,P)=>{_.slotScopeIds=I,g==null?_.shapeFlag&512?E.ctx.activate(_,m,A,x,P):xs(_,m,A,E,R,x,P):rs(g,_,P)},xs=(g,_,m,A,E,R,x)=>{const I=g.component=bd(g,A,E);if(Ba(g)&&(I.ctx.renderer=F),Sd(I,!1,x),I.asyncDep){if(E&&E.registerDep(I,Ee,x),!g.el){const P=I.subTree=oe(Bt);T(null,P,_,m),g.placeholder=P.el}}else Ee(I,g,_,m,E,R,x)},rs=(g,_,m)=>{const A=_.component=g.component;if(dd(g,_,m))if(A.asyncDep&&!A.asyncResolved){ie(A,_,m);return}else A.next=_,A.update();else _.el=g.el,A.vnode=_},Ee=(g,_,m,A,E,R,x)=>{const I=()=>{if(g.isMounted){let{next:N,bu:V,u:G,parent:X,vnode:ce}=g;{const Ve=el(g);if(Ve){N&&(N.el=ce.el,ie(g,N,x)),Ve.asyncDep.then(()=>{g.isUnmounted||I()});return}}let ne=N,Le;Kt(g,!1),N?(N.el=ce.el,ie(g,N,x)):N=ce,V&&br(V),(Le=N.props&&N.props.onVnodeBeforeUpdate)&&dt(Le,X,N,ce),Kt(g,!0);const Re=_n(g),Ze=g.subTree;g.subTree=Re,y(Ze,Re,d(Ze.el),O(Ze),g,E,R),N.el=Re.el,ne===null&&hd(g,Re.el),G&&qe(G,E),(Le=N.props&&N.props.onVnodeUpdated)&&qe(()=>dt(Le,X,N,ce),E)}else{let N;const{el:V,props:G}=_,{bm:X,m:ce,parent:ne,root:Le,type:Re}=g,Ze=qs(_);if(Kt(g,!1),X&&br(X),!Ze&&(N=G&&G.onVnodeBeforeMount)&&dt(N,ne,_),Kt(g,!0),V&&he){const Ve=()=>{g.subTree=_n(g),he(V,g.subTree,g,E,null)};Ze&&Re.__asyncHydrate?Re.__asyncHydrate(V,g,Ve):Ve()}else{Le.ce&&Le.ce._def.shadowRoot!==!1&&Le.ce._injectChildStyle(Re);const Ve=g.subTree=_n(g);y(null,Ve,m,A,g,E,R),_.el=Ve.el}if(ce&&qe(ce,E),!Ze&&(N=G&&G.onVnodeMounted)){const Ve=_;qe(()=>dt(N,ne,Ve),E)}(_.shapeFlag&256||ne&&qs(ne.vnode)&&ne.vnode.shapeFlag&256)&&g.a&&qe(g.a,E),g.isMounted=!0,_=m=A=null}};g.scope.on();const P=g.effect=new ga(I);g.scope.off();const C=g.update=P.run.bind(P),H=g.job=P.runIfDirty.bind(P);H.i=g,H.id=g.uid,P.scheduler=()=>mi(H),Kt(g,!0),C()},ie=(g,_,m)=>{_.component=g;const A=g.vnode.props;g.vnode=_,g.next=null,zu(g,_.props,A,m),Xu(g,_.children,m),Tt(),qi(g),kt()},ee=(g,_,m,A,E,R,x,I,P=!1)=>{const C=g&&g.children,H=g?g.shapeFlag:0,N=_.children,{patchFlag:V,shapeFlag:G}=_;if(V>0){if(V&128){Ct(C,N,m,A,E,R,x,I,P);return}else if(V&256){vt(C,N,m,A,E,R,x,I,P);return}}G&8?(H&16&&ze(C,E,R),N!==C&&u(m,N)):H&16?G&16?Ct(C,N,m,A,E,R,x,I,P):ze(C,E,R,!0):(H&8&&u(m,""),G&16&&me(N,m,A,E,R,x,I,P))},vt=(g,_,m,A,E,R,x,I,P)=>{g=g||_s,_=_||_s;const C=g.length,H=_.length,N=Math.min(C,H);let V;for(V=0;V<N;V++){const G=_[V]=P?jt(_[V]):ft(_[V]);y(g[V],G,m,null,E,R,x,I,P)}C>H?ze(g,E,R,!0,!1,N):me(_,m,A,E,R,x,I,P,N)},Ct=(g,_,m,A,E,R,x,I,P)=>{let C=0;const H=_.length;let N=g.length-1,V=H-1;for(;C<=N&&C<=V;){const G=g[C],X=_[C]=P?jt(_[C]):ft(_[C]);if($s(G,X))y(G,X,m,null,E,R,x,I,P);else break;C++}for(;C<=N&&C<=V;){const G=g[N],X=_[V]=P?jt(_[V]):ft(_[V]);if($s(G,X))y(G,X,m,null,E,R,x,I,P);else break;N--,V--}if(C>N){if(C<=V){const G=V+1,X=G<H?_[G].el:A;for(;C<=V;)y(null,_[C]=P?jt(_[C]):ft(_[C]),m,X,E,R,x,I,P),C++}}else if(C>V)for(;C<=N;)Ue(g[C],E,R,!0),C++;else{const G=C,X=C,ce=new Map;for(C=X;C<=V;C++){const Fe=_[C]=P?jt(_[C]):ft(_[C]);Fe.key!=null&&ce.set(Fe.key,C)}let ne,Le=0;const Re=V-X+1;let Ze=!1,Ve=0;const js=new Array(Re);for(C=0;C<Re;C++)js[C]=0;for(C=G;C<=N;C++){const Fe=g[C];if(Le>=Re){Ue(Fe,E,R,!0);continue}let ut;if(Fe.key!=null)ut=ce.get(Fe.key);else for(ne=X;ne<=V;ne++)if(js[ne-X]===0&&$s(Fe,_[ne])){ut=ne;break}ut===void 0?Ue(Fe,E,R,!0):(js[ut-X]=C+1,ut>=Ve?Ve=ut:Ze=!0,y(Fe,_[ut],m,null,E,R,x,I,P),Le++)}const Di=Ze?sd(js):_s;for(ne=Di.length-1,C=Re-1;C>=0;C--){const Fe=X+C,ut=_[Fe],Ui=_[Fe+1],Li=Fe+1<H?Ui.el||Ui.placeholder:A;js[C]===0?y(null,ut,m,Li,E,R,x,I,P):Ze&&(ne<0||C!==Di[ne]?ct(ut,m,Li,2):ne--)}}},ct=(g,_,m,A,E=null)=>{const{el:R,type:x,transition:I,children:P,shapeFlag:C}=g;if(C&6){ct(g.component.subTree,_,m,A);return}if(C&128){g.suspense.move(_,m,A);return}if(C&64){x.move(g,_,m,F);return}if(x===fe){r(R,_,m);for(let N=0;N<P.length;N++)ct(P[N],_,m,A);r(g.anchor,_,m);return}if(x===Or){b(g,_,m);return}if(A!==2&&C&1&&I)if(A===0)I.beforeEnter(R),r(R,_,m),qe(()=>I.enter(R),E);else{const{leave:N,delayLeave:V,afterLeave:G}=I,X=()=>{g.ctx.isUnmounted?n(R):r(R,_,m)},ce=()=>{R._isLeaving&&R[Ou](!0),N(R,()=>{X(),G&&G()})};V?V(R,X,ce):ce()}else r(R,_,m)},Ue=(g,_,m,A=!1,E=!1)=>{const{type:R,props:x,ref:I,children:P,dynamicChildren:C,shapeFlag:H,patchFlag:N,dirs:V,cacheIndex:G}=g;if(N===-2&&(E=!1),I!=null&&(Tt(),Fs(I,null,m,g,!0),kt()),G!=null&&(_.renderCache[G]=void 0),H&256){_.ctx.deactivate(g);return}const X=H&1&&V,ce=!qs(g);let ne;if(ce&&(ne=x&&x.onVnodeBeforeUnmount)&&dt(ne,_,g),H&6)qt(g.component,m,A);else{if(H&128){g.suspense.unmount(m,A);return}X&&Ht(g,null,_,"beforeUnmount"),H&64?g.type.remove(g,_,m,F,A):C&&!C.hasOnce&&(R!==fe||N>0&&N&64)?ze(C,_,m,!1,!0):(R===fe&&N&384||!E&&H&16)&&ze(P,_,m),A&&ns(g)}(ce&&(ne=x&&x.onVnodeUnmounted)||X)&&qe(()=>{ne&&dt(ne,_,g),X&&Ht(g,null,_,"unmounted")},m)},ns=g=>{const{type:_,el:m,anchor:A,transition:E}=g;if(_===fe){is(m,A);return}if(_===Or){k(g);return}const R=()=>{n(m),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(g.shapeFlag&1&&E&&!E.persisted){const{leave:x,delayLeave:I}=E,P=()=>x(m,R);I?I(g.el,R,P):P()}else R()},is=(g,_)=>{let m;for(;g!==_;)m=f(g),n(g),g=m;n(_)},qt=(g,_,m)=>{const{bum:A,scope:E,job:R,subTree:x,um:I,m:P,a:C}=g;Yi(P),Yi(C),A&&br(A),E.stop(),R&&(R.flags|=8,Ue(x,g,_,m)),I&&qe(I,_),qe(()=>{g.isUnmounted=!0},_)},ze=(g,_,m,A=!1,E=!1,R=0)=>{for(let x=R;x<g.length;x++)Ue(g[x],_,m,A,E)},O=g=>{if(g.shapeFlag&6)return O(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const _=f(g.anchor||g.el),m=_&&_[Eu];return m?f(m):_};let D=!1;const j=(g,_,m)=>{g==null?_._vnode&&Ue(_._vnode,null,null,!0):y(_._vnode||null,g,_,null,null,null,m),_._vnode=g,D||(D=!0,qi(),Na(),D=!1)},F={p:y,um:Ue,m:ct,r:ns,mt:xs,mc:me,pc:ee,pbc:at,n:O,o:t};let Y,he;return e&&([Y,he]=e(F)),{render:j,hydrate:Y,createApp:Wu(j,Y)}}function gn({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Kt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function td(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Za(t,e,s=!1){const r=t.children,n=e.children;if(W(r)&&W(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=jt(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Za(o,a)),a.type===sn&&a.patchFlag!==-1&&(a.el=o.el),a.type===Bt&&!a.el&&(a.el=o.el)}}function sd(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(n=s[s.length-1],t[n]<c){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function el(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:el(e)}function Yi(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rd=Symbol.for("v-scx"),nd=()=>Ot(rd);function Sr(t,e,s){return tl(t,e,s)}function tl(t,e,s=ae){const{immediate:r,deep:n,flush:i,once:o}=s,a=Oe({},s),l=e&&r||!e&&i!=="post";let c;if(er){if(i==="sync"){const p=nd();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=nt,p.resume=nt,p.pause=nt,p}}const u=Pe;a.call=(p,v,y)=>gt(p,u,v,y);let d=!1;i==="post"?a.scheduler=p=>{qe(p,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,v)=>{v?p():mi(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=mu(t,e,a);return er&&(c?c.push(f):l&&f()),f}function id(t,e,s){const r=this.proxy,n=ve(t)?t.includes(".")?sl(r,t):()=>r[t]:t.bind(r,r);let i;Q(e)?i=e:(i=e.handler,s=e);const o=ar(this),a=tl(n,i.bind(r),s);return o(),a}function sl(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const od=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Xe(e)}Modifiers`]||t[`${Mt(e)}Modifiers`];function ad(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||ae;let n=s;const i=e.startsWith("update:"),o=i&&od(r,e.slice(7));o&&(o.trim&&(n=s.map(u=>ve(u)?u.trim():u)),o.number&&(n=s.map(Gr)));let a,l=r[a=cn(e)]||r[a=cn(Xe(e))];!l&&i&&(l=r[a=cn(Mt(e))]),l&&gt(l,t,6,n);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,gt(c,t,6,n)}}const ld=new WeakMap;function rl(t,e,s=!1){const r=s?ld:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!Q(t)){const l=c=>{const u=rl(c,e,!0);u&&(a=!0,Oe(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(le(t)&&r.set(t,null),null):(W(i)?i.forEach(l=>o[l]=null):Oe(o,i),le(t)&&r.set(t,o),o)}function tn(t,e){return!t||!qr(e)?!1:(e=e.slice(2).replace(/Once$/,""),re(t,e[0].toLowerCase()+e.slice(1))||re(t,Mt(e))||re(t,e))}function _n(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:v,inheritAttrs:y}=t,w=Pr(t);let T,S;try{if(s.shapeFlag&4){const k=n||r,q=k;T=ft(c.call(q,k,u,d,p,f,v)),S=a}else{const k=e;T=ft(k.length>1?k(d,{attrs:a,slots:o,emit:l}):k(d,null)),S=e.props?a:cd(a)}}catch(k){Ks.length=0,Zr(k,t,1),T=oe(Bt)}let b=T;if(S&&y!==!1){const k=Object.keys(S),{shapeFlag:q}=b;k.length&&q&7&&(i&&k.some(ai)&&(S=ud(S,i)),b=Ts(b,S,!1,!0))}return s.dirs&&(b=Ts(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&yi(b,s.transition),T=b,Pr(w),T}const cd=t=>{let e;for(const s in t)(s==="class"||s==="style"||qr(s))&&((e||(e={}))[s]=t[s]);return e},ud=(t,e)=>{const s={};for(const r in t)(!ai(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function dd(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Xi(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!tn(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Xi(r,o,c):!0:!!o;return!1}function Xi(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!tn(s,i))return!0}return!1}function hd({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const nl=t=>t.__isSuspense;function fd(t,e){e&&e.pendingBranch?W(t)?e.effects.push(...t):e.effects.push(t):bu(t)}const fe=Symbol.for("v-fgt"),sn=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),Or=Symbol.for("v-stc"),Ks=[];let Ge=null;function U(t=!1){Ks.push(Ge=t?null:[])}function pd(){Ks.pop(),Ge=Ks[Ks.length-1]||null}let Zs=1;function jr(t,e=!1){Zs+=t,t<0&&Ge&&e&&(Ge.hasOnce=!0)}function il(t){return t.dynamicChildren=Zs>0?Ge||_s:null,pd(),Zs>0&&Ge&&Ge.push(t),t}function L(t,e,s,r,n,i){return il(h(t,e,s,r,n,i,!0))}function gd(t,e,s,r,n){return il(oe(t,e,s,r,n,!0))}function Nr(t){return t?t.__v_isVNode===!0:!1}function $s(t,e){return t.type===e.type&&t.key===e.key}const ol=({key:t})=>t??null,Tr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ve(t)||Ie(t)||Q(t)?{i:We,r:t,k:e,f:!!s}:t:null);function h(t,e=null,s=null,r=0,n=null,i=t===fe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ol(e),ref:e&&Tr(e),scopeId:Da,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:We};return a?(Si(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=ve(s)?8:16),Zs>0&&!o&&Ge&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ge.push(l),l}const oe=_d;function _d(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Uu)&&(t=Bt),Nr(t)){const a=Ts(t,e,!0);return s&&Si(a,s),Zs>0&&!i&&Ge&&(a.shapeFlag&6?Ge[Ge.indexOf(t)]=a:Ge.push(a)),a.patchFlag=-2,a}if(Rd(t)&&(t=t.__vccOpts),e){e=vd(e);let{class:a,style:l}=e;a&&!ve(a)&&(e.class=Se(a)),le(l)&&(_i(l)&&!W(l)&&(l=Oe({},l)),e.style=Jr(l))}const o=ve(t)?1:nl(t)?128:Su(t)?64:le(t)?4:Q(t)?2:0;return h(t,e,s,r,n,o,i,!0)}function vd(t){return t?_i(t)||Ga(t)?Oe({},t):t:null}function Ts(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?md(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ol(c),ref:e&&e.ref?s&&i?W(i)?i.concat(Tr(e)):[i,Tr(e)]:Tr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==fe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ts(t.ssContent),ssFallback:t.ssFallback&&Ts(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&yi(u,l.clone(u)),u}function Z(t=" ",e=0){return oe(sn,null,t,e)}function al(t,e){const s=oe(Or,null,t);return s.staticCount=e,s}function Ut(t="",e=!1){return e?(U(),gd(Bt,null,t)):oe(Bt,null,t)}function ft(t){return t==null||typeof t=="boolean"?oe(Bt):W(t)?oe(fe,null,t.slice()):Nr(t)?jt(t):oe(sn,null,String(t))}function jt(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ts(t)}function Si(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(W(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Si(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Ga(e)?e._ctx=We:n===3&&We&&(We.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:We},s=32):(e=String(e),r&64?(s=16,e=[Z(e)]):s=8);t.children=e,t.shapeFlag|=s}function md(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Se([e.class,r.class]));else if(n==="style")e.style=Jr([e.style,r.style]);else if(qr(n)){const i=e[n],o=r[n];o&&i!==o&&!(W(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function dt(t,e,s,r=null){gt(t,e,7,[s,r])}const yd=Ha();let wd=0;function bd(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||yd,i={uid:wd++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ja(r,n),emitsOptions:rl(r,n),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:r.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ad.bind(null,i),t.ce&&t.ce(i),i}let Pe=null;const Ed=()=>Pe||We;let $r,Vn;{const t=zr(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};$r=e("__VUE_INSTANCE_SETTERS__",s=>Pe=s),Vn=e("__VUE_SSR_SETTERS__",s=>er=s)}const ar=t=>{const e=Pe;return $r(t),t.scope.on(),()=>{t.scope.off(),$r(e)}},Zi=()=>{Pe&&Pe.scope.off(),$r(null)};function ll(t){return t.vnode.shapeFlag&4}let er=!1;function Sd(t,e=!1,s=!1){e&&Vn(e);const{props:r,children:n}=t.vnode,i=ll(t);Gu(t,r,i,e),Yu(t,n,s||e);const o=i?Od(t,e):void 0;return e&&Vn(!1),o}function Od(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Bu);const{setup:r}=s;if(r){Tt();const n=t.setupContext=r.length>1?kd(t):null,i=ar(t),o=or(r,t,0,[t.props,n]),a=la(o);if(kt(),i(),(a||t.sp)&&!qs(t)&&La(t),a){if(o.then(Zi,Zi),e)return o.then(l=>{eo(t,l,e)}).catch(l=>{Zr(l,t,0)});t.asyncDep=o}else eo(t,o,e)}else cl(t,e)}function eo(t,e,s){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:le(e)&&(t.setupState=Ia(e)),cl(t,s)}let to;function cl(t,e,s){const r=t.type;if(!t.render){if(!e&&to&&!r.render){const n=r.template||wi(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Oe(Oe({isCustomElement:i,delimiters:a},o),l);r.render=to(n,c)}}t.render=r.render||nt}{const n=ar(t);Tt();try{Mu(t)}finally{kt(),n()}}}const Td={get(t,e){return Ce(t,"get",""),t[e]}};function kd(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Td),slots:t.slots,emit:t.emit,expose:e}}function rn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ia(uu(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Hs)return Hs[s](t)},has(e,s){return s in e||s in Hs}})):t.proxy}function Ad(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function Rd(t){return Q(t)&&"__vccOpts"in t}const rt=(t,e)=>_u(t,e,er);function ul(t,e,s){try{jr(-1);const r=arguments.length;return r===2?le(e)&&!W(e)?Nr(e)?oe(t,null,[e]):oe(t,e):oe(t,null,e):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&Nr(s)&&(s=[s]),oe(t,e,s))}finally{jr(1)}}const Cd="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fn;const so=typeof window<"u"&&window.trustedTypes;if(so)try{Fn=so.createPolicy("vue",{createHTML:t=>t})}catch{}const dl=Fn?t=>Fn.createHTML(t):t=>t,Pd="http://www.w3.org/2000/svg",Id="http://www.w3.org/1998/Math/MathML",wt=typeof document<"u"?document:null,ro=wt&&wt.createElement("template"),xd={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?wt.createElementNS(Pd,t):e==="mathml"?wt.createElementNS(Id,t):s?wt.createElement(t,{is:s}):wt.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>wt.createTextNode(t),createComment:t=>wt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{ro.innerHTML=dl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=ro.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},jd=Symbol("_vtc");function Nd(t,e,s){const r=t[jd];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const no=Symbol("_vod"),$d=Symbol("_vsh"),Dd=Symbol(""),Ud=/(?:^|;)\s*display\s*:/;function Ld(t,e,s){const r=t.style,n=ve(s);let i=!1;if(s&&!n){if(e)if(ve(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&kr(r,a,"")}else for(const o in e)s[o]==null&&kr(r,o,"");for(const o in s)o==="display"&&(i=!0),kr(r,o,s[o])}else if(n){if(e!==s){const o=r[Dd];o&&(s+=";"+o),r.cssText=s,i=Ud.test(s)}}else e&&t.removeAttribute("style");no in t&&(t[no]=i?r.display:"",t[$d]&&(r.display="none"))}const io=/\s*!important$/;function kr(t,e,s){if(W(s))s.forEach(r=>kr(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=Bd(t,e);io.test(s)?t.setProperty(Mt(r),s.replace(io,""),"important"):t[r]=s}}const oo=["Webkit","Moz","ms"],vn={};function Bd(t,e){const s=vn[e];if(s)return s;let r=Xe(e);if(r!=="filter"&&r in t)return vn[e]=r;r=Wr(r);for(let n=0;n<oo.length;n++){const i=oo[n]+r;if(i in t)return vn[e]=i}return e}const ao="http://www.w3.org/1999/xlink";function lo(t,e,s,r,n,i=Vc(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ao,e.slice(6,e.length)):t.setAttributeNS(ao,e,s):s==null||i&&!ha(s)?t.removeAttribute(e):t.setAttribute(e,i?"":pt(s)?String(s):s)}function co(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?dl(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=ha(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Qt(t,e,s,r){t.addEventListener(e,s,r)}function Md(t,e,s,r){t.removeEventListener(e,s,r)}const uo=Symbol("_vei");function Vd(t,e,s,r,n=null){const i=t[uo]||(t[uo]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Fd(e);if(r){const c=i[e]=Kd(r,n);Qt(t,a,c,l)}else o&&(Md(t,a,o,l),i[e]=void 0)}}const ho=/(?:Once|Passive|Capture)$/;function Fd(t){let e;if(ho.test(t)){e={};let r;for(;r=t.match(ho);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mt(t.slice(2)),e]}let mn=0;const qd=Promise.resolve(),Hd=()=>mn||(qd.then(()=>mn=0),mn=Date.now());function Kd(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;gt(Wd(r,s.value),e,5,[r])};return s.value=t,s.attached=Hd(),s}function Wd(t,e){if(W(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const fo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Gd=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?Nd(t,r,o):e==="style"?Ld(t,s,r):qr(e)?ai(e)||Vd(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):zd(t,e,r,o))?(co(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&lo(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!ve(r))?co(t,Xe(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),lo(t,e,r,o))};function zd(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&fo(e)&&Q(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return fo(e)&&ve(s)?!1:e in t}const Dr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return W(e)?s=>br(e,s):e};function Jd(t){t.target.composing=!0}function po(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ss=Symbol("_assign");function go(t,e,s){return e&&(t=t.trim()),s&&(t=Gr(t)),t}const nn={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[Ss]=Dr(n);const i=r||n.props&&n.props.type==="number";Qt(t,e?"change":"input",o=>{o.target.composing||t[Ss](go(t.value,s,i))}),(s||i)&&Qt(t,"change",()=>{t.value=go(t.value,s,i)}),e||(Qt(t,"compositionstart",Jd),Qt(t,"compositionend",po),Qt(t,"change",po))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[Ss]=Dr(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Gr(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},Qd={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=Hr(e);Qt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Gr(Ur(o)):Ur(o));t[Ss](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,vi(()=>{t._assigning=!1})}),t[Ss]=Dr(r)},mounted(t,{value:e}){_o(t,e)},beforeUpdate(t,e,s){t[Ss]=Dr(s)},updated(t,{value:e}){t._assigning||_o(t,e)}};function _o(t,e){const s=t.multiple,r=W(e);if(!(s&&!r&&!Hr(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],a=Ur(o);if(s)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=qc(e,a)>-1}else o.selected=e.has(a);else if(Qr(Ur(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ur(t){return"_value"in t?t._value:t.value}const Yd=["ctrl","shift","alt","meta"],Xd={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Yd.some(s=>t[`${s}Key`]&&!e.includes(s))},Oi=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const a=Xd[e[o]];if(a&&a(n,e))return}return t(n,...i)})},Zd={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},hl=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=Mt(n.key);if(e.some(o=>o===i||Zd[o]===i))return t(n)})},eh=Oe({patchProp:Gd},xd);let vo;function th(){return vo||(vo=Zu(eh))}const sh=(...t)=>{const e=th().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=nh(r);if(!n)return;const i=e._component;!Q(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,rh(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function rh(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function nh(t){return ve(t)?document.querySelector(t):t}const _t=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},ih={name:"Navbar",data(){return{searchQuery:""}},methods:{handleSearch(){this.searchQuery.trim()&&this.$router.push(`/videos?search=${encodeURIComponent(this.searchQuery)}`)}}},oh={class:"navbar"},ah={class:"container"},lh={class:"nav-content"},ch={class:"logo"},uh={class:"nav-links"},dh={class:"nav-search"},hh={class:"search-box"};function fh(t,e,s,r,n,i){const o=bs("router-link");return U(),L("nav",oh,[h("div",ah,[h("div",lh,[h("div",ch,[oe(o,{to:"/",class:"logo-link"},{default:Qe(()=>[...e[2]||(e[2]=[h("i",{class:"fas fa-music"},null,-1),h("span",null,"",-1)])]),_:1})]),h("div",uh,[oe(o,{to:"/",class:"nav-link"},{default:Qe(()=>[...e[3]||(e[3]=[Z("",-1)])]),_:1}),oe(o,{to:"/categories",class:"nav-link"},{default:Qe(()=>[...e[4]||(e[4]=[Z("",-1)])]),_:1}),oe(o,{to:"/videos",class:"nav-link"},{default:Qe(()=>[...e[5]||(e[5]=[Z("",-1)])]),_:1}),oe(o,{to:"/ai-learning",class:"nav-link"},{default:Qe(()=>[...e[6]||(e[6]=[Z("AI",-1)])]),_:1}),oe(o,{to:"/about",class:"nav-link"},{default:Qe(()=>[...e[7]||(e[7]=[Z("",-1)])]),_:1})]),h("div",dh,[h("div",hh,[e[8]||(e[8]=h("i",{class:"fas fa-search search-icon"},null,-1)),Xs(h("input",{type:"text",class:"search-input",placeholder:"...","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchQuery=a),onKeyup:e[1]||(e[1]=hl((...a)=>i.handleSearch&&i.handleSearch(...a),["enter"]))},null,544),[[nn,n.searchQuery]])])])])])])}const ph=_t(ih,[["render",fh],["__scopeId","data-v-1b195a95"]]);const gh={name:"Footer"},_h={class:"footer"},vh={class:"container"},mh={class:"footer-content"},yh={class:"footer-section"};function wh(t,e,s,r,n,i){const o=bs("router-link");return U(),L("footer",_h,[h("div",vh,[h("div",mh,[e[5]||(e[5]=al('<div class="footer-section" data-v-82254c51><h3 data-v-82254c51></h3><p data-v-82254c51></p><div class="social-links" data-v-82254c51><a href="#" class="social-link" data-v-82254c51><i class="fab fa-weixin" data-v-82254c51></i></a><a href="#" class="social-link" data-v-82254c51><i class="fab fa-weibo" data-v-82254c51></i></a><a href="#" class="social-link" data-v-82254c51><i class="fab fa-qq" data-v-82254c51></i></a></div></div>',1)),h("div",yh,[e[4]||(e[4]=h("h4",null,"",-1)),h("ul",null,[h("li",null,[oe(o,{to:"/"},{default:Qe(()=>[...e[0]||(e[0]=[Z("",-1)])]),_:1})]),h("li",null,[oe(o,{to:"/categories"},{default:Qe(()=>[...e[1]||(e[1]=[Z("",-1)])]),_:1})]),h("li",null,[oe(o,{to:"/videos"},{default:Qe(()=>[...e[2]||(e[2]=[Z("",-1)])]),_:1})]),h("li",null,[oe(o,{to:"/about"},{default:Qe(()=>[...e[3]||(e[3]=[Z("",-1)])]),_:1})])])]),e[6]||(e[6]=h("div",{class:"footer-section"},[h("h4",null,""),h("ul",null,[h("li",null,[h("i",{class:"fas fa-envelope"}),Z(" contact@quyi.com")]),h("li",null,[h("i",{class:"fas fa-phone"}),Z(" 400-123-4567")]),h("li",null,[h("i",{class:"fas fa-map-marker-alt"}),Z(" ")])])],-1))]),e[7]||(e[7]=h("div",{class:"footer-bottom"},[h("p",null," 2025 . .")],-1))])])}const bh=_t(gh,[["render",wh],["__scopeId","data-v-82254c51"]]);const Eh={name:"App",components:{Navbar:ph,Footer:bh}},Sh={id:"app"},Oh={class:"main-content"};function Th(t,e,s,r,n,i){const o=bs("Navbar"),a=bs("router-view"),l=bs("Footer");return U(),L("div",Sh,[oe(o),h("main",Oh,[oe(a)]),oe(l)])}const kh=_t(Eh,[["render",Th],["__scopeId","data-v-a7a43c4d"]]);/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const fs=typeof document<"u";function fl(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ah(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&fl(t.default)}const te=Object.assign;function yn(t,e){const s={};for(const r in e){const n=e[r];s[r]=ot(n)?n.map(t):t(n)}return s}const Ws=()=>{},ot=Array.isArray;function mo(t,e){const s={};for(const r in t)s[r]=r in e?e[r]:t[r];return s}const pl=/#/g,Rh=/&/g,Ch=/\//g,Ph=/=/g,Ih=/\?/g,gl=/\+/g,xh=/%5B/g,jh=/%5D/g,_l=/%5E/g,Nh=/%60/g,vl=/%7B/g,$h=/%7C/g,ml=/%7D/g,Dh=/%20/g;function Ti(t){return t==null?"":encodeURI(""+t).replace($h,"|").replace(xh,"[").replace(jh,"]")}function Uh(t){return Ti(t).replace(vl,"{").replace(ml,"}").replace(_l,"^")}function qn(t){return Ti(t).replace(gl,"%2B").replace(Dh,"+").replace(pl,"%23").replace(Rh,"%26").replace(Nh,"`").replace(vl,"{").replace(ml,"}").replace(_l,"^")}function Lh(t){return qn(t).replace(Ph,"%3D")}function Bh(t){return Ti(t).replace(pl,"%23").replace(Ih,"%3F")}function Mh(t){return Bh(t).replace(Ch,"%2F")}function tr(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Vh=/\/$/,Fh=t=>t.replace(Vh,"");function wn(t,e,s="/"){let r,n={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),n=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Wh(r??e,s),{fullPath:r+i+o,path:r,query:n,hash:tr(o)}}function qh(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function yo(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Hh(t,e,s){const r=e.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&ks(e.matched[r],s.matched[n])&&yl(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function ks(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Kh(t[s],e[s]))return!1;return!0}function Kh(t,e){return ot(t)?wo(t,e):ot(e)?wo(e,t):t===e}function wo(t,e){return ot(e)?t.length===e.length&&t.every((s,r)=>s===e[r]):t.length===1&&t[0]===e}function Wh(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),r=t.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=s.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Pt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Hn=function(t){return t.pop="pop",t.push="push",t}({}),bn=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Gh(t){if(!t)if(fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Fh(t)}const zh=/^[^#]+#/;function Jh(t,e){return t.replace(zh,"#")+e}function Qh(t,e){const s=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-s.left-(e.left||0),top:r.top-s.top-(e.top||0)}}const on=()=>({left:window.scrollX,top:window.scrollY});function Yh(t){let e;if("el"in t){const s=t.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=Qh(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function bo(t,e){return(history.state?history.state.position-e:-1)+t}const Kn=new Map;function Xh(t,e){Kn.set(t,e)}function Zh(t){const e=Kn.get(t);return Kn.delete(t),e}function ef(t){return typeof t=="string"||t&&typeof t=="object"}function wl(t){return typeof t=="string"||typeof t=="symbol"}let ge=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const bl=Symbol("");ge.MATCHER_NOT_FOUND+"",ge.NAVIGATION_GUARD_REDIRECT+"",ge.NAVIGATION_ABORTED+"",ge.NAVIGATION_CANCELLED+"",ge.NAVIGATION_DUPLICATED+"";function As(t,e){return te(new Error,{type:t,[bl]:!0},e)}function yt(t,e){return t instanceof Error&&bl in t&&(e==null||!!(t.type&e))}const tf=["params","query","hash"];function sf(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of tf)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function rf(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const n=s[r].replace(gl," "),i=n.indexOf("="),o=tr(i<0?n:n.slice(0,i)),a=i<0?null:tr(n.slice(i+1));if(o in e){let l=e[o];ot(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Eo(t){let e="";for(let s in t){const r=t[s];if(s=Lh(s),r==null){r!==void 0&&(e+=(e.length?"&":"")+s);continue}(ot(r)?r.map(n=>n&&qn(n)):[r&&qn(r)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function nf(t){const e={};for(const s in t){const r=t[s];r!==void 0&&(e[s]=ot(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return e}const of=Symbol(""),So=Symbol(""),ki=Symbol(""),El=Symbol(""),Wn=Symbol("");function Ds(){let t=[];function e(r){return t.push(r),()=>{const n=t.indexOf(r);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Nt(t,e,s,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(As(ge.NAVIGATION_ABORTED,{from:s,to:e})):f instanceof Error?l(f):ef(f)?l(As(ge.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&r.enterCallbacks[n]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[n],e,s,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function En(t,e,s,r,n=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(fl(l)){const c=(l.__vccOpts||l)[e];c&&i.push(Nt(c,s,r,o,a,n))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Ah(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Nt(f,s,r,o,a,n)()}))}}return i}function af(t,e){const s=[],r=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>ks(c,a))?r.push(a):s.push(a));const l=t.matched[o];l&&(e.matched.find(c=>ks(c,l))||n.push(l))}return[s,r,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lf=()=>location.protocol+"//"+location.host;function Sl(t,e){const{pathname:s,search:r,hash:n}=e,i=t.indexOf("#");if(i>-1){let o=n.includes(t.slice(i))?t.slice(i).length:1,a=n.slice(o);return a[0]!=="/"&&(a="/"+a),yo(a,"")}return yo(s,t)+r+n}function cf(t,e,s,r){let n=[],i=[],o=null;const a=({state:f})=>{const p=Sl(t,location),v=s.value,y=e.value;let w=0;if(f){if(s.value=p,e.value=f,o&&o===v){o=null;return}w=y?f.position-y.position:0}else r(p);n.forEach(T=>{T(s.value,v,{delta:w,type:Hn.pop,direction:w?w>0?bn.forward:bn.back:bn.unknown})})};function l(){o=s.value}function c(f){n.push(f);const p=()=>{const v=n.indexOf(f);v>-1&&n.splice(v,1)};return i.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(te({},f.state,{scroll:on()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function Oo(t,e,s,r=!1,n=!1){return{back:t,current:e,forward:s,replaced:r,position:window.history.length,scroll:n?on():null}}function uf(t){const{history:e,location:s}=window,r={value:Sl(t,s)},n={value:e.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?t:t.slice(d))+l:lf()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function o(l,c){i(l,te({},e.state,Oo(n.value.back,l,n.value.forward,!0),c,{position:n.value.position}),!0),r.value=l}function a(l,c){const u=te({},n.value,e.state,{forward:l,scroll:on()});i(u.current,u,!0),i(l,te({},Oo(r.value,l,null),{position:u.position+1},c),!1),r.value=l}return{location:r,state:n,push:a,replace:o}}function df(t){t=Gh(t);const e=uf(t),s=cf(t,e.state,e.location,e.replace);function r(i,o=!0){o||s.pauseListeners(),history.go(i)}const n=te({location:"",base:t,go:r,createHref:Jh.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}let es=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ye=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ye||{});const hf={type:es.Static,value:""},ff=/[a-zA-Z0-9_]/;function pf(t){if(!t)return[[]];if(t==="/")return[[hf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=ye.Static,r=s;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(s===ye.Static?i.push({type:es.Static,value:c}):s===ye.Param||s===ye.ParamRegExp||s===ye.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:es.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==ye.ParamRegExp){r=s,s=ye.EscapeNext;continue}switch(s){case ye.Static:l==="/"?(c&&d(),o()):l===":"?(d(),s=ye.Param):f();break;case ye.EscapeNext:f(),s=r;break;case ye.Param:l==="("?s=ye.ParamRegExp:ff.test(l)?f():(d(),s=ye.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case ye.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=ye.ParamRegExpEnd:u+=l;break;case ye.ParamRegExpEnd:d(),s=ye.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===ye.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}const To="[^/]+?",gf={sensitive:!1,strict:!1,start:!0,end:!0};var je=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(je||{});const _f=/[.+*?^${}()[\]/\\]/g;function vf(t,e){const s=te({},gf,e),r=[];let n=s.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[je.Root];s.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=je.Segment+(s.sensitive?je.BonusCaseSensitive:0);if(f.type===es.Static)d||(n+="/"),n+=f.value.replace(_f,"\\$&"),p+=je.Static;else if(f.type===es.Param){const{value:v,repeatable:y,optional:w,regexp:T}=f;i.push({name:v,repeatable:y,optional:w});const S=T||To;if(S!==To){p+=je.BonusCustomRegExp;try{`${S}`}catch(k){throw new Error(`Invalid custom RegExp for param "${v}" (${S}): `+k.message)}}let b=y?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(b=w&&c.length<2?`(?:/${b})`:"/"+b),w&&(b+="?"),n+=b,p+=je.Dynamic,w&&(p+=je.BonusOptional),y&&(p+=je.BonusRepeatable),S===".*"&&(p+=je.BonusWildcard)}u.push(p)}r.push(u)}if(s.strict&&s.end){const c=r.length-1;r[c][r[c].length-1]+=je.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",v=i[f-1];d[v.name]=p&&v.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===es.Static)u+=p.value;else if(p.type===es.Param){const{value:v,repeatable:y,optional:w}=p,T=v in c?c[v]:"";if(ot(T)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const S=ot(T)?T.join("/"):T;if(!S)if(w)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=S}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function mf(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=e[s]-t[s];if(r)return r;s++}return t.length<e.length?t.length===1&&t[0]===je.Static+je.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===je.Static+je.Segment?1:-1:0}function Ol(t,e){let s=0;const r=t.score,n=e.score;for(;s<r.length&&s<n.length;){const i=mf(r[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-r.length)===1){if(ko(r))return 1;if(ko(n))return-1}return n.length-r.length}function ko(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yf={strict:!1,end:!0,sensitive:!1};function wf(t,e,s){const r=vf(pf(t.path),s),n=te(r,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function bf(t,e){const s=[],r=new Map;e=mo(yf,e);function n(d){return r.get(d)}function i(d,f,p){const v=!p,y=Ro(d);y.aliasOf=p&&p.record;const w=mo(e,d),T=[y];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const q of k)T.push(Ro(te({},y,{components:p?p.record.components:y.components,path:q,aliasOf:p?p.record:y})))}let S,b;for(const k of T){const{path:q}=k;if(f&&q[0]!=="/"){const z=f.record.path,J=z[z.length-1]==="/"?"":"/";k.path=f.record.path+(q&&J+q)}if(S=wf(k,f,w),p?p.alias.push(S):(b=b||S,b!==S&&b.alias.push(S),v&&d.name&&!Co(S)&&o(d.name)),Tl(S)&&l(S),y.children){const z=y.children;for(let J=0;J<z.length;J++)i(z[J],S,p&&p.children[J])}p=p||S}return b?()=>{o(b)}:Ws}function o(d){if(wl(d)){const f=r.get(d);f&&(r.delete(d),s.splice(s.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=s.indexOf(d);f>-1&&(s.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return s}function l(d){const f=Of(d,s);s.splice(f,0,d),d.record.name&&!Co(d)&&r.set(d.record.name,d)}function c(d,f){let p,v={},y,w;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw As(ge.MATCHER_NOT_FOUND,{location:d});w=p.record.name,v=te(Ao(f.params,p.keys.filter(b=>!b.optional).concat(p.parent?p.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&Ao(d.params,p.keys.map(b=>b.name))),y=p.stringify(v)}else if(d.path!=null)y=d.path,p=s.find(b=>b.re.test(y)),p&&(v=p.parse(y),w=p.record.name);else{if(p=f.name?r.get(f.name):s.find(b=>b.re.test(f.path)),!p)throw As(ge.MATCHER_NOT_FOUND,{location:d,currentLocation:f});w=p.record.name,v=te({},f.params,d.params),y=p.stringify(v)}const T=[];let S=p;for(;S;)T.unshift(S.record),S=S.parent;return{name:w,path:y,params:v,matched:T,meta:Sf(T)}}t.forEach(d=>i(d));function u(){s.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function Ao(t,e){const s={};for(const r of e)r in t&&(s[r]=t[r]);return s}function Ro(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ef(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ef(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const r in t.components)e[r]=typeof s=="object"?s[r]:s;return e}function Co(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Sf(t){return t.reduce((e,s)=>te(e,s.meta),{})}function Of(t,e){let s=0,r=e.length;for(;s!==r;){const i=s+r>>1;Ol(t,e[i])<0?r=i:s=i+1}const n=Tf(t);return n&&(r=e.lastIndexOf(n,r-1)),r}function Tf(t){let e=t;for(;e=e.parent;)if(Tl(e)&&Ol(t,e)===0)return e}function Tl({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Po(t){const e=Ot(ki),s=Ot(El),r=rt(()=>{const l=ys(t.to);return e.resolve(l)}),n=rt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=s.matched;if(!u||!d.length)return-1;const f=d.findIndex(ks.bind(null,u));if(f>-1)return f;const p=Io(l[c-2]);return c>1&&Io(u)===p&&d[d.length-1].path!==p?d.findIndex(ks.bind(null,l[c-2])):f}),i=rt(()=>n.value>-1&&Pf(s.params,r.value.params)),o=rt(()=>n.value>-1&&n.value===s.matched.length-1&&yl(s.params,r.value.params));function a(l={}){if(Cf(l)){const c=e[ys(t.replace)?"replace":"push"](ys(t.to)).catch(Ws);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:rt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function kf(t){return t.length===1?t[0]:t}const Af=Ua({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Po,setup(t,{slots:e}){const s=Xr(Po(t)),{options:r}=Ot(ki),n=rt(()=>({[xo(t.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[xo(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&kf(e.default(s));return t.custom?i:ul("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),Rf=Af;function Cf(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Pf(t,e){for(const s in e){const r=e[s],n=t[s];if(typeof r=="string"){if(r!==n)return!1}else if(!ot(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function Io(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const xo=(t,e,s)=>t??e??s,If=Ua({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const r=Ot(Wn),n=rt(()=>t.route||r.value),i=Ot(So,0),o=rt(()=>{let c=ys(i);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=rt(()=>n.value.matched[o.value]);Er(So,rt(()=>o.value+1)),Er(of,a),Er(Wn,n);const l=du();return Sr(()=>[l.value,a.value,t.name],([c,u,d],[f,p,v])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!ks(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=n.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return jo(s.default,{Component:f,route:c});const p=d.props[u],v=p?p===!0?c.params:typeof p=="function"?p(c):p:null,w=ul(f,te({},v,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return jo(s.default,{Component:w,route:c})||w}}});function jo(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const xf=If;function jf(t){const e=bf(t.routes,t),s=t.parseQuery||rf,r=t.stringifyQuery||Eo,n=t.history,i=Ds(),o=Ds(),a=Ds(),l=hu(Pt);let c=Pt;fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=yn.bind(null,O=>""+O),d=yn.bind(null,Mh),f=yn.bind(null,tr);function p(O,D){let j,F;return wl(O)?(j=e.getRecordMatcher(O),F=D):F=O,e.addRoute(F,j)}function v(O){const D=e.getRecordMatcher(O);D&&e.removeRoute(D)}function y(){return e.getRoutes().map(O=>O.record)}function w(O){return!!e.getRecordMatcher(O)}function T(O,D){if(D=te({},D||l.value),typeof O=="string"){const _=wn(s,O,D.path),m=e.resolve({path:_.path},D),A=n.createHref(_.fullPath);return te(_,m,{params:f(m.params),hash:tr(_.hash),redirectedFrom:void 0,href:A})}let j;if(O.path!=null)j=te({},O,{path:wn(s,O.path,D.path).path});else{const _=te({},O.params);for(const m in _)_[m]==null&&delete _[m];j=te({},O,{params:d(_)}),D.params=d(D.params)}const F=e.resolve(j,D),Y=O.hash||"";F.params=u(f(F.params));const he=qh(r,te({},O,{hash:Uh(Y),path:F.path})),g=n.createHref(he);return te({fullPath:he,hash:Y,query:r===Eo?nf(O.query):O.query||{}},F,{redirectedFrom:void 0,href:g})}function S(O){return typeof O=="string"?wn(s,O,l.value.path):te({},O)}function b(O,D){if(c!==O)return As(ge.NAVIGATION_CANCELLED,{from:D,to:O})}function k(O){return J(O)}function q(O){return k(te(S(O),{replace:!0}))}function z(O,D){const j=O.matched[O.matched.length-1];if(j&&j.redirect){const{redirect:F}=j;let Y=typeof F=="function"?F(O,D):F;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=S(Y):{path:Y},Y.params={}),te({query:O.query,hash:O.hash,params:Y.path!=null?{}:O.params},Y)}}function J(O,D){const j=c=T(O),F=l.value,Y=O.state,he=O.force,g=O.replace===!0,_=z(j,F);if(_)return J(te(S(_),{state:typeof _=="object"?te({},Y,_.state):Y,force:he,replace:g}),D||j);const m=j;m.redirectedFrom=D;let A;return!he&&Hh(r,F,j)&&(A=As(ge.NAVIGATION_DUPLICATED,{to:m,from:F}),ct(F,F,!0,!1)),(A?Promise.resolve(A):at(m,F)).catch(E=>yt(E)?yt(E,ge.NAVIGATION_GUARD_REDIRECT)?E:Ct(E):ee(E,m,F)).then(E=>{if(E){if(yt(E,ge.NAVIGATION_GUARD_REDIRECT))return J(te({replace:g},S(E.to),{state:typeof E.to=="object"?te({},Y,E.to.state):Y,force:he}),D||m)}else E=Ft(m,F,!0,g,Y);return Rt(m,F,E),E})}function me(O,D){const j=b(O,D);return j?Promise.reject(j):Promise.resolve()}function be(O){const D=is.values().next().value;return D&&typeof D.runWithContext=="function"?D.runWithContext(O):O()}function at(O,D){let j;const[F,Y,he]=af(O,D);j=En(F.reverse(),"beforeRouteLeave",O,D);for(const _ of F)_.leaveGuards.forEach(m=>{j.push(Nt(m,O,D))});const g=me.bind(null,O,D);return j.push(g),ze(j).then(()=>{j=[];for(const _ of i.list())j.push(Nt(_,O,D));return j.push(g),ze(j)}).then(()=>{j=En(Y,"beforeRouteUpdate",O,D);for(const _ of Y)_.updateGuards.forEach(m=>{j.push(Nt(m,O,D))});return j.push(g),ze(j)}).then(()=>{j=[];for(const _ of he)if(_.beforeEnter)if(ot(_.beforeEnter))for(const m of _.beforeEnter)j.push(Nt(m,O,D));else j.push(Nt(_.beforeEnter,O,D));return j.push(g),ze(j)}).then(()=>(O.matched.forEach(_=>_.enterCallbacks={}),j=En(he,"beforeRouteEnter",O,D,be),j.push(g),ze(j))).then(()=>{j=[];for(const _ of o.list())j.push(Nt(_,O,D));return j.push(g),ze(j)}).catch(_=>yt(_,ge.NAVIGATION_CANCELLED)?_:Promise.reject(_))}function Rt(O,D,j){a.list().forEach(F=>be(()=>F(O,D,j)))}function Ft(O,D,j,F,Y){const he=b(O,D);if(he)return he;const g=D===Pt,_=fs?history.state:{};j&&(F||g?n.replace(O.fullPath,te({scroll:g&&_&&_.scroll},Y)):n.push(O.fullPath,Y)),l.value=O,ct(O,D,j,g),Ct()}let lt;function xs(){lt||(lt=n.listen((O,D,j)=>{if(!qt.listening)return;const F=T(O),Y=z(F,qt.currentRoute.value);if(Y){J(te(Y,{replace:!0,force:!0}),F).catch(Ws);return}c=F;const he=l.value;fs&&Xh(bo(he.fullPath,j.delta),on()),at(F,he).catch(g=>yt(g,ge.NAVIGATION_ABORTED|ge.NAVIGATION_CANCELLED)?g:yt(g,ge.NAVIGATION_GUARD_REDIRECT)?(J(te(S(g.to),{force:!0}),F).then(_=>{yt(_,ge.NAVIGATION_ABORTED|ge.NAVIGATION_DUPLICATED)&&!j.delta&&j.type===Hn.pop&&n.go(-1,!1)}).catch(Ws),Promise.reject()):(j.delta&&n.go(-j.delta,!1),ee(g,F,he))).then(g=>{g=g||Ft(F,he,!1),g&&(j.delta&&!yt(g,ge.NAVIGATION_CANCELLED)?n.go(-j.delta,!1):j.type===Hn.pop&&yt(g,ge.NAVIGATION_ABORTED|ge.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Rt(F,he,g)}).catch(Ws)}))}let rs=Ds(),Ee=Ds(),ie;function ee(O,D,j){Ct(O);const F=Ee.list();return F.length?F.forEach(Y=>Y(O,D,j)):console.error(O),Promise.reject(O)}function vt(){return ie&&l.value!==Pt?Promise.resolve():new Promise((O,D)=>{rs.add([O,D])})}function Ct(O){return ie||(ie=!O,xs(),rs.list().forEach(([D,j])=>O?j(O):D()),rs.reset()),O}function ct(O,D,j,F){const{scrollBehavior:Y}=t;if(!fs||!Y)return Promise.resolve();const he=!j&&Zh(bo(O.fullPath,0))||(F||!j)&&history.state&&history.state.scroll||null;return vi().then(()=>Y(O,D,he)).then(g=>g&&Yh(g)).catch(g=>ee(g,O,D))}const Ue=O=>n.go(O);let ns;const is=new Set,qt={currentRoute:l,listening:!0,addRoute:p,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:y,resolve:T,options:t,push:k,replace:q,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ee.add,isReady:vt,install(O){O.component("RouterLink",Rf),O.component("RouterView",xf),O.config.globalProperties.$router=qt,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ys(l)}),fs&&!ns&&l.value===Pt&&(ns=!0,k(n.location).catch(F=>{}));const D={};for(const F in Pt)Object.defineProperty(D,F,{get:()=>l.value[F],enumerable:!0});O.provide(ki,qt),O.provide(El,Ca(D)),O.provide(Wn,l);const j=O.unmount;is.add(O),O.unmount=function(){is.delete(O),is.size<1&&(c=Pt,lt&&lt(),lt=null,l.value=Pt,ns=!1,ie=!1),j()}}};function ze(O){return O.reduce((D,j)=>D.then(()=>be(j)),Promise.resolve())}return qt}var Gn=function(t,e){return Gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])},Gn(t,e)};function kl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gn(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var Lr=function(){return Lr=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Lr.apply(this,arguments)};function Cs(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function Al(t,e,s,r){var n=arguments.length,i=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,s):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(n<3?o(i):n>3?o(e,s,i):o(e,s))||i);return n>3&&i&&Object.defineProperty(e,s,i),i}function Rl(t,e){return function(s,r){e(s,r,t)}}function Cl(t,e,s,r,n,i){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,f=!1,p=s.length-1;p>=0;p--){var v={};for(var y in r)v[y]=y==="access"?{}:r[y];for(var y in r.access)v.access[y]=r.access[y];v.addInitializer=function(T){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(T||null))};var w=(0,s[p])(a==="accessor"?{get:u.get,set:u.set}:u[l],v);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(u.get=d),(d=o(w.set))&&(u.set=d),(d=o(w.init))&&n.unshift(d)}else(d=o(w))&&(a==="field"?n.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),f=!0}function Pl(t,e,s){for(var r=arguments.length>2,n=0;n<e.length;n++)s=r?e[n].call(t,s):e[n].call(t);return r?s:void 0}function Il(t){return typeof t=="symbol"?t:"".concat(t)}function xl(t,e,s){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}function jl(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function B(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Nl(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(u){c=[6,u],n=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var an=Object.create?function(t,e,s,r){r===void 0&&(r=s);var n=Object.getOwnPropertyDescriptor(e,s);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,r,n)}:function(t,e,s,r){r===void 0&&(r=s),t[r]=e[s]};function $l(t,e){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s)&&an(e,t,s)}function Br(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],r=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var r=s.call(t),n,i=[],o;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}}return i}function Dl(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ai(arguments[e]));return t}function Ul(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<s;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,n++)r[n]=i[o];return r}function Ll(t,e,s){if(s||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Rs(t){return this instanceof Rs?(this.v=t,this):new Rs(t)}function Bl(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(t,e||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),n[Symbol.asyncIterator]=function(){return this},n;function o(p){return function(v){return Promise.resolve(v).then(p,d)}}function a(p,v){r[p]&&(n[p]=function(y){return new Promise(function(w,T){i.push([p,y,w,T])>1||l(p,y)})},v&&(n[p]=v(n[p])))}function l(p,v){try{c(r[p](v))}catch(y){f(i[0][3],y)}}function c(p){p.value instanceof Rs?Promise.resolve(p.value.v).then(u,d):f(i[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function f(p,v){p(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Ml(t){var e,s;return e={},r("next"),r("throw",function(n){throw n}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(n,i){e[n]=t[n]?function(o){return(s=!s)?{value:Rs(t[n](o)),done:!1}:i?i(o):o}:i}}function Vl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof Br=="function"?Br(t):t[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(i){s[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),n(a,l,o.done,o.value)})}}function n(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function Fl(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Nf=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},zn=function(t){return zn=Object.getOwnPropertyNames||function(e){var s=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[s.length]=r);return s},zn(t)};function ql(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s=zn(t),r=0;r<s.length;r++)s[r]!=="default"&&an(e,t,s[r]);return Nf(e,t),e}function Hl(t){return t&&t.__esModule?t:{default:t}}function Kl(t,e,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(t):r?r.value:e.get(t)}function Wl(t,e,s,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,s):n?n.value=s:e.set(t,s),s}function Gl(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function zl(t,e,s){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],s&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:s})}else s&&t.stack.push({async:!0});return e}var $f=typeof SuppressedError=="function"?SuppressedError:function(t,e,s){var r=new Error(s);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Jl(t){function e(i){t.error=t.hasError?new $f(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var s,r=0;function n(){for(;s=t.stack.pop();)try{if(!s.async&&r===1)return r=0,t.stack.push(s),Promise.resolve().then(n);if(s.dispose){var i=s.dispose.call(s.value);if(s.async)return r|=2,Promise.resolve(i).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function Ql(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,r,n,i,o){return r?e?".jsx":".js":n&&(!i||!o)?s:n+i+"."+o.toLowerCase()+"js"}):t}const Df={__extends:kl,__assign:Lr,__rest:Cs,__decorate:Al,__param:Rl,__esDecorate:Cl,__runInitializers:Pl,__propKey:Il,__setFunctionName:xl,__metadata:jl,__awaiter:B,__generator:Nl,__createBinding:an,__exportStar:$l,__values:Br,__read:Ai,__spread:Dl,__spreadArrays:Ul,__spreadArray:Ll,__await:Rs,__asyncGenerator:Bl,__asyncDelegator:Ml,__asyncValues:Vl,__makeTemplateObject:Fl,__importStar:ql,__importDefault:Hl,__classPrivateFieldGet:Kl,__classPrivateFieldSet:Wl,__classPrivateFieldIn:Gl,__addDisposableResource:zl,__disposeResources:Jl,__rewriteRelativeImportExtension:Ql},Uf=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:zl,get __assign(){return Lr},__asyncDelegator:Ml,__asyncGenerator:Bl,__asyncValues:Vl,__await:Rs,__awaiter:B,__classPrivateFieldGet:Kl,__classPrivateFieldIn:Gl,__classPrivateFieldSet:Wl,__createBinding:an,__decorate:Al,__disposeResources:Jl,__esDecorate:Cl,__exportStar:$l,__extends:kl,__generator:Nl,__importDefault:Hl,__importStar:ql,__makeTemplateObject:Fl,__metadata:jl,__param:Rl,__propKey:Il,__read:Ai,__rest:Cs,__rewriteRelativeImportExtension:Ql,__runInitializers:Pl,__setFunctionName:xl,__spread:Dl,__spreadArray:Ll,__spreadArrays:Ul,__values:Br,default:Df},Symbol.toStringTag,{value:"Module"})),Lf=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Ri extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Bf extends Ri{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class No extends Ri{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $o extends Ri{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jn||(Jn={}));class Mf{constructor(e,{headers:s={},customFetch:r,region:n=Jn.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Lf(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return B(this,arguments,void 0,function*(s,r={}){var n;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const v=new URL(`${this.url}/${s}`);p&&p!=="any"&&(f["x-region"]=p,v.searchParams.set("forceFunctionRegion",p));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let w=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(w=o.signal,u.addEventListener("abort",()=>o.abort())):w=o.signal);const T=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:w}).catch(q=>{throw new Bf(q)}),S=T.headers.get("x-relay-error");if(S&&S==="true")throw new No(T);if(!T.ok)throw new $o(T);let b=((n=T.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield T.json():b==="application/octet-stream"||b==="application/pdf"?k=yield T.blob():b==="text/event-stream"?k=T:b==="multipart/form-data"?k=yield T.formData():k=yield T.text(),{data:k,error:null,response:T}}catch(a){return{data:null,error:a,response:a instanceof $o||a instanceof No?a.context:void 0}}finally{i&&clearTimeout(i)}})}}function Vf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var $e={};const Ps=Vf(Uf);var hr={},fr={},pr={},gr={},_r={},vr={},Do;function Yl(){if(Do)return vr;Do=1,Object.defineProperty(vr,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return vr.default=t,vr}var Uo;function Xl(){if(Uo)return _r;Uo=1,Object.defineProperty(_r,"__esModule",{value:!0});const e=Ps.__importDefault(Yl());class s{constructor(n){var i,o;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(i=n.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=n.signal,this.isMaybeSingle=(o=n.isMaybeSingle)!==null&&o!==void 0?o:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,i){return this.headers=new Headers(this.headers),this.headers.set(n,i),this}then(n,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,d,f;let p=null,v=null,y=null,w=l.status,T=l.statusText;if(l.ok){if(this.method!=="HEAD"){const q=await l.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=q:v=JSON.parse(q))}const b=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),k=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");b&&k&&k.length>1&&(y=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(p={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,T="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const b=await l.text();try{p=JSON.parse(b),Array.isArray(p)&&l.status===404&&(v=[],p=null,w=200,T="OK")}catch{l.status===404&&b===""?(w=204,T="No Content"):p={message:b}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,w=200,T="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:v,count:y,status:w,statusText:T}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,d;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(n,i)}returns(){return this}overrideTypes(){return this}}return _r.default=s,_r}var Lo;function Zl(){if(Lo)return gr;Lo=1,Object.defineProperty(gr,"__esModule",{value:!0});const e=Ps.__importDefault(Xl());class s extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(c,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[n?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return gr.default=s,gr}var Bo;function Ci(){if(Bo)return pr;Bo=1,Object.defineProperty(pr,"__esModule",{value:!0});const e=Ps.__importDefault(Zl()),s=new RegExp("[,()]");class r extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&s.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return pr.default=r,pr}var Mo;function ec(){if(Mo)return fr;Mo=1,Object.defineProperty(fr,"__esModule",{value:!0});const e=Ps.__importDefault(Ci());class s{constructor(n,{headers:i={},schema:o,fetch:a}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(n,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(n??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(n,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return fr.default=s,fr}var Vo;function Ff(){if(Vo)return hr;Vo=1,Object.defineProperty(hr,"__esModule",{value:!0});const t=Ps,e=t.__importDefault(ec()),s=t.__importDefault(Ci());class r{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${i}`);let p;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{f.searchParams.append(y,w)})):(d="POST",p=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new s.default({method:d,url:f,headers:v,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return hr.default=r,hr}Object.defineProperty($e,"__esModule",{value:!0});var tc=$e.PostgrestError=dc=$e.PostgrestBuilder=cc=$e.PostgrestTransformBuilder=ac=$e.PostgrestFilterBuilder=ic=$e.PostgrestQueryBuilder=rc=$e.PostgrestClient=void 0;const Is=Ps,sc=Is.__importDefault(Ff());var rc=$e.PostgrestClient=sc.default;const nc=Is.__importDefault(ec());var ic=$e.PostgrestQueryBuilder=nc.default;const oc=Is.__importDefault(Ci());var ac=$e.PostgrestFilterBuilder=oc.default;const lc=Is.__importDefault(Zl());var cc=$e.PostgrestTransformBuilder=lc.default;const uc=Is.__importDefault(Xl());var dc=$e.PostgrestBuilder=uc.default;const hc=Is.__importDefault(Yl());tc=$e.PostgrestError=hc.default;var fc=$e.default={PostgrestClient:sc.default,PostgrestQueryBuilder:nc.default,PostgrestFilterBuilder:oc.default,PostgrestTransformBuilder:lc.default,PostgrestBuilder:uc.default,PostgrestError:hc.default};const qf=Ic({__proto__:null,get PostgrestBuilder(){return dc},get PostgrestClient(){return rc},get PostgrestError(){return tc},get PostgrestFilterBuilder(){return ac},get PostgrestQueryBuilder(){return ic},get PostgrestTransformBuilder(){return cc},default:fc},[$e]),{PostgrestClient:Hf,PostgrestQueryBuilder:ky,PostgrestFilterBuilder:Ay,PostgrestTransformBuilder:Ry,PostgrestBuilder:Cy,PostgrestError:Py}=fc||qf;class Kf{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Wf="2.81.1",Gf=`realtime-js/${Wf}`,pc="1.0.0",zf="2.0.0",Fo=pc,Qn=1e4,Jf=1e3,Qf=100;var Yt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yt||(Yt={}));var we;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(we||(we={}));var Je;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Je||(Je={}));var Yn;(function(t){t.websocket="websocket"})(Yn||(Yn={}));var Xt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Xt||(Xt={}));class Yf{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,s){if(this._isArrayBuffer(e.payload))return s(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:s,ref:r,event:n,topic:i,payload:o}=e,a=this.META_LENGTH+s.length+r.length+i.length+n.length,l=new ArrayBuffer(this.HEADER_LENGTH+a);let c=new DataView(l),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,s.length),c.setUint8(u++,r.length),c.setUint8(u++,i.length),c.setUint8(u++,n.length),Array.from(s,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(r,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(i,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(n,f=>c.setUint8(u++,f.charCodeAt(0)));var d=new Uint8Array(l.byteLength+o.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(o),l.byteLength),d.buffer}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const{join_ref:n,ref:i,topic:o}=e,a=e.payload.event,l=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(u),f=0;d.setUint8(f++,this.KINDS.userBroadcastPush),d.setUint8(f++,n.length),d.setUint8(f++,i.length),d.setUint8(f++,o.length),d.setUint8(f++,a.length),d.setUint8(f++,this.BINARY_ENCODING),Array.from(n,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(i,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(o,v=>d.setUint8(f++,v.charCodeAt(0))),Array.from(a,v=>d.setUint8(f++,v.charCodeAt(0)));var p=new Uint8Array(u.byteLength+l.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(l),u.byteLength),p.buffer}_encodeJsonUserBroadcastPush(e){var s,r;const{join_ref:n,ref:i,topic:o}=e,a=e.payload.event,l=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+a.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(f),v=0;p.setUint8(v++,this.KINDS.userBroadcastPush),p.setUint8(v++,n.length),p.setUint8(v++,i.length),p.setUint8(v++,o.length),p.setUint8(v++,a.length),p.setUint8(v++,this.JSON_ENCODING),Array.from(n,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(i,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(o,w=>p.setUint8(v++,w.charCodeAt(0))),Array.from(a,w=>p.setUint8(v++,w.charCodeAt(0)));var y=new Uint8Array(f.byteLength+u.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(u),f.byteLength),y.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[n,i,o,a,l]=r;return s({join_ref:n,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),n=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,s,n);case this.KINDS.reply:return this._decodeReply(e,s,n);case this.KINDS.broadcast:return this._decodeBroadcast(e,s,n);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,n)}}_decodePush(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(e.slice(a,a+n));a=a+n;const c=r.decode(e.slice(a,a+i));a=a+i;const u=r.decode(e.slice(a,a+o));a=a+o;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:d}}_decodeReply(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=r.decode(e.slice(l,l+n));l=l+n;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=r.decode(e.slice(l,l+a));l=l+a;const p=JSON.parse(r.decode(e.slice(l,e.byteLength))),v={status:f,response:p};return{join_ref:c,ref:u,topic:d,event:Je.reply,payload:v}}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+n));l=l+n;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,v={type:this.BROADCAST,event:u,payload:p};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:v}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}}class gc{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ue;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ue||(ue={}));const qo=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=Xf(o,t,e,n),i),{}):{}},Xf=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?_c(i,o):Xn(o)},_c=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return sp(e,s)}switch(t){case ue.bool:return Zf(e);case ue.float4:case ue.float8:case ue.int2:case ue.int4:case ue.int8:case ue.numeric:case ue.oid:return ep(e);case ue.json:case ue.jsonb:return tp(e);case ue.timestamp:return rp(e);case ue.abstime:case ue.date:case ue.daterange:case ue.int4range:case ue.int8range:case ue.money:case ue.reltime:case ue.text:case ue.time:case ue.timestamptz:case ue.timetz:case ue.tsrange:case ue.tstzrange:return Xn(e);default:return Xn(e)}},Xn=t=>t,Zf=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ep=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},tp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},sp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>_c(e,a))}return t},rp=t=>typeof t=="string"?t.replace(" ","T"):t,vc=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Sn{constructor(e,s,r={},n=Qn){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ho;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ho||(Ho={}));class Gs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Gs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Gs.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),v=u.filter(w=>p.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);v.length>0&&(a[c]=v),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ko;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ko||(Ko={}));var zs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zs||(zs={}));var bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bt||(bt={}));class Pi{constructor(e,s={config:{}},r){var n,i;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Sn(this,Je.join,this.params,this.timeout),this.rejoinTimer=new gc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Gs(this),this.broadcastEndpointURL=vc(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==we.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[zs.PRESENCE]&&this.bindings[zs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(bt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(bt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var v;if(this.socket.setAuth(),p===void 0){e==null||e(bt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,T=[];for(let S=0;S<w;S++){const b=y[S],{filter:{event:k,schema:q,table:z,filter:J}}=b,me=p&&p[S];if(me&&me.event===k&&me.schema===q&&me.table===z&&me.filter===J)T.push(Object.assign(Object.assign({},b),{id:me.id}));else{this.unsubscribe(),this.state=we.errored,e==null||e(bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(bt.SUBSCRIBED);return}}).receive("error",p=>{this.state=we.errored,e==null||e(bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===we.joined&&e===zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=we.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Sn(this,Je.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=we.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Sn(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Qf){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Je;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var v,y,w;return((v=p.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var v,y,w,T,S,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,q=(v=p.filter)===null||v===void 0?void 0:v.event;return k&&((y=s.ids)===null||y===void 0?void 0:y.includes(k))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const k=(S=(T=p==null?void 0:p.filter)===null||T===void 0?void 0:T.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return k==="*"||k===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:w,commit_timestamp:T,type:S,errors:b}=v;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:T,eventType:S,new:{},old:{},errors:b}),this._getPayloadRecords(v))}p.callback(f,r)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Pi.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Je.close,{},e)}_onError(e){this._on(Je.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=qo(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=qo(e.columns,e.old_record)),s}}const On=()=>{},mr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},np=[1e3,2e3,5e3,1e4],ip=1e4,op=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ap{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qn,this.transport=null,this.heartbeatIntervalMs=mr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=On,this.ref=0,this.reconnectTimer=null,this.vsn=Fo,this.logger=On,this.conn=null,this.sendBuffer=[],this.serializer=new Yf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Yn.websocket}`,this.httpEndpoint=vc(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Kf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yt.connecting:return Xt.Connecting;case Yt.open:return Xt.Open;case Yt.closing:return Xt.Closing;default:return Xt.Closed}}isConnected(){return this.connectionState()===Xt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Pi(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Jf,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},mr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yt.open||this.conn.readyState===Yt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Je.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([op],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const n={access_token:s,version:Gf};s&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Je.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new gc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,i,o,a,l,c,u,d,f,p;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Qn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:mr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:On,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Fo,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>np[v-1]||ip,this.vsn){case pc:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(v,y)=>y(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,y)=>y(JSON.parse(v));break;case zf:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ii extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class lp extends Ii{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zn extends Ii{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}const xi=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cp=()=>Response,ei=t=>{if(Array.isArray(t))return t.map(s=>ei(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=ei(r)}),e},up=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Tn=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},dp=(t,e,s)=>B(void 0,void 0,void 0,function*(){const r=yield cp();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{const i=t.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new lp(Tn(n),i,o))}).catch(n=>{e(new Zn(Tn(n),n))}):e(new Zn(Tn(t),t))}),hp=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(up(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),s))};function lr(t,e,s,r,n,i){return B(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,hp(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>dp(l,a,r))})})}function sr(t,e,s,r){return B(this,void 0,void 0,function*(){return lr(t,"GET",e,s,r)})}function st(t,e,s,r,n){return B(this,void 0,void 0,function*(){return lr(t,"POST",e,r,n,s)})}function ti(t,e,s,r,n){return B(this,void 0,void 0,function*(){return lr(t,"PUT",e,r,n,s)})}function fp(t,e,s,r){return B(this,void 0,void 0,function*(){return lr(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function ji(t,e,s,r,n){return B(this,void 0,void 0,function*(){return lr(t,"DELETE",e,r,n,s)})}class pp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return B(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}var mc;class gp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[mc]="BlobDownloadBuilder",this.promise=null}asStream(){return new pp(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return B(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}mc=Symbol.toStringTag;const _p=gp,vp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Wo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class mp{constructor(e,s={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=r,this.fetch=xi(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,r,n){return B(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Wo),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(e=="PUT"?ti:st)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pe(i))return{data:null,error:i};throw i}})}upload(e,s,r){return B(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return B(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Wo.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield ti(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return B(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield st(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ii("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}update(e,s,r){return B(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return B(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}copy(e,s,r){return B(this,void 0,void 0,function*(){try{return{data:{path:(yield st(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return B(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield st(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return B(this,void 0,void 0,function*(){try{const n=yield st(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}download(e,s){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>sr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new _p(l,this.shouldThrowOnError)}info(e){return B(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield sr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ei(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}exists(e){return B(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield fp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r)&&r instanceof Zn){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return B(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}list(e,s,r){return B(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},vp),s),{prefix:e||""});return{data:yield st(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}listV2(e,s){return B(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield st(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const yc="2.81.1",wc={"X-Client-Info":`storage-js/${yc}`};class yp{constructor(e,s={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wc),s),this.fetch=xi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return B(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(e);return{data:yield sr(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}getBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}createBucket(e){return B(this,arguments,void 0,function*(s,r={public:!1}){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return B(this,void 0,void 0,function*(){try{return{data:yield ti(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class wp{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wc),s),this.fetch=xi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield st(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}listBuckets(e){return B(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&s.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&s.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&s.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&s.set("sortOrder",e.sortOrder),e!=null&&e.search&&s.set("search",e.search);const r=s.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield sr(this.fetch,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield ji(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}}const Ni={"X-Client-Info":`storage-js/${yc}`,"Content-Type":"application/json"};class bc extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function He(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class kn extends bc{constructor(e,s,r){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bp extends bc{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}}var Go;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Go||(Go={}));const $i=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ep=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},zo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Sp=(t,e,s)=>B(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(s!=null&&s.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||n+"";e(new kn(zo(o),n,a))}).catch(()=>{const o=n+"",a=i.statusText||`HTTP ${n} error`;e(new kn(a,n,o))});else{const o=n+"",a=i.statusText||`HTTP ${n} error`;e(new kn(a,n,o))}}else e(new bp(zo(t),t))}),Op=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(Ep(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,Object.assign(Object.assign({},n),s))};function Tp(t,e,s,r,n,i){return B(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,Op(e,r,n,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Sp(l,a,r))})})}function Ke(t,e,s,r,n){return B(this,void 0,void 0,function*(){return Tp(t,"POST",e,r,n,s)})}class kp{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ni),s),this.fetch=$i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return B(this,void 0,void 0,function*(){try{return{data:(yield Ke(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}getIndex(e,s){return B(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}listIndexes(e){return B(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}deleteIndex(e,s){return B(this,void 0,void 0,function*(){try{return{data:(yield Ke(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(He(r))return{data:null,error:r};throw r}})}}class Ap{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ni),s),this.fetch=$i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return B(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ke(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}getVectors(e){return B(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}listVectors(e){return B(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ke(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}queryVectors(e){return B(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}deleteVectors(e){return B(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ke(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}}class Rp{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ni),s),this.fetch=$i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return B(this,void 0,void 0,function*(){try{return{data:(yield Ke(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}getBucket(e){return B(this,void 0,void 0,function*(){try{return{data:yield Ke(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}listBuckets(){return B(this,arguments,void 0,function*(e={}){try{return{data:yield Ke(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}deleteBucket(e){return B(this,void 0,void 0,function*(){try{return{data:(yield Ke(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(He(s))return{data:null,error:s};throw s}})}}class Cp extends Rp{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new Pp(this.url,this.headers,e,this.fetch)}}class Pp extends kp{constructor(e,s,r,n){super(e,s,n),this.vectorBucketName=r}createIndex(e){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return B(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return B(this,arguments,void 0,function*(s={}){return e.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return B(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return B(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Ip(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Ip extends Ap{constructor(e,s,r,n,i){super(e,s,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return B(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return B(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return B(this,arguments,void 0,function*(s={}){return e.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return B(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return B(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class xp extends yp{constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new mp(this.url,this.headers,e,this.fetch)}get vectors(){return new Cp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wp(this.url+"/iceberg",this.headers,this.fetch)}}const jp="2.81.1";let Ls="";typeof Deno<"u"?Ls="deno":typeof document<"u"?Ls="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ls="react-native":Ls="node";const Np={"X-Client-Info":`supabase-js-${Ls}/${jp}`},$p={headers:Np},Dp={schema:"public"},Up={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Lp={},Bp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Mp=()=>Headers,Vp=(t,e,s)=>{const r=Bp(s),n=Mp();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))}};function Fp(t){return t.endsWith("/")?t:t+"/"}function qp(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Hp(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fp(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Ec="2.81.1",ps=30*1e3,si=3,An=si*ps,Kp="http://localhost:9999",Wp="supabase.auth.token",Gp={"X-Client-Info":`gotrue-js/${Ec}`},ri="X-Supabase-Api-Version",Sc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},zp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jp=10*60*1e3;class rr extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function M(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Qp extends rr{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Yp(t){return M(t)&&t.name==="AuthApiError"}class Zt extends rr{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Vt extends rr{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class et extends Vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xp(t){return M(t)&&t.name==="AuthSessionMissingError"}class as extends Vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yr extends Vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wr extends Vt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zp(t){return M(t)&&t.name==="AuthImplicitGrantRedirectError"}class Jo extends Vt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ni extends Vt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Rn(t){return M(t)&&t.name==="AuthRetryableFetchError"}class Qo extends Vt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ii extends Vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yo=` 	
\r=`.split(""),eg=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Yo.length;e+=1)t[Yo[e].charCodeAt(0)]=-2;for(let e=0;e<Mr.length;e+=1)t[Mr[e].charCodeAt(0)]=e;return t})();function Xo(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Mr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Mr[r]),e.queuedBits-=6}}function Oc(t,e,s){const r=eg[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Zo(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{rg(o,r,s)};for(let o=0;o<t.length;o+=1)Oc(t.charCodeAt(o),n,i);return e.join("")}function tg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function sg(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}tg(r,e)}}function rg(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Os(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Oc(t.charCodeAt(n),s,r);return new Uint8Array(e)}function ng(t){const e=[];return sg(t,s=>e.push(s)),new Uint8Array(e)}function ts(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>Xo(n,s,r)),Xo(null,s,r),e.join("")}function ig(t){return Math.round(Date.now()/1e3)+t}function og(){return Symbol("auth-callback")}const Te=()=>typeof window<"u"&&typeof document<"u",Wt={tested:!1,writable:!1},Tc=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wt.tested)return Wt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wt.tested=!0,Wt.writable=!0}catch{Wt.tested=!0,Wt.writable=!1}return Wt.writable};function ag(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const kc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),lg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Gt=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},It=async(t,e)=>{await t.removeItem(e)};class ln{constructor(){this.promise=new ln.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}ln.promiseConstructor=Promise;function Cn(t){const e=t.split(".");if(e.length!==3)throw new ii("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!zp.test(e[r]))throw new ii("JWT not in base64url format");return{header:JSON.parse(Zo(e[0])),payload:JSON.parse(Zo(e[1])),signature:Os(e[2]),raw:{header:e[0],payload:e[1]}}}async function cg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ug(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function dg(t){return("0"+t.toString(16)).substr(-2)}function hg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,dg).join("")}async function fg(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function pg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await fg(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(t,e,s=!1){const r=hg();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await gs(t,`${e}-code-verifier`,n);const i=await pg(r);return[i,r===i?"plain":"s256"]}const gg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _g(t){const e=t.headers.get(ri);if(!e||!e.match(gg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cs(t){if(!yg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pn(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wg(t,e){return new Proxy(t,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,n)}})}function ea(t){return JSON.parse(JSON.stringify(t))}const Jt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bg=[502,503,504];async function ta(t){var e;if(!lg(t))throw new ni(Jt(t),0);if(bg.includes(t.status))throw new ni(Jt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Zt(Jt(i),i)}let r;const n=_g(t);if(n&&n.getTime()>=Sc["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Qo(Jt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new et}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Qo(Jt(s),t.status,s.weak_password.reasons);throw new Qp(Jt(s),t.status||500,r)}const Eg=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function K(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[ri]||(i[ri]=Sc["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Sg(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Sg(t,e,s,r,n,i){const o=Eg(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new ni(Jt(l),0)}if(a.ok||await ta(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ta(l)}}function tt(t){var e;let s=null;kg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ig(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function sa(t){const e=tt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $t(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Og(t){return{data:t,error:null}}function Tg(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=Cs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ra(t){return t}function kg(t){return t.access_token&&t.refresh_token&&t.expires_in}const In=["global","local","others"];class Ag{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=kc(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=In[0]){if(In.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${In.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(M(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:$t})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Cs(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Tg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(M(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$t})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ra});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(M(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){cs(e);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$t})}catch(s){if(M(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){cs(e);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:$t})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){cs(e);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:$t})}catch(r){if(M(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){cs(e.userId);try{const{data:s,error:r}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(M(s))return{data:null,error:s};throw s}}async _deleteFactor(e){cs(e.userId),cs(e.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ra});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(M(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(M(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await K(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(M(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await K(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(M(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await K(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(M(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(M(s))return{data:null,error:s};throw s}}}function na(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const us={debug:!!(globalThis&&Tc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ac extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Rg extends Ac{}async function Cg(t,e,s){us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Rg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Pg(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rc(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ig(t){return parseInt(t,16)}function xg(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function jg(t){var e;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Rc(t.address),v=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${p}

${y}`;let T=`URI: ${d}
Version: ${f}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(T+=`
Expiration Time: ${n.toISOString()}`),a&&(T+=`
Not Before: ${a.toISOString()}`),l&&(T+=`
Request ID: ${l}`),c){let S=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);S+=`
- ${b}`}T+=S}return`${w}
${T}`}class _e extends Error{constructor({message:e,code:s,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Vr extends _e{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function Ng({error:t,options:e}){var s,r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new _e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new _e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new _e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new _e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Cc(o)){if(i.rp.id!==o)return new _e({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function $g({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Cc(r)){if(s.rpId!==r)return new _e({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Dg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Ug=new Dg;function Lg(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:r}=t,n=Cs(t,["challenge","user","excludeCredentials"]),i=Os(e).buffer,o=Object.assign(Object.assign({},s),{id:Os(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Os(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Bg(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,r=Cs(t,["challenge","allowCredentials"]),n=Os(e).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Os(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Mg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:ts(new Uint8Array(t.response.attestationObject)),clientDataJSON:ts(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,r=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ts(new Uint8Array(n.authenticatorData)),clientDataJSON:ts(new Uint8Array(n.clientDataJSON)),signature:ts(new Uint8Array(n.signature)),userHandle:n.userHandle?ts(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Cc(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ia(){var t,e;return!!(Te()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Fg(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vr("Browser returned unexpected credential type",e)}:{data:null,error:new Vr("Empty credential response",e)}}catch(e){return{data:null,error:Ng({error:e,options:t})}}}async function qg(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vr("Browser returned unexpected credential type",e)}:{data:null,error:new Vr("Empty credential response",e)}}catch(e){return{data:null,error:$g({error:e,options:t})}}}const Hg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Kg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Fr(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of t)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(s(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=Fr(a,o):r[i]=Fr(o)}else r[i]=o}return r}function Wg(t,e){return Fr(Hg,t,e||{})}function Gg(t,e){return Fr(Kg,t,e||{})}class zg{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:n},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!o)return{data:null,error:a};const l=n??Ug.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Wg(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await Fg({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=Gg(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await qg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn authentication")};try{if(!ia())return{data:null,error:new Zt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn registration")};try{if(!ia())return{data:null,error:new Zt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return M(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in register",o)}}}}Pg();const Jg={url:Kp,storageKey:Wp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function oa(t,e,s){return await s()}const ds={};class nr{get jwks(){var e,s;return(s=(e=ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Jg),e);if(this.storageKey=i.storageKey,this.instanceID=(s=nr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,nr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Te()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ag({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=kc(i.fetch),this.lock=i.lock||oa,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Te()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Cg:this.lock=oa,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new zg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Tc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=na(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=na(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ec}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(Te()&&(s=ag(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Te()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Zp(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return M(s)?this._returnResult({error:s}):this._returnResult({error:new Zt("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:tt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await ls(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:v},xform:tt})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:tt})}else throw new yr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:sa})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:sa})}else throw new yr("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new as;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,n,i,o,a,l,c,u,d,f;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:T,options:S}=e;let b;if(Te())if(typeof w=="object")b=w;else{const be=window;if("ethereum"in be&&typeof be.ethereum=="object"&&"request"in be.ethereum&&typeof be.ethereum.request=="function")b=be.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const k=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href),q=await b.request({method:"eth_requestAccounts"}).then(be=>be).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Rc(q[0]);let J=(r=S==null?void 0:S.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!J){const be=await b.request({method:"eth_chainId"});J=Ig(be)}const me={domain:k.host,address:z,statement:T,uri:k.href,version:"1",chainId:J,nonce:(n=S==null?void 0:S.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=S==null?void 0:S.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=jg(me),v=await b.request({method:"personal_sign",params:[xg(p),z]})}try{const{data:y,error:w}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:tt});if(w)throw w;if(!y||!y.session||!y.user){const T=new as;return this._returnResult({data:{user:null,session:null},error:T})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(M(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var s,r,n,i,o,a,l,c,u,d,f,p;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:w,wallet:T,statement:S,options:b}=e;let k;if(Te())if(typeof T=="object")k=T;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))k=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=T}const q=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const z=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),S?{statement:S}:null));let J;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")J=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)J=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)v=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),y=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${q.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(n=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const z=await k.signMessage(new TextEncoder().encode(v),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=z}}try{const{data:w,error:T}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:ts(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:tt});if(T)throw T;if(!w||!w.session||!w.user){const S=new as;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:T})}catch(w){if(M(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const s=await Gt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:tt});if(await It(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new as;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(M(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:tt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new as;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ls(this.storage,this.storageKey));const{error:d}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new yr("You must provide either an email or phone number.")}catch(a){if(M(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:tt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(M(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var s,r,n,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await ls(this.storage,this.storageKey));const c=await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:Og});return!((i=c.data)===null||i===void 0)&&i.url&&Te()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(M(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new et;const{error:n}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(M(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await K(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await K(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new yr("You must provide either an email or phone number and a type")}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<An:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Gt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Pn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=wg(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$t}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new et}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:$t})})}catch(s){if(M(s))return Xp(s)&&(await this._removeSession(),await It(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new et;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ls(this.storage,this.storageKey));const{data:c,error:u}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:$t});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(M(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new et;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=Cn(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(M(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new et;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(M(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Te())throw new wr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Jo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Jo("No code detected.");const{data:S,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new wr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const v=f-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const T={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(M(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({error:i});const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Yp(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await It(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=og(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await ls(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(M(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Te()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(M(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:tt}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new as}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(M(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await ug(async n=>(n>0&&await cg(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:tt})),(n,i)=>{const o=200*Math.pow(2,n);return i&&Rn(i)&&Date.now()+o-r<ps})}catch(r){if(this._debug(s,"error",r),M(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Te()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Gt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Gt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await gs(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Pn()}else if(n&&!n.user&&!n.user){const o=await Gt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await It(this.storage,this.storageKey+"-user"),await gs(this.storage,this.storageKey,n)):n.user=Pn()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<An;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${An}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Rn(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ln;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),M(i)){const o={data:null,error:i};return Rn(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await gs(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=ea(n);await gs(this.storage,this.storageKey,i)}else{const n=ea(s);await gs(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await It(this.storage,this.storageKey),await It(this.storage,this.storageKey+"-code-verifier"),await It(this.storage,this.storageKey+"-user"),this.userStorage&&await It(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ps}ms, refresh threshold is ${si} ticks`),n<=si&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ac)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ls(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await K(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Mg(e.webauthn.credential_response):Vg(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Lg(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Bg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Cn(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await K(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new et})})}catch(s){if(M(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new et});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new et});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(a=>a.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Jp>n)return r;const{data:i,error:o}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:p,error:v}=await this.getSession();if(v||!p.session)return this._returnResult({data:null,error:v});r=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=Cn(r);s!=null&&s.allowExpired||vg(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const u=mg(n.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,ng(`${a}.${l}`)))throw new ii("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(M(r))return this._returnResult({data:null,error:r});throw r}}}nr.nextInstanceID={};const Qg=nr;class Yg extends Qg{constructor(e){super(e)}}class Xg{constructor(e,s,r){var n,i,o;this.supabaseUrl=e,this.supabaseKey=s;const a=Hp(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Dp,realtime:Lp,auth:Object.assign(Object.assign({},Up),{storageKey:l}),global:$p},u=qp(r??{},c);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Vp(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Hf(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new xp(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Mf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,s;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yg({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ap(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Zg=(t,e,s)=>new Xg(t,e,s);function e_(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}e_()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const t_="https://hdayzxlqfggmiseanheq.supabase.co",s_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkYXl6eGxxZmdnbWlzZWFuaGVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc2ODIsImV4cCI6MjA3NzA4MzY4Mn0.eamwYnclJay6PMVj2S1UedZZQ3Wnbzvo7Oj0C5BbKcU",ke=Zg(t_,s_);class Me{static async getCarouselSlides(){try{console.log("Supabase...");const{data:e,error:s}=await ke.from("carousel_slides").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(s)throw console.error(":",s),s;return console.log(":",e),e||[]}catch(e){return console.error(":",e),[]}}static async getCategories(){try{const{data:e,error:s}=await ke.from("categories").select("*").order("sort_order",{ascending:!0});if(s)throw s;return e||[]}catch(e){return console.error(":",e),[]}}static async getCategoryDetail(e){try{const{data:s,error:r}=await ke.from("categories").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error(":",s),null}}static async getVideos(e={}){const{categoryId:s=null,page:r=1,pageSize:n=12,sortBy:i="created_at",sortOrder:o="desc",featured:a=!1}=e;try{let l=ke.from("videos").select("*",{count:"exact"});s&&(l=l.eq("category_id",s)),a&&(l=l.eq("is_featured",!0)),l=l.order(i,{ascending:o==="asc"});const c=(r-1)*n,u=c+n-1;l=l.range(c,u);const{data:d,error:f,count:p}=await l;if(f)throw f;return{videos:d||[],total:p||0,page:r,pageSize:n,totalPages:Math.ceil((p||0)/n)}}catch(l){return console.error(":",l),{videos:[],total:0,page:r,pageSize:n,totalPages:0}}}static async getVideoDetail(e){try{const{data:s,error:r}=await ke.from("video_details").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error(":",s),null}}static async searchVideos(e,s={}){const{page:r=1,pageSize:n=12}=s;try{const{data:i,error:o}=await ke.rpc("search_videos",{search_query:e});if(o)throw o;const a=(r-1)*n,l=a+n;return{videos:(i||[]).slice(a,l),total:(i||[]).length,page:r,pageSize:n,totalPages:Math.ceil((i||[]).length/n)}}catch(i){return console.error(":",i),{videos:[],total:0,page:r,pageSize:n,totalPages:0}}}static async incrementVideoViews(e){try{const{error:s}=await ke.rpc("increment_video_views",{video_id_param:e});if(s)throw s;return!0}catch(s){return console.error(":",s),!1}}static async recordSearchKeyword(e){if(e.trim())try{const{data:s}=await ke.from("search_keywords").select("id, search_count").eq("keyword",e).single();if(s){const{error:r}=await ke.from("search_keywords").update({search_count:s.search_count+1,last_searched:new Date().toISOString()}).eq("id",s.id);if(r)throw r}else{const{error:r}=await ke.from("search_keywords").insert([{keyword:e,search_count:1,last_searched:new Date().toISOString()}]);if(r)throw r}}catch(s){console.error(":",s)}}static async getPopularKeywords(e=10){try{const{data:s,error:r}=await ke.from("search_keywords").select("keyword, search_count").order("search_count",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getRecommendedVideos(e=6){try{const{data:s,error:r}=await ke.from("videos").select("*").order("views_count",{ascending:!1}).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getRecentEvents(e=6){try{console.log("Supabase...");const{data:s,error:r}=await ke.from("events").select("*").order("event_date",{ascending:!1}).order("sort_order",{ascending:!0}).limit(e);if(r)throw console.error(":",r),r;return console.log(":",s),s||[]}catch(s){return console.error(":",s),[]}}static async getRelatedVideosByTags(e,s=4){if(!e||e.length===0)return[];try{const{data:r,error:n}=await ke.from("videos").select("*").overlaps("tags",e).limit(s);if(n)throw n;return r||[]}catch(r){return console.error(":",r),[]}}}const r_={name:"Home",data(){return{recentEvents:[],featuredVideos:[],loading:!0,currentSlide:0,carouselInterval:null,carouselSlides:[],showModal:!1,selectedEvent:null}},async mounted(){await this.loadData(),this.startCarousel()},beforeUnmount(){this.stopCarousel()},methods:{async loadData(){try{const t=await Me.getCarouselSlides();console.log(":",t),t&&t.length>0?(this.carouselSlides=t.map(s=>({id:s.id,title:s.title,description:s.description,image:s.image_url})),console.log(":",this.carouselSlides)):(console.log(""),this.setDefaultData());const e=await Me.getRecentEvents();console.log(":",e),e&&e.length>0?(this.recentEvents=e.map(s=>({id:s.id,title:s.title,description:s.description,type:s.event_type,typeClass:this.getEventTypeClass(s.event_type),date:this.formatDate(s.event_date),location:s.location})),console.log(":",this.recentEvents)):(console.log(""),this.recentEvents=this.getDefaultEvents()),this.featuredVideos=await Me.getRecommendedVideos(3)}catch(t){console.error(":",t),console.log(""),this.setDefaultData()}finally{this.loading=!1}},setDefaultData(){this.carouselSlides=[{id:1,title:"",description:"",image:"https://images.unsplash.com/photo-1517330323742-98449c5d72f5?w=1200&h=600&fit=crop"},{id:2,title:"",description:"",image:"https://images.unsplash.com/photo-1516900448138-898720e93639?w=1200&h=600&fit=crop"},{id:3,title:"",description:"",image:"https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=1200&h=600&fit=crop"},{id:4,title:"",description:"",image:"https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=1200&h=600&fit=crop"}],this.recentEvents=this.getDefaultEvents()},getDefaultEvents(){return[{id:1,title:"2024",description:"",type:"",typeClass:"ticket",date:"2024-03-15",location:""},{id:2,title:"",description:"",type:"",typeClass:"gala",date:"2024-03-20",location:""},{id:3,title:"",description:"",type:"",typeClass:"competition",date:"2024-04-10",location:""}]},getEventTypeClass(t){return{:"ticket",:"gala",:"competition",:"performance"}[t]||"default"},formatDate(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},viewEventDetails(t){this.$router.push(`/events/${t}`)},goToVideo(t){this.$router.push(`/video/${t}`)},startCarousel(){this.carouselInterval=setInterval(()=>{this.nextSlide()},5e3)},stopCarousel(){this.carouselInterval&&(clearInterval(this.carouselInterval),this.carouselInterval=null)},nextSlide(){this.currentSlide=(this.currentSlide+1)%this.carouselSlides.length},prevSlide(){this.currentSlide=(this.currentSlide-1+this.carouselSlides.length)%this.carouselSlides.length},goToSlide(t){this.currentSlide=t},showEventModal(t){this.selectedEvent=t,this.showModal=!0,document.body.style.overflow="hidden"},closeModal(){this.showModal=!1,this.selectedEvent=null,document.body.style.overflow=""}}},n_={class:"home"},i_={class:"carousel-section"},o_={class:"carousel-container"},a_={class:"carousel"},l_={class:"slide-content"},c_={class:"slide-info"},u_={class:"slide-title"},d_={class:"slide-description"},h_={class:"carousel-indicators"},f_=["onClick"],p_={class:"events"},g_={class:"container"},__={class:"event-list"},v_=["onClick"],m_={class:"event-item-content"},y_={class:"event-info"},w_={class:"event-type"},b_={class:"event-title"},E_={class:"event-description"},S_={class:"event-meta"},O_={class:"event-date"},T_={class:"event-location"},k_={class:"modal-header"},A_={class:"modal-title"},R_={class:"modal-body"},C_={class:"event-details"},P_={class:"detail-item"},I_={class:"detail-item"},x_={class:"detail-value"},j_={class:"detail-item"},N_={class:"detail-value"},$_={class:"detail-item full-width"},D_={class:"detail-description"},U_={class:"modal-footer"};function L_(t,e,s,r,n,i){return U(),L("div",n_,[h("section",i_,[h("div",o_,[h("div",a_,[(U(!0),L(fe,null,De(n.carouselSlides,(o,a)=>(U(),L("div",{key:o.id,class:Se(["slide",{active:n.currentSlide===a}]),style:Jr({backgroundImage:`url(${o.image})`})},[e[6]||(e[6]=h("div",{class:"slide-overlay"},null,-1)),h("div",l_,[h("div",c_,[h("span",u_,$(o.title),1),h("span",d_,$(o.description),1)])])],6))),128))]),h("div",h_,[(U(!0),L(fe,null,De(n.carouselSlides,(o,a)=>(U(),L("button",{key:o.id,class:Se(["indicator",{active:n.currentSlide===a}]),onClick:l=>i.goToSlide(a)},null,10,f_))),128))]),h("button",{class:"carousel-nav prev",onClick:e[0]||(e[0]=(...o)=>i.prevSlide&&i.prevSlide(...o))},[...e[7]||(e[7]=[h("i",{class:"fas fa-chevron-left"},null,-1)])]),h("button",{class:"carousel-nav next",onClick:e[1]||(e[1]=(...o)=>i.nextSlide&&i.nextSlide(...o))},[...e[8]||(e[8]=[h("i",{class:"fas fa-chevron-right"},null,-1)])])])]),h("section",p_,[h("div",g_,[e[9]||(e[9]=h("h2",{class:"section-title"},"",-1)),h("div",__,[(U(!0),L(fe,null,De(n.recentEvents,o=>(U(),L("div",{key:o.id,class:"event-item",onClick:a=>i.showEventModal(o)},[h("div",m_,[h("div",y_,[h("div",w_,[h("span",{class:Se(o.typeClass)},$(o.type),3)]),h("h4",b_,$(o.title),1),h("p",E_,$(o.description),1)]),h("div",S_,[h("p",O_,$(o.date),1),h("p",T_,$(o.location),1)])])],8,v_))),128))])])]),n.showModal?(U(),L("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=(...o)=>i.closeModal&&i.closeModal(...o))},[h("div",{class:"modal-content",onClick:e[4]||(e[4]=Oi(()=>{},["stop"]))},[h("div",k_,[h("h3",A_,$(n.selectedEvent.title),1),h("button",{class:"modal-close",onClick:e[2]||(e[2]=(...o)=>i.closeModal&&i.closeModal(...o))},[...e[10]||(e[10]=[h("i",{class:"fas fa-times"},null,-1)])])]),h("div",R_,[h("div",C_,[h("div",P_,[e[11]||(e[11]=h("span",{class:"detail-label"},"",-1)),h("span",{class:Se(["detail-value event-type-badge",n.selectedEvent.typeClass])},$(n.selectedEvent.type),3)]),h("div",I_,[e[12]||(e[12]=h("span",{class:"detail-label"},"",-1)),h("span",x_,$(n.selectedEvent.date),1)]),h("div",j_,[e[13]||(e[13]=h("span",{class:"detail-label"},"",-1)),h("span",N_,$(n.selectedEvent.location),1)]),h("div",$_,[e[14]||(e[14]=h("span",{class:"detail-label"},"",-1)),h("p",D_,$(n.selectedEvent.description),1)])])]),h("div",U_,[h("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...o)=>i.closeModal&&i.closeModal(...o))},"")])])])):Ut("",!0)])}const B_=_t(r_,[["render",L_],["__scopeId","data-v-0be62aed"]]);const M_={name:"Categories",data(){return{sidebarOpen:!1,activeNav:1,isLoading:!1,errorMessage:"",categoryNavs:[{id:1,name:""},{id:2,name:""},{id:3,name:""},{id:4,name:""}],categories:[]}},computed:{filteredCategories(){return this.activeNav===1?this.categories:this.categories.filter(t=>t.type===this.activeNav)},activeNavName(){if(this.activeNav===1)return"";const t=this.categoryNavs.find(e=>e.id===this.activeNav);return t?t.name:""}},async mounted(){await this.loadCategories()},methods:{async loadCategories(){this.isLoading=!0,this.errorMessage="";try{const t=await Me.getCategories();t&&t.length>0?this.categories=t.map(e=>({id:e.id,name:e.name,icon:this.getCategoryIcon(e.name),description:e.description||"",videoCount:Math.floor(Math.random()*200)+50,studentCount:Math.floor(Math.random()*1e4)+1e3,type:this.getCategoryType(e.name)})):this.useDefaultCategories()}catch(t){console.error(":",t),this.errorMessage="",this.useDefaultCategories()}finally{this.isLoading=!1}},getCategoryIcon(t){return{:"fas fa-microphone-alt",:"fas fa-book-open",:"fas fa-mask",:"fas fa-landmark",:"fas fa-drum",:"fas fa-guitar",:"fas fa-masks-theater",:"fas fa-users"}[t]||"fas fa-folder"},getCategoryType(t){return{:2,:2,:3,:3,:4,:4,:3,:4}[t]||1},useDefaultCategories(){this.categories=[{id:1,name:"",icon:"fas fa-microphone-alt",description:"",videoCount:128,studentCount:5234,type:2},{id:2,name:"",icon:"fas fa-book-open",description:"",videoCount:96,studentCount:3856,type:2},{id:3,name:"",icon:"fas fa-mask",description:"",videoCount:156,studentCount:6897,type:3}]},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},setActiveNav(t){this.activeNav=t},getNavIcon(t){return{1:"fa-th-large",2:"fa-comments",3:"fa-mask",4:"fa-music"}[t]||"fa-folder"},getCategoryCount(t){return t===1?this.categories.length:this.categories.filter(e=>e.type===t).length},goToCategory(t){this.$router.push(`/category/${t}`)}}},V_={class:"categories"},F_={class:"sidebar"},q_={class:"sidebar-header"},H_={class:"category-nav"},K_=["onClick"],W_={class:"category-count"},G_={class:"container"},z_={class:"page-title"},J_={key:0,class:"loading-container"},Q_={key:1,class:"error-container"},Y_={key:2,class:"category-content"},X_=["onClick"],Z_={class:"category-header"},ev={class:"category-description"},tv={class:"category-stats"},sv={key:3,class:"no-categories"};function rv(t,e,s,r,n,i){return U(),L("div",V_,[h("aside",F_,[h("div",q_,[h("div",{class:"sidebar-toggle",onClick:e[0]||(e[0]=(...o)=>i.toggleSidebar&&i.toggleSidebar(...o))},[h("i",{class:Se(["fas",n.sidebarOpen?"fa-times":"fa-bars"])},null,2)])]),h("div",{class:Se(["sidebar-content",{open:n.sidebarOpen}])},[h("nav",H_,[(U(!0),L(fe,null,De(n.categoryNavs,o=>(U(),L("div",{key:o.id,class:Se(["nav-item",{active:n.activeNav===o.id}]),onClick:a=>i.setActiveNav(o.id)},[h("span",null,$(o.name),1),h("span",W_,$(i.getCategoryCount(o.id)),1)],10,K_))),128))])],2)]),h("main",{class:Se(["main-content",{"sidebar-expanded":n.sidebarOpen}])},[h("div",G_,[h("h1",z_,$(i.activeNavName?`${i.activeNavName}`:""),1),n.isLoading?(U(),L("div",J_,[...e[2]||(e[2]=[h("div",{class:"loading-spinner"},null,-1),h("p",null,"...",-1)])])):n.errorMessage?(U(),L("div",Q_,[e[3]||(e[3]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),h("p",null,$(n.errorMessage),1),h("button",{onClick:e[1]||(e[1]=(...o)=>i.loadCategories&&i.loadCategories(...o)),class:"btn btn-secondary"},"  ")])):(U(),L("div",Y_,[(U(!0),L(fe,null,De(i.filteredCategories,o=>(U(),L("div",{key:o.id,class:"category-item card",onClick:a=>i.goToCategory(o.id)},[h("div",Z_,[h("i",{class:Se(o.icon)},null,2),h("h3",null,$(o.name),1)]),h("p",ev,$(o.description),1),h("div",tv,[h("span",null,[e[4]||(e[4]=h("i",{class:"fas fa-video"},null,-1)),Z(" "+$(o.videoCount)+" ",1)]),h("span",null,[e[5]||(e[5]=h("i",{class:"fas fa-users"},null,-1)),Z(" "+$(o.studentCount)+" ",1)])]),e[6]||(e[6]=h("button",{class:"btn btn-secondary"},[Z("  "),h("i",{class:"fas fa-arrow-right"})],-1))],8,X_))),128))])),!n.isLoading&&!n.errorMessage&&i.filteredCategories.length===0?(U(),L("div",sv,[...e[7]||(e[7]=[h("i",{class:"fas fa-masks-theater"},null,-1),h("p",null,"",-1)])])):Ut("",!0)])],2)])}const nv=_t(M_,[["render",rv],["__scopeId","data-v-715da0dd"]]);const iv={name:"CategoryDetail",props:{id:{type:[String,Number],required:!0}},data(){return{isLoading:!1,errorMessage:"",category:null,relatedVideos:[]}},computed:{representativesList(){return!this.category||!this.category.representatives?[]:this.category.representatives.split("").map(t=>t.trim())}},async mounted(){await this.loadCategoryDetail()},methods:{async loadCategoryDetail(){this.isLoading=!0,this.errorMessage="";try{if(this.category=await Me.getCategoryDetail(parseInt(this.id)),!this.category){this.errorMessage="";return}const t=await Me.getVideos({categoryId:parseInt(this.id),pageSize:4});this.relatedVideos=t.videos}catch(t){console.error(":",t),this.errorMessage=""}finally{this.isLoading=!1}},getCategoryIcon(t){return{:"fas fa-microphone-alt",:"fas fa-book-open",:"fas fa-mask",:"fas fa-landmark",:"fas fa-drum",:"fas fa-guitar",:"fas fa-masks-theater",:"fas fa-users"}[t]||"fas fa-folder"},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},goBack(){this.$router.back()},goToVideos(){this.$router.push(`/videos?category=${this.id}`)},goToCategories(){this.$router.push("/categories")},goToVideo(t){this.$router.push(`/video/${t}`)}}},ov={class:"category-detail"},av={key:0,class:"loading-container"},lv={key:1,class:"error-container"},cv={key:2,class:"category-content"},uv={class:"category-header"},dv={class:"header-background"},hv={class:"container"},fv={class:"header-content"},pv={class:"category-info"},gv={class:"category-icon"},_v={class:"category-text"},vv={class:"category-title"},mv={class:"category-subtitle"},yv={class:"category-meta"},wv={class:"meta-item"},bv={class:"meta-item"},Ev={class:"main-content"},Sv={class:"container"},Ov={class:"detail-section"},Tv={class:"description-content"},kv={class:"detail-section"},Av={class:"characteristics-content"},Rv={class:"detail-section"},Cv={class:"representatives-content"},Pv={class:"representatives-list"},Iv={class:"detail-section"},xv={class:"performance-content"},jv={class:"detail-section"},Nv={class:"videos-content"},$v={key:0,class:"videos-grid"},Dv=["onClick"],Uv={class:"video-thumbnail"},Lv=["src","alt"],Bv={class:"video-duration"},Mv={class:"video-info"},Vv={class:"video-title"},Fv={class:"video-description"},qv={class:"video-stats"},Hv={key:1,class:"no-videos"},Kv={class:"quick-nav-section"},Wv={class:"quick-nav"},Gv={key:3,class:"no-data"};function zv(t,e,s,r,n,i){return U(),L("div",ov,[n.isLoading?(U(),L("div",av,[...e[5]||(e[5]=[h("div",{class:"loading-spinner"},null,-1),h("p",null,"...",-1)])])):n.errorMessage?(U(),L("div",lv,[e[6]||(e[6]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),h("p",null,$(n.errorMessage),1),h("button",{onClick:e[0]||(e[0]=(...o)=>i.loadCategoryDetail&&i.loadCategoryDetail(...o)),class:"btn btn-secondary"},"  ")])):n.category?(U(),L("div",cv,[h("header",uv,[h("div",dv,[e[10]||(e[10]=h("div",{class:"header-overlay"},null,-1)),h("div",hv,[h("div",fv,[h("button",{onClick:e[1]||(e[1]=(...o)=>i.goBack&&i.goBack(...o)),class:"back-btn"},[...e[7]||(e[7]=[h("i",{class:"fas fa-arrow-left"},null,-1),Z("  ",-1)])]),h("div",pv,[h("div",gv,[h("i",{class:Se(i.getCategoryIcon(n.category.name))},null,2)]),h("div",_v,[h("h1",vv,$(n.category.name),1),h("p",mv,$(n.category.description),1),h("div",yv,[h("span",wv,[e[8]||(e[8]=h("i",{class:"fas fa-map-marker-alt"},null,-1)),Z(" "+$(n.category.origin),1)]),h("span",bv,[e[9]||(e[9]=h("i",{class:"fas fa-star"},null,-1)),Z(" "+$(n.category.popularity),1)])])])])])])])]),h("main",Ev,[h("div",Sv,[h("section",Ov,[e[11]||(e[11]=h("h2",{class:"section-title"},"",-1)),h("div",Tv,[h("p",null,$(n.category.detailed_description),1)])]),h("section",kv,[e[12]||(e[12]=h("h2",{class:"section-title"},"",-1)),h("div",Av,[h("p",null,$(n.category.characteristics),1)])]),h("section",Rv,[e[14]||(e[14]=h("h2",{class:"section-title"},"",-1)),h("div",Cv,[h("div",Pv,[(U(!0),L(fe,null,De(i.representativesList,o=>(U(),L("div",{key:o,class:"representative-item"},[e[13]||(e[13]=h("i",{class:"fas fa-user"},null,-1)),h("span",null,$(o),1)]))),128))])])]),h("section",Iv,[e[15]||(e[15]=h("h2",{class:"section-title"},"",-1)),h("div",xv,[h("p",null,$(n.category.performance_form),1)])]),h("section",jv,[e[20]||(e[20]=h("h2",{class:"section-title"},"",-1)),h("div",Nv,[n.relatedVideos.length>0?(U(),L("div",$v,[(U(!0),L(fe,null,De(n.relatedVideos,o=>(U(),L("div",{key:o.id,class:"video-card",onClick:a=>i.goToVideo(o.id)},[h("div",Uv,[h("img",{src:o.thumbnail_url||"/default-thumbnail.jpg",alt:o.title},null,8,Lv),e[16]||(e[16]=h("div",{class:"video-overlay"},[h("i",{class:"fas fa-play"})],-1)),h("div",Bv,$(i.formatDuration(o.duration)),1)]),h("div",Mv,[h("h4",Vv,$(o.title),1),h("p",Fv,$(o.description),1),h("div",qv,[h("span",null,[e[17]||(e[17]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+$(o.views_count),1)]),h("span",null,[e[18]||(e[18]=h("i",{class:"fas fa-heart"},null,-1)),Z(" "+$(o.likes_count),1)])])])],8,Dv))),128))])):(U(),L("div",Hv,[...e[19]||(e[19]=[h("i",{class:"fas fa-video-slash"},null,-1),h("p",null,"",-1)])]))])]),h("section",Kv,[h("div",Wv,[h("button",{onClick:e[2]||(e[2]=(...o)=>i.goToVideos&&i.goToVideos(...o)),class:"nav-btn primary"},[...e[21]||(e[21]=[h("i",{class:"fas fa-play"},null,-1),Z("  ",-1)])]),h("button",{onClick:e[3]||(e[3]=(...o)=>i.goToCategories&&i.goToCategories(...o)),class:"nav-btn secondary"},[...e[22]||(e[22]=[h("i",{class:"fas fa-list"},null,-1),Z("  ",-1)])])])])])])])):(U(),L("div",Gv,[e[23]||(e[23]=h("i",{class:"fas fa-masks-theater"},null,-1)),e[24]||(e[24]=h("p",null,"",-1)),h("button",{onClick:e[4]||(e[4]=(...o)=>i.goToCategories&&i.goToCategories(...o)),class:"btn btn-primary"},"  ")]))])}const Jv=_t(iv,[["render",zv],["__scopeId","data-v-7d0bdec1"]]);const Qv={name:"Videos",data(){return{searchQuery:"",selectedCategory:"",currentVideo:null,categories:[],videos:[],loading:!1,page:1,pageSize:12,totalPages:0,totalVideos:0}},computed:{filteredVideos(){return this.videos},hasMoreVideos(){return this.page<this.totalPages}},async mounted(){await this.loadCategories(),await this.loadVideos()},methods:{async loadCategories(){try{this.categories=await Me.getCategories()}catch(t){console.error(":",t)}},async loadVideos(){this.loading=!0;try{const t={categoryId:this.selectedCategory||null,page:this.page,pageSize:this.pageSize},e=await Me.getVideos(t);this.videos=e.videos,this.totalVideos=e.total,this.totalPages=e.totalPages}catch(t){console.error(":",t),this.videos=[]}finally{this.loading=!1}},async handleSearch(){if(this.searchQuery.trim())try{await Me.recordSearchKeyword(this.searchQuery);const t=await Me.searchVideos(this.searchQuery);this.videos=t.videos,this.totalVideos=t.total,this.totalPages=t.totalPages,this.page=1}catch(t){console.error(":",t)}else await this.loadVideos()},async filterVideos(){this.page=1,await this.loadVideos()},playVideo(t){this.$router.push(`/video/${t.id}`)},closeVideo(){this.currentVideo=null},getCategoryName(t){const e=this.categories.find(s=>s.id===t);return e?e.name:""},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},async loadMoreVideos(){if(this.hasMoreVideos){this.page++;try{const t={categoryId:this.selectedCategory||null,page:this.page,pageSize:this.pageSize},e=await Me.getVideos(t);this.videos=[...this.videos,...e.videos]}catch(t){console.error(":",t),this.page--}}}}},Yv={class:"videos"},Xv={class:"container"},Zv={class:"videos-header"},em={class:"search-controls"},tm={class:"search-box"},sm=["value"],rm={key:0,class:"loading"},nm={key:1,class:"videos-grid"},im=["onClick"],om={class:"video-thumbnail"},am={class:"video-duration"},lm={class:"video-category"},cm={class:"video-info"},um={class:"video-title"},dm={class:"video-description"},hm={class:"video-meta"},fm={class:"video-performer"},pm={class:"video-views"},gm={class:"video-tags"},_m={key:2,class:"empty-state"},vm={key:3,class:"load-more"},mm={class:"video-details"},ym={class:"video-info"};function wm(t,e,s,r,n,i){return U(),L("div",Yv,[h("div",Xv,[h("div",Zv,[e[10]||(e[10]=h("h1",{class:"page-title"},"",-1)),e[11]||(e[11]=h("p",{class:"page-subtitle"},"",-1)),h("div",em,[h("div",tm,[e[8]||(e[8]=h("i",{class:"fas fa-search search-icon"},null,-1)),Xs(h("input",{type:"text",class:"search-input",placeholder:"...","onUpdate:modelValue":e[0]||(e[0]=o=>n.searchQuery=o),onInput:e[1]||(e[1]=(...o)=>i.handleSearch&&i.handleSearch(...o))},null,544),[[nn,n.searchQuery]])]),Xs(h("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedCategory=o),class:"category-filter",onChange:e[3]||(e[3]=(...o)=>i.filterVideos&&i.filterVideos(...o))},[e[9]||(e[9]=h("option",{value:""},"",-1)),(U(!0),L(fe,null,De(n.categories,o=>(U(),L("option",{key:o.id,value:o.id},$(o.name),9,sm))),128))],544),[[Qd,n.selectedCategory]])])]),n.loading?(U(),L("div",rm,[...e[12]||(e[12]=[h("div",{class:"spinner"},null,-1),h("p",null,"...",-1)])])):(U(),L("div",nm,[(U(!0),L(fe,null,De(i.filteredVideos,o=>(U(),L("div",{key:o.id,class:"video-card card",onClick:a=>i.playVideo(o)},[h("div",om,[e[13]||(e[13]=h("i",{class:"fas fa-play-circle play-icon"},null,-1)),h("div",am,$(i.formatDuration(o.duration)),1),h("div",lm,$(i.getCategoryName(o.category_id)),1)]),h("div",cm,[h("h3",um,$(o.title),1),h("p",dm,$(o.description),1),h("div",hm,[h("span",fm,[e[14]||(e[14]=h("i",{class:"fas fa-user"},null,-1)),Z(" "+$(o.performer||""),1)]),h("span",pm,[e[15]||(e[15]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+$(o.views_count||0)+"  ",1)])]),h("div",gm,[(U(!0),L(fe,null,De(o.tags||[],a=>(U(),L("span",{key:a,class:"tag"},$(a),1))),128))])])],8,im))),128))])),!n.loading&&i.filteredVideos.length===0?(U(),L("div",_m,[...e[16]||(e[16]=[h("i",{class:"fas fa-video-slash"},null,-1),h("h3",null,"",-1),h("p",null,"",-1)])])):Ut("",!0),i.hasMoreVideos?(U(),L("div",vm,[h("button",{class:"btn",onClick:e[4]||(e[4]=(...o)=>i.loadMoreVideos&&i.loadMoreVideos(...o))},[...e[17]||(e[17]=[Z("  ",-1),h("i",{class:"fas fa-arrow-down"},null,-1)])])])):Ut("",!0)]),n.currentVideo?(U(),L("div",{key:0,class:"video-modal",onClick:e[7]||(e[7]=(...o)=>i.closeVideo&&i.closeVideo(...o))},[h("div",{class:"modal-content",onClick:e[6]||(e[6]=Oi(()=>{},["stop"]))},[h("button",{class:"close-btn",onClick:e[5]||(e[5]=(...o)=>i.closeVideo&&i.closeVideo(...o))},[...e[18]||(e[18]=[h("i",{class:"fas fa-times"},null,-1)])]),e[19]||(e[19]=h("div",{class:"video-player"},[h("div",{class:"player-placeholder"},[h("i",{class:"fas fa-play-circle"}),h("p",null,"")])],-1)),h("div",mm,[h("h3",null,$(n.currentVideo.title),1),h("p",null,$(n.currentVideo.description),1),h("div",ym,[h("span",null,""+$(n.currentVideo.teacher),1),h("span",null,""+$(n.currentVideo.duration),1),h("span",null,""+$(i.getCategoryName(n.currentVideo.categoryId)),1)])])])])):Ut("",!0)])}const bm=_t(Qv,[["render",wm],["__scopeId","data-v-86751c6c"]]);const Em={name:"About",data(){return{contactForm:{message:""}}},methods:{submitContact(){alert(""),this.contactForm={message:""}}}},Sm={class:"about"},Om={class:"container"},Tm={class:"contact-section"},km={class:"contact-form card"},Am={class:"form-group"};function Rm(t,e,s,r,n,i){return U(),L("div",Sm,[h("div",Om,[e[4]||(e[4]=h("div",{class:"page-header"},[h("h1",{class:"page-title"},"")],-1)),h("section",Tm,[h("div",km,[e[3]||(e[3]=h("h3",null,"",-1)),h("form",{onSubmit:e[1]||(e[1]=Oi((...o)=>i.submitContact&&i.submitContact(...o),["prevent"]))},[h("div",Am,[Xs(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.contactForm.message=o),placeholder:"",rows:"8",required:""},null,512),[[nn,n.contactForm.message]])]),e[2]||(e[2]=h("button",{type:"submit",class:"btn"},"",-1))],32)])])])])}const Cm=_t(Em,[["render",Rm],["__scopeId","data-v-61516447"]]);const Pm={name:"AiLearning",data(){return{userInput:"",messages:[],isLoading:!1,isConnected:!1,quickQuestions:["","","","","",""],recommendedResources:[{id:1,title:"",description:"",icon:"fas fa-microphone-alt",link:"/videos?category=1"},{id:2,title:"",description:"",icon:"fas fa-book-open",link:"/videos?category=2"},{id:3,title:"",description:"",icon:"fas fa-mask",link:"/videos?category=3"},{id:4,title:"",description:"",icon:"fas fa-building",link:"/categories"}]}},async mounted(){await this.checkConnection(),this.loadConversationHistory(),this.scrollToBottom()},methods:{async checkConnection(){try{const{data:t,error:e}=await ke.from("quyi_knowledge").select("count").limit(1);this.isConnected=!e,e&&console.warn("Supabase:",e.message)}catch(t){console.warn("Supabase:",t)}},async loadConversationHistory(){try{const t=localStorage.getItem("quyi_ai_conversation");t&&(this.messages=JSON.parse(t))}catch(t){console.warn(":",t)}},async sendMessage(){if(!this.userInput.trim())return;const t={type:"user",content:this.userInput,time:this.getCurrentTime()};this.messages.push(t);const e=this.userInput;this.userInput="",this.saveConversationHistory(),this.isLoading=!0,await this.generateAiResponse(e),this.isLoading=!1,this.scrollToBottom()},quickQuestion(t){this.userInput=t,this.sendMessage()},async generateAiResponse(t){let e="";try{if(this.isConnected){const{data:r,error:n}=await ke.from("quyi_knowledge").select("*").or(`question.ilike.%${t}%,tags.ilike.%${t}%`).limit(1);!n&&r&&r.length>0?e=r[0].answer:(e=this.getLocalResponse(t),await this.recordUnansweredQuestion(t))}else e=this.getLocalResponse(t)}catch(r){console.warn("AI:",r),e=this.getLocalResponse(t)}const s={type:"ai",content:e,time:this.getCurrentTime()};this.messages.push(s),this.saveConversationHistory()},getLocalResponse(t){const e={:`
1. 
2. 
3. 
4. 
`,:`
1. 
2. 
3. 
4. 
`,:`
1. 
2. 
3. 
4. 
5. `,:`
1. 
2. 
3. 
4. 
5. 
`,:`
1. 
2. 
3. 
4. 
5. `,:`
1. 
2. 
3. 
4. 
5. `},r=Object.keys(e).find(n=>t.toLowerCase().includes(n.toLowerCase()));return r?e[r]:t.includes("")||t.includes("")?"":t.includes("")||t.includes("")?"":t.includes("")||t.includes("")?"":""},async recordUnansweredQuestion(t){if(this.isConnected)try{await ke.from("unanswered_questions").insert([{question:t,created_at:new Date().toISOString()}])}catch(e){console.warn(":",e)}},saveConversationHistory(){try{localStorage.setItem("quyi_ai_conversation",JSON.stringify(this.messages))}catch(t){console.warn(":",t)}},getCurrentTime(){const t=new Date;return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},scrollToBottom(){this.$nextTick(()=>{const t=this.$refs.chatMessages;t&&(t.scrollTop=t.scrollHeight)})}}},Im={class:"ai-learning"},xm={class:"container"},jm={class:"qa-section"},Nm={class:"qa-container"},$m={class:"chat-container"},Dm={class:"chat-messages",ref:"chatMessages"},Um={class:"message-avatar"},Lm={class:"message-content"},Bm={class:"message-time"},Mm={key:0,class:"message ai-message"},Vm={class:"chat-input"},Fm={class:"input-container"},qm=["disabled"],Hm=["disabled"],Km={class:"quick-questions"},Wm={class:"quick-buttons"},Gm=["onClick"],zm={class:"learning-resources"},Jm={class:"resources-grid"};function Qm(t,e,s,r,n,i){const o=bs("router-link");return U(),L("div",Im,[h("div",xm,[e[9]||(e[9]=al('<div class="page-header" data-v-cfb01fc4><h1 class="page-title" data-v-cfb01fc4>AI</h1><p class="page-subtitle" data-v-cfb01fc4></p></div><section class="ai-intro" data-v-cfb01fc4><div class="ai-intro-content" data-v-cfb01fc4><div class="ai-intro-text" data-v-cfb01fc4><h2 data-v-cfb01fc4></h2><p data-v-cfb01fc4> AI  </p><ul class="ai-features" data-v-cfb01fc4><li data-v-cfb01fc4><i class="fas fa-comment" data-v-cfb01fc4></i> 24</li><li data-v-cfb01fc4><i class="fas fa-book" data-v-cfb01fc4></i> </li><li data-v-cfb01fc4><i class="fas fa-graduation-cap" data-v-cfb01fc4></i> </li><li data-v-cfb01fc4><i class="fas fa-lightbulb" data-v-cfb01fc4></i> </li></ul></div><div class="ai-intro-image" data-v-cfb01fc4><i class="fas fa-robot" data-v-cfb01fc4></i></div></div></section>',2)),h("section",jm,[h("div",Nm,[h("div",$m,[h("div",Dm,[e[4]||(e[4]=h("div",{class:"message ai-message"},[h("div",{class:"message-avatar"},[h("i",{class:"fas fa-robot"})]),h("div",{class:"message-content"},[h("h4",null,"AI"),h("p",null,""),h("ul",null,[h("li",null," "),h("li",null," "),h("li",null," "),h("li",null," ")]),h("p",null,"")])],-1)),(U(!0),L(fe,null,De(n.messages,(a,l)=>(U(),L("div",{key:l,class:Se(["message",a.type==="user"?"user-message":"ai-message"])},[h("div",Um,[h("i",{class:Se(a.type==="user"?"fas fa-user":"fas fa-robot")},null,2)]),h("div",Lm,[h("h4",null,$(a.type==="user"?"":"AI"),1),h("p",null,$(a.content),1),h("span",Bm,$(a.time),1)])],2))),128)),n.isLoading?(U(),L("div",Mm,[...e[3]||(e[3]=[h("div",{class:"message-avatar"},[h("i",{class:"fas fa-robot"})],-1),h("div",{class:"message-content"},[h("div",{class:"typing-indicator"},[h("span"),h("span"),h("span")])],-1)])])):Ut("",!0)],512),h("div",Vm,[h("div",Fm,[Xs(h("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>n.userInput=a),placeholder:"...",onKeyup:e[1]||(e[1]=hl((...a)=>i.sendMessage&&i.sendMessage(...a),["enter"])),disabled:n.isLoading,class:"message-input"},null,40,qm),[[nn,n.userInput]]),h("button",{onClick:e[2]||(e[2]=(...a)=>i.sendMessage&&i.sendMessage(...a)),disabled:!n.userInput.trim()||n.isLoading,class:"send-btn"},[...e[5]||(e[5]=[h("i",{class:"fas fa-paper-plane"},null,-1)])],8,Hm)])])]),h("div",Km,[e[6]||(e[6]=h("h3",null,"",-1)),h("div",Wm,[(U(!0),L(fe,null,De(n.quickQuestions,(a,l)=>(U(),L("button",{key:l,onClick:c=>i.quickQuestion(a),class:"quick-btn"},$(a),9,Gm))),128))])])])]),h("section",zm,[e[8]||(e[8]=h("h2",{class:"section-title"},"",-1)),h("div",Jm,[(U(!0),L(fe,null,De(n.recommendedResources,a=>(U(),L("div",{class:"resource-card card",key:a.id},[h("i",{class:Se(a.icon)},null,2),h("h3",null,$(a.title),1),h("p",null,$(a.description),1),oe(o,{to:a.link,class:"btn btn-secondary"},{default:Qe(()=>[...e[7]||(e[7]=[Z("  ",-1),h("i",{class:"fas fa-arrow-right"},null,-1)])]),_:1},8,["to"])]))),128))])])])])}const Ym=_t(Pm,[["render",Qm],["__scopeId","data-v-cfb01fc4"]]);const Xm={name:"VideoPlayer",props:{videoId:{type:[String,Number],required:!0}},data(){return{video:null,relatedVideos:[],loading:!1,isPlaying:!1,currentTime:0,isLiked:!1,isFavorited:!1}},computed:{videoUrl(){var t;return((t=this.video)==null?void 0:t.video_url)||""}},watch:{videoId:{immediate:!0,async handler(t){t&&await this.loadVideoData()}}},methods:{async loadVideoData(){this.loading=!0;try{this.video=await Me.getVideoDetail(this.videoId),this.video&&this.video.tags&&(this.relatedVideos=await Me.getRelatedVideosByTags(this.video.tags,4)),await Me.incrementVideoViews(this.videoId)}catch(t){console.error(":",t),this.video=null}finally{this.loading=!1}},playVideo(){this.$refs.videoElement&&this.$refs.videoElement.play()},onPlay(){this.isPlaying=!0},onPause(){this.isPlaying=!1},onTimeUpdate(t){this.currentTime=t.target.currentTime},onEnded(){this.isPlaying=!1},toggleLike(){this.isLiked=!this.isLiked},toggleFavorite(){this.isFavorited=!this.isFavorited},shareVideo(){navigator.share?navigator.share({title:this.video.title,text:this.video.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(""))},playRelatedVideo(t){this.$router.push(`/video/${t.id}`)},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},formatDate(t){return t?new Date(t).toLocaleDateString("zh-CN"):""}}},Zm={key:0,class:"video-player"},ey={class:"player-container"},ty={class:"player-wrapper"},sy=["src"],ry={key:0,class:"custom-controls"},ny={class:"video-info"},iy={class:"video-title"},oy={class:"video-meta"},ay={class:"meta-item"},ly={class:"meta-item"},cy={class:"meta-item"},uy={class:"meta-item"},dy={class:"video-description"},hy={class:"video-tags"},fy={class:"video-actions"},py={key:0,class:"related-videos"},gy={class:"related-grid"},_y=["onClick"],vy={class:"related-thumbnail"},my={class:"duration"},yy={class:"related-info"},wy={key:1,class:"loading"},by={key:2,class:"error-state"};function Ey(t,e,s,r,n,i){return n.video?(U(),L("div",Zm,[h("div",ey,[h("div",ty,[h("video",{ref:"videoElement",src:i.videoUrl,controls:"",class:"video-element",onPlay:e[0]||(e[0]=(...o)=>i.onPlay&&i.onPlay(...o)),onPause:e[1]||(e[1]=(...o)=>i.onPause&&i.onPause(...o)),onTimeupdate:e[2]||(e[2]=(...o)=>i.onTimeUpdate&&i.onTimeUpdate(...o)),onEnded:e[3]||(e[3]=(...o)=>i.onEnded&&i.onEnded(...o))},"  ",40,sy),n.isPlaying?Ut("",!0):(U(),L("div",ry,[h("button",{class:"play-button",onClick:e[4]||(e[4]=(...o)=>i.playVideo&&i.playVideo(...o))},[...e[9]||(e[9]=[h("i",{class:"fas fa-play"},null,-1)])])]))]),h("div",ny,[h("h1",iy,$(n.video.title),1),h("div",oy,[h("span",ay,[e[10]||(e[10]=h("i",{class:"fas fa-user"},null,-1)),Z(" "+$(n.video.performer||""),1)]),h("span",ly,[e[11]||(e[11]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+$(n.video.views_count||0)+"  ",1)]),h("span",cy,[e[12]||(e[12]=h("i",{class:"fas fa-clock"},null,-1)),Z(" "+$(i.formatDuration(n.video.duration)),1)]),h("span",uy,[e[13]||(e[13]=h("i",{class:"fas fa-calendar"},null,-1)),Z(" "+$(i.formatDate(n.video.performance_date)),1)])]),h("div",dy,[h("p",null,$(n.video.description),1)]),h("div",hy,[(U(!0),L(fe,null,De(n.video.tags||[],o=>(U(),L("span",{key:o,class:"tag"},$(o),1))),128))]),h("div",fy,[h("button",{class:"btn btn-outline",onClick:e[5]||(e[5]=(...o)=>i.toggleLike&&i.toggleLike(...o))},[h("i",{class:Se([n.isLiked?"fas":"far","fa-heart"])},null,2),Z(" "+$(n.video.likes_count||0)+"  ",1)]),h("button",{class:"btn btn-outline",onClick:e[6]||(e[6]=(...o)=>i.toggleFavorite&&i.toggleFavorite(...o))},[h("i",{class:Se([n.isFavorited?"fas":"far","fa-star"])},null,2),e[14]||(e[14]=Z("  ",-1))]),h("button",{class:"btn btn-outline",onClick:e[7]||(e[7]=(...o)=>i.shareVideo&&i.shareVideo(...o))},[...e[15]||(e[15]=[h("i",{class:"fas fa-share-alt"},null,-1),Z("  ",-1)])])])])]),n.relatedVideos.length>0?(U(),L("div",py,[e[17]||(e[17]=h("h3",null,"",-1)),h("div",gy,[(U(!0),L(fe,null,De(n.relatedVideos,o=>(U(),L("div",{key:o.id,class:"related-card",onClick:a=>i.playRelatedVideo(o)},[h("div",vy,[e[16]||(e[16]=h("i",{class:"fas fa-play-circle"},null,-1)),h("div",my,$(i.formatDuration(o.duration)),1)]),h("div",yy,[h("h4",null,$(o.title),1),h("p",null,$(o.performer),1)])],8,_y))),128))])])):Ut("",!0)])):n.loading?(U(),L("div",wy,[...e[18]||(e[18]=[h("div",{class:"spinner"},null,-1),h("p",null,"...",-1)])])):(U(),L("div",by,[e[19]||(e[19]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),e[20]||(e[20]=h("h3",null,"",-1)),e[21]||(e[21]=h("p",null,"",-1)),h("button",{class:"btn",onClick:e[8]||(e[8]=o=>t.$router.push("/videos"))},"")]))}const Sy=_t(Xm,[["render",Ey],["__scopeId","data-v-b9177ecd"]]),Oy=[{path:"/",name:"Home",component:B_},{path:"/categories",name:"Categories",component:nv},{path:"/category/:id",name:"CategoryDetail",component:Jv,props:!0},{path:"/videos",name:"Videos",component:bm},{path:"/ai-learning",name:"AiLearning",component:Ym},{path:"/about",name:"About",component:Cm},{path:"/video/:id",name:"VideoPlayer",component:Sy,props:!0}],Ty=jf({history:df(),routes:Oy});const Pc=sh(kh);Pc.use(Ty);Pc.mount("#app");
