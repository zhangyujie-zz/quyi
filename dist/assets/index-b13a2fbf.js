var xc=Object.defineProperty;var jc=(t,e,s)=>e in t?xc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var dn=(t,e,s)=>(jc(t,typeof e!="symbol"?e+"":e,s),s);function $c(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in t)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ci(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const ae={},vs=[],nt=()=>{},ca=()=>!1,Kr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ui=t=>t.startsWith("onUpdate:"),Oe=Object.assign,di=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Nc=Object.prototype.hasOwnProperty,ne=(t,e)=>Nc.call(t,e),W=Array.isArray,_s=t=>ir(t)==="[object Map]",Wr=t=>ir(t)==="[object Set]",Vi=t=>ir(t)==="[object Date]",Q=t=>typeof t=="function",me=t=>typeof t=="string",pt=t=>typeof t=="symbol",ce=t=>t!==null&&typeof t=="object",ua=t=>(ce(t)||Q(t))&&Q(t.then)&&Q(t.catch),da=Object.prototype.toString,ir=t=>da.call(t),Dc=t=>ir(t).slice(8,-1),ha=t=>ir(t)==="[object Object]",hi=t=>me(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ls=ci(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gr=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},Uc=/-\w/g,Ye=Gr(t=>t.replace(Uc,e=>e.slice(1).toUpperCase())),Lc=/\B([A-Z])/g,Bt=Gr(t=>t.replace(Lc,"-$1").toLowerCase()),zr=Gr(t=>t.charAt(0).toUpperCase()+t.slice(1)),hn=Gr(t=>t?`on${zr(t)}`:""),Ut=(t,e)=>!Object.is(t,e),Er=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},fa=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},Jr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Fi;const Qr=()=>Fi||(Fi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yr(t){if(W(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=me(r)?Fc(r):Yr(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(me(t)||ce(t))return t}const Mc=/;(?![^(]*\))/g,Bc=/:([^]+)/,Vc=/\/\*[^]*?\*\//g;function Fc(t){const e={};return t.replace(Vc,"").split(Mc).forEach(s=>{if(s){const r=s.split(Bc);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ce(t){let e="";if(me(t))e=t;else if(W(t))for(let s=0;s<t.length;s++){const r=Ce(t[s]);r&&(e+=r+" ")}else if(ce(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const qc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hc=ci(qc);function pa(t){return!!t||t===""}function Kc(t,e){if(t.length!==e.length)return!1;let s=!0;for(let r=0;s&&r<t.length;r++)s=Xr(t[r],e[r]);return s}function Xr(t,e){if(t===e)return!0;let s=Vi(t),r=Vi(e);if(s||r)return s&&r?t.getTime()===e.getTime():!1;if(s=pt(t),r=pt(e),s||r)return t===e;if(s=W(t),r=W(e),s||r)return s&&r?Kc(t,e):!1;if(s=ce(t),r=ce(e),s||r){if(!s||!r)return!1;const n=Object.keys(t).length,i=Object.keys(e).length;if(n!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Xr(t[o],e[o]))return!1}}return String(t)===String(e)}function Wc(t,e){return t.findIndex(s=>Xr(s,e))}const ga=t=>!!(t&&t.__v_isRef===!0),N=t=>me(t)?t:t==null?"":W(t)||ce(t)&&(t.toString===da||!Q(t.toString))?ga(t)?N(t.value):JSON.stringify(t,va,2):String(t),va=(t,e)=>ga(e)?va(t,e.value):_s(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[fn(r,i)+" =>"]=n,s),{})}:Wr(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>fn(s))}:pt(e)?fn(e):ce(e)&&!W(e)&&!ha(e)?String(e):e,fn=(t,e="")=>{var s;return pt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Le;class Gc{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Le,!e&&Le&&(this.index=(Le.scopes||(Le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Le;try{return Le=this,e()}finally{Le=s}}}on(){++this._on===1&&(this.prevScope=Le,Le=this)}off(){this._on>0&&--this._on===0&&(Le=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function zc(){return Le}let he;const pn=new WeakSet;class _a{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Le&&Le.active&&Le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pn.has(this)&&(pn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ya(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qi(this),wa(this);const e=he,s=it;he=this,it=!0;try{return this.fn()}finally{ba(this),he=e,it=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gi(e);this.deps=this.depsTail=void 0,qi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nn(this)&&this.run()}get dirty(){return Nn(this)}}let ma=0,Ms,Bs;function ya(t,e=!1){if(t.flags|=8,e){t.next=Bs,Bs=t;return}t.next=Ms,Ms=t}function fi(){ma++}function pi(){if(--ma>0)return;if(Bs){let e=Bs;for(Bs=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Ms;){let e=Ms;for(Ms=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function wa(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ba(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),gi(r),Jc(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Nn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ea(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ea(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Js)||(t.globalVersion=Js,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Nn(t))))return;t.flags|=2;const e=t.dep,s=he,r=it;he=t,it=!0;try{wa(t);const n=t.fn(t._value);(e.version===0||Ut(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{he=s,it=r,ba(t),t.flags&=-3}}function gi(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)gi(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Jc(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let it=!0;const Sa=[];function Rt(){Sa.push(it),it=!1}function At(){const t=Sa.pop();it=t===void 0?!0:t}function qi(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=he;he=void 0;try{e()}finally{he=s}}}let Js=0;class Qc{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!he||!it||he===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==he)s=this.activeLink=new Qc(he,this),he.deps?(s.prevDep=he.depsTail,he.depsTail.nextDep=s,he.depsTail=s):he.deps=he.depsTail=s,Oa(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=he.depsTail,s.nextDep=void 0,he.depsTail.nextDep=s,he.depsTail=s,he.deps===s&&(he.deps=r)}return s}trigger(e){this.version++,Js++,this.notify(e)}notify(e){fi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{pi()}}}function Oa(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Oa(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Dn=new WeakMap,ss=Symbol(""),Un=Symbol(""),Qs=Symbol("");function ke(t,e,s){if(it&&he){let r=Dn.get(t);r||Dn.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new vi),n.map=r,n.key=s),n.track()}}function Et(t,e,s,r,n,i){const o=Dn.get(t);if(!o){Js++;return}const a=l=>{l&&l.trigger()};if(fi(),e==="clear")o.forEach(a);else{const l=W(t),c=l&&hi(s);if(l&&s==="length"){const u=Number(r);o.forEach((d,f)=>{(f==="length"||f===Qs||!pt(f)&&f>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(Qs)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ss)),_s(t)&&a(o.get(Un)));break;case"delete":l||(a(o.get(ss)),_s(t)&&a(o.get(Un)));break;case"set":_s(t)&&a(o.get(ss));break}}pi()}function os(t){const e=re(t);return e===t?e:(ke(e,"iterate",Qs),Qe(t)?e:e.map(Re))}function Zr(t){return ke(t=re(t),"iterate",Qs),t}const Yc={__proto__:null,[Symbol.iterator](){return gn(this,Symbol.iterator,Re)},concat(...t){return os(this).concat(...t.map(e=>W(e)?os(e):e))},entries(){return gn(this,"entries",t=>(t[1]=Re(t[1]),t))},every(t,e){return mt(this,"every",t,e,void 0,arguments)},filter(t,e){return mt(this,"filter",t,e,s=>s.map(Re),arguments)},find(t,e){return mt(this,"find",t,e,Re,arguments)},findIndex(t,e){return mt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mt(this,"findLast",t,e,Re,arguments)},findLastIndex(t,e){return mt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mt(this,"forEach",t,e,void 0,arguments)},includes(...t){return vn(this,"includes",t)},indexOf(...t){return vn(this,"indexOf",t)},join(t){return os(this).join(t)},lastIndexOf(...t){return vn(this,"lastIndexOf",t)},map(t,e){return mt(this,"map",t,e,void 0,arguments)},pop(){return js(this,"pop")},push(...t){return js(this,"push",t)},reduce(t,...e){return Hi(this,"reduce",t,e)},reduceRight(t,...e){return Hi(this,"reduceRight",t,e)},shift(){return js(this,"shift")},some(t,e){return mt(this,"some",t,e,void 0,arguments)},splice(...t){return js(this,"splice",t)},toReversed(){return os(this).toReversed()},toSorted(t){return os(this).toSorted(t)},toSpliced(...t){return os(this).toSpliced(...t)},unshift(...t){return js(this,"unshift",t)},values(){return gn(this,"values",Re)}};function gn(t,e,s){const r=Zr(t),n=r[e]();return r!==t&&!Qe(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.done||(i.value=s(i.value)),i}),n}const Xc=Array.prototype;function mt(t,e,s,r,n,i){const o=Zr(t),a=o!==t&&!Qe(t),l=o[e];if(l!==Xc[e]){const d=l.apply(t,i);return a?Re(d):d}let c=s;o!==t&&(a?c=function(d,f){return s.call(this,Re(d),f,t)}:s.length>2&&(c=function(d,f){return s.call(this,d,f,t)}));const u=l.call(o,c,r);return a&&n?n(u):u}function Hi(t,e,s,r){const n=Zr(t);let i=s;return n!==t&&(Qe(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,Re(a),l,t)}),n[e](i,...r)}function vn(t,e,s){const r=re(t);ke(r,"iterate",Qs);const n=r[e](...s);return(n===-1||n===!1)&&yi(s[0])?(s[0]=re(s[0]),r[e](...s)):n}function js(t,e,s=[]){Rt(),fi();const r=re(t)[e].apply(t,s);return pi(),At(),r}const Zc=ci("__proto__,__v_isRef,__isVue"),Ta=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(pt));function eu(t){pt(t)||(t=String(t));const e=re(this);return ke(e,"has",t),e.hasOwnProperty(t)}class Ra{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?uu:Pa:i?Ca:ka).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=W(e);if(!n){let l;if(o&&(l=Yc[s]))return l;if(s==="hasOwnProperty")return eu}const a=Reflect.get(e,s,Ie(e)?e:r);if((pt(s)?Ta.has(s):Zc(s))||(n||ke(e,"get",s),i))return a;if(Ie(a)){const l=o&&hi(s)?a:a.value;return n&&ce(l)?Mn(l):l}return ce(a)?n?Mn(a):en(a):a}}class Aa extends Ra{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const l=Lt(i);if(!Qe(r)&&!Lt(r)&&(i=re(i),r=re(r)),!W(e)&&Ie(i)&&!Ie(r))return l||(i.value=r),!0}const o=W(e)&&hi(s)?Number(s)<e.length:ne(e,s),a=Reflect.set(e,s,r,Ie(e)?e:n);return e===re(n)&&(o?Ut(r,i)&&Et(e,"set",s,r):Et(e,"add",s,r)),a}deleteProperty(e,s){const r=ne(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&Et(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!pt(s)||!Ta.has(s))&&ke(e,"has",s),r}ownKeys(e){return ke(e,"iterate",W(e)?"length":ss),Reflect.ownKeys(e)}}class tu extends Ra{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const su=new Aa,ru=new tu,nu=new Aa(!0);const Ln=t=>t,ur=t=>Reflect.getPrototypeOf(t);function iu(t,e,s){return function(...r){const n=this.__v_raw,i=re(n),o=_s(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=n[t](...r),u=s?Ln:e?kr:Re;return!e&&ke(i,"iterate",l?Un:ss),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function dr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ou(t,e){const s={get(n){const i=this.__v_raw,o=re(i),a=re(n);t||(Ut(n,a)&&ke(o,"get",n),ke(o,"get",a));const{has:l}=ur(o),c=e?Ln:t?kr:Re;if(l.call(o,n))return c(i.get(n));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&ke(re(n),"iterate",ss),n.size},has(n){const i=this.__v_raw,o=re(i),a=re(n);return t||(Ut(n,a)&&ke(o,"has",n),ke(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=re(a),c=e?Ln:t?kr:Re;return!t&&ke(l,"iterate",ss),a.forEach((u,d)=>n.call(i,c(u),c(d),o))}};return Oe(s,t?{add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear")}:{add(n){!e&&!Qe(n)&&!Lt(n)&&(n=re(n));const i=re(this);return ur(i).has.call(i,n)||(i.add(n),Et(i,"add",n,n)),this},set(n,i){!e&&!Qe(i)&&!Lt(i)&&(i=re(i));const o=re(this),{has:a,get:l}=ur(o);let c=a.call(o,n);c||(n=re(n),c=a.call(o,n));const u=l.call(o,n);return o.set(n,i),c?Ut(i,u)&&Et(o,"set",n,i):Et(o,"add",n,i),this},delete(n){const i=re(this),{has:o,get:a}=ur(i);let l=o.call(i,n);l||(n=re(n),l=o.call(i,n)),a&&a.call(i,n);const c=i.delete(n);return l&&Et(i,"delete",n,void 0),c},clear(){const n=re(this),i=n.size!==0,o=n.clear();return i&&Et(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=iu(n,t,e)}),s}function _i(t,e){const s=ou(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(ne(s,n)&&n in r?s:r,n,i)}const au={get:_i(!1,!1)},lu={get:_i(!1,!0)},cu={get:_i(!0,!1)};const ka=new WeakMap,Ca=new WeakMap,Pa=new WeakMap,uu=new WeakMap;function du(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hu(t){return t.__v_skip||!Object.isExtensible(t)?0:du(Dc(t))}function en(t){return Lt(t)?t:mi(t,!1,su,au,ka)}function Ia(t){return mi(t,!1,nu,lu,Ca)}function Mn(t){return mi(t,!0,ru,cu,Pa)}function mi(t,e,s,r,n){if(!ce(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=hu(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function ms(t){return Lt(t)?ms(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function Qe(t){return!!(t&&t.__v_isShallow)}function yi(t){return t?!!t.__v_raw:!1}function re(t){const e=t&&t.__v_raw;return e?re(e):t}function fu(t){return!ne(t,"__v_skip")&&Object.isExtensible(t)&&fa(t,"__v_skip",!0),t}const Re=t=>ce(t)?en(t):t,kr=t=>ce(t)?Mn(t):t;function Ie(t){return t?t.__v_isRef===!0:!1}function pu(t){return xa(t,!1)}function gu(t){return xa(t,!0)}function xa(t,e){return Ie(t)?t:new vu(t,e)}class vu{constructor(e,s){this.dep=new vi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:re(e),this._value=s?e:Re(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||Qe(e)||Lt(e);e=r?e:re(e),Ut(e,s)&&(this._rawValue=e,this._value=r?e:Re(e),this.dep.trigger())}}function ys(t){return Ie(t)?t.value:t}const _u={get:(t,e,s)=>e==="__v_raw"?t:ys(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return Ie(n)&&!Ie(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function ja(t){return ms(t)?t:new Proxy(t,_u)}class mu{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new vi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Js-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&he!==this)return ya(this,!0),!0}get value(){const e=this.dep.track();return Ea(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function yu(t,e,s=!1){let r,n;return Q(t)?r=t:(r=t.get,n=t.set),new mu(r,n,s)}const hr={},Cr=new WeakMap;let zt;function wu(t,e=!1,s=zt){if(s){let r=Cr.get(s);r||Cr.set(s,r=[]),r.push(t)}}function bu(t,e,s=ae){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,c=R=>n?R:Qe(R)||n===!1||n===0?St(R,1):St(R);let u,d,f,p,_=!1,y=!1;if(Ie(t)?(d=()=>t.value,_=Qe(t)):ms(t)?(d=()=>c(t),_=!0):W(t)?(y=!0,_=t.some(R=>ms(R)||Qe(R)),d=()=>t.map(R=>{if(Ie(R))return R.value;if(ms(R))return c(R);if(Q(R))return l?l(R,2):R()})):Q(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Rt();try{f()}finally{At()}}const R=zt;zt=u;try{return l?l(t,3,[p]):t(p)}finally{zt=R}}:d=nt,e&&n){const R=d,q=n===!0?1/0:n;d=()=>St(R(),q)}const w=zc(),T=()=>{u.stop(),w&&w.active&&di(w.effects,u)};if(i&&e){const R=e;e=(...q)=>{R(...q),T()}}let S=y?new Array(t.length).fill(hr):hr;const b=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(e){const q=u.run();if(n||_||(y?q.some((z,J)=>Ut(z,S[J])):Ut(q,S))){f&&f();const z=zt;zt=u;try{const J=[q,S===hr?void 0:y&&S[0]===hr?[]:S,p];S=q,l?l(e,3,J):e(...J)}finally{zt=z}}}else u.run()};return a&&a(b),u=new _a(d),u.scheduler=o?()=>o(b,!1):b,p=R=>wu(R,!1,u),f=u.onStop=()=>{const R=Cr.get(u);if(R){if(l)l(R,4);else for(const q of R)q();Cr.delete(u)}},e?r?b(!0):S=u.run():o?o(b.bind(null,!0),!0):u.run(),T.pause=u.pause.bind(u),T.resume=u.resume.bind(u),T.stop=T,T}function St(t,e=1/0,s){if(e<=0||!ce(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,Ie(t))St(t.value,e,s);else if(W(t))for(let r=0;r<t.length;r++)St(t[r],e,s);else if(Wr(t)||_s(t))t.forEach(r=>{St(r,e,s)});else if(ha(t)){for(const r in t)St(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&St(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function or(t,e,s,r){try{return r?t(...r):t()}catch(n){tn(n,e,s)}}function gt(t,e,s,r){if(Q(t)){const n=or(t,e,s,r);return n&&ua(n)&&n.catch(i=>{tn(i,e,s)}),n}if(W(t)){const n=[];for(let i=0;i<t.length;i++)n.push(gt(t[i],e,s,r));return n}}function tn(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ae;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){Rt(),or(i,null,10,[t,l,c]),At();return}}Eu(t,s,n,r,o)}function Eu(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const $e=[];let ht=-1;const ws=[];let jt=null,hs=0;const $a=Promise.resolve();let Pr=null;function wi(t){const e=Pr||$a;return t?e.then(this?t.bind(this):t):e}function Su(t){let e=ht+1,s=$e.length;for(;e<s;){const r=e+s>>>1,n=$e[r],i=Ys(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function bi(t){if(!(t.flags&1)){const e=Ys(t),s=$e[$e.length-1];!s||!(t.flags&2)&&e>=Ys(s)?$e.push(t):$e.splice(Su(e),0,t),t.flags|=1,Na()}}function Na(){Pr||(Pr=$a.then(Ua))}function Ou(t){W(t)?ws.push(...t):jt&&t.id===-1?jt.splice(hs+1,0,t):t.flags&1||(ws.push(t),t.flags|=1),Na()}function Ki(t,e,s=ht+1){for(;s<$e.length;s++){const r=$e[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;$e.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Da(t){if(ws.length){const e=[...new Set(ws)].sort((s,r)=>Ys(s)-Ys(r));if(ws.length=0,jt){jt.push(...e);return}for(jt=e,hs=0;hs<jt.length;hs++){const s=jt[hs];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}jt=null,hs=0}}const Ys=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ua(t){const e=nt;try{for(ht=0;ht<$e.length;ht++){const s=$e[ht];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),or(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ht<$e.length;ht++){const s=$e[ht];s&&(s.flags&=-2)}ht=-1,$e.length=0,Da(),Pr=null,($e.length||ws.length)&&Ua()}}let Ke=null,La=null;function Ir(t){const e=Ke;return Ke=t,La=t&&t.type.__scopeId||null,e}function st(t,e=Ke,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&$r(-1);const i=Ir(e);let o;try{o=t(...n)}finally{Ir(i),r._d&&$r(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Xs(t,e){if(Ke===null)return t;const s=on(Ke),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=ae]=e[n];i&&(Q(i)&&(i={mounted:i,updated:i}),i.deep&&St(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ht(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Rt(),gt(l,s,8,[t.el,a,t,e]),At())}}const Tu=Symbol("_vte"),Ru=t=>t.__isTeleport,Au=Symbol("_leaveCb");function Ei(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ei(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ma(t,e){return Q(t)?(()=>Oe({name:t.name},e,{setup:t}))():t}function Ba(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const xr=new WeakMap;function Vs(t,e,s,r,n=!1){if(W(t)){t.forEach((_,y)=>Vs(_,e&&(W(e)?e[y]:e),s,r,n));return}if(Fs(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Vs(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?on(r.component):r.el,o=n?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ae?a.refs={}:a.refs,d=a.setupState,f=re(d),p=d===ae?ca:_=>ne(f,_);if(c!=null&&c!==l){if(Wi(e),me(c))u[c]=null,p(c)&&(d[c]=null);else if(Ie(c)){c.value=null;const _=e;_.k&&(u[_.k]=null)}}if(Q(l))or(l,a,12,[o,u]);else{const _=me(l),y=Ie(l);if(_||y){const w=()=>{if(t.f){const T=_?p(l)?d[l]:u[l]:l.value;if(n)W(T)&&di(T,i);else if(W(T))T.includes(i)||T.push(i);else if(_)u[l]=[i],p(l)&&(d[l]=u[l]);else{const S=[i];l.value=S,t.k&&(u[t.k]=S)}}else _?(u[l]=o,p(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const T=()=>{w(),xr.delete(t)};T.id=-1,xr.set(t,T),Ve(T,s)}else Wi(t),w()}}}function Wi(t){const e=xr.get(t);e&&(e.flags|=8,xr.delete(t))}Qr().requestIdleCallback;Qr().cancelIdleCallback;const Fs=t=>!!t.type.__asyncLoader,Va=t=>t.type.__isKeepAlive;function ku(t,e){Fa(t,"a",e)}function Cu(t,e){Fa(t,"da",e)}function Fa(t,e,s=Pe){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(sn(e,r,s),s){let n=s.parent;for(;n&&n.parent;)Va(n.parent.vnode)&&Pu(r,e,s,n),n=n.parent}}function Pu(t,e,s,r){const n=sn(e,t,r,!0);qa(()=>{di(r[e],n)},s)}function sn(t,e,s=Pe,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Rt();const a=ar(s),l=gt(e,s,t,o);return a(),At(),l});return r?n.unshift(i):n.push(i),i}}const kt=t=>(e,s=Pe)=>{(!er||t==="sp")&&sn(t,(...r)=>e(...r),s)},Iu=kt("bm"),xu=kt("m"),ju=kt("bu"),$u=kt("u"),Nu=kt("bum"),qa=kt("um"),Du=kt("sp"),Uu=kt("rtg"),Lu=kt("rtc");function Mu(t,e=Pe){sn("ec",t,e)}const Ha="components";function qs(t,e){return Vu(Ha,t,!0,e)||t}const Bu=Symbol.for("v-ndc");function Vu(t,e,s=!0,r=!1){const n=Ke||Pe;if(n){const i=n.type;if(t===Ha){const a=Id(i,!1);if(a&&(a===e||a===Ye(e)||a===zr(Ye(e))))return i}const o=Gi(n[t]||i[t],e)||Gi(n.appContext[t],e);return!o&&r?i:o}}function Gi(t,e){return t&&(t[e]||t[Ye(e)]||t[zr(Ye(e))])}function Ge(t,e,s,r){let n;const i=s&&s[r],o=W(t);if(o||me(t)){const a=o&&ms(t);let l=!1,c=!1;a&&(l=!Qe(t),c=Lt(t),t=Zr(t)),n=new Array(t.length);for(let u=0,d=t.length;u<d;u++)n[u]=e(l?c?kr(Re(t[u])):Re(t[u]):t[u],u,void 0,i&&i[u])}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i&&i[a])}else if(ce(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i&&i[l]));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];n[l]=e(t[u],u,l,i&&i[l])}}else n=[];return s&&(s[r]=n),n}const Bn=t=>t?cl(t)?on(t):Bn(t.parent):null,Hs=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bn(t.parent),$root:t=>Bn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Si(t),$forceUpdate:t=>t.f||(t.f=()=>{bi(t.update)}),$nextTick:t=>t.n||(t.n=wi.bind(t.proxy)),$watch:t=>ld.bind(t)}),_n=(t,e)=>t!==ae&&!t.__isScriptSetup&&ne(t,e),Fu={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(_n(r,e))return o[e]=1,r[e];if(n!==ae&&ne(n,e))return o[e]=2,n[e];if((c=t.propsOptions[0])&&ne(c,e))return o[e]=3,i[e];if(s!==ae&&ne(s,e))return o[e]=4,s[e];Vn&&(o[e]=0)}}const u=Hs[e];let d,f;if(u)return e==="$attrs"&&ke(t.attrs,"get",""),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(s!==ae&&ne(s,e))return o[e]=4,s[e];if(f=l.config.globalProperties,ne(f,e))return f[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return _n(n,e)?(n[e]=s,!0):r!==ae&&ne(r,e)?(r[e]=s,!0):ne(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i,type:o}},a){let l,c;return!!(s[a]||t!==ae&&a[0]!=="$"&&ne(t,a)||_n(e,a)||(l=i[0])&&ne(l,a)||ne(r,a)||ne(Hs,a)||ne(n.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ne(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function zi(t){return W(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let Vn=!0;function qu(t){const e=Si(t),s=t.proxy,r=t.ctx;Vn=!1,e.beforeCreate&&Ji(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:_,activated:y,deactivated:w,beforeDestroy:T,beforeUnmount:S,destroyed:b,unmounted:R,render:q,renderTracked:z,renderTriggered:J,errorCaptured:ye,serverPrefetch:Ee,expose:at,inheritAttrs:Ct,components:Ft,directives:lt,filters:Is}=e;if(c&&Hu(c,r,null),o)for(const oe in o){const ee=o[oe];Q(ee)&&(r[oe]=ee.bind(s))}if(n){const oe=n.call(s,s);ce(oe)&&(t.data=en(oe))}if(Vn=!0,i)for(const oe in i){const ee=i[oe],_t=Q(ee)?ee.bind(s,s):Q(ee.get)?ee.get.bind(s,s):nt,Pt=!Q(ee)&&Q(ee.set)?ee.set.bind(s):nt,ct=rt({get:_t,set:Pt});Object.defineProperty(r,oe,{enumerable:!0,configurable:!0,get:()=>ct.value,set:De=>ct.value=De})}if(a)for(const oe in a)Ka(a[oe],r,s,oe);if(l){const oe=Q(l)?l.call(s):l;Reflect.ownKeys(oe).forEach(ee=>{Sr(ee,oe[ee])})}u&&Ji(u,t,"c");function Se(oe,ee){W(ee)?ee.forEach(_t=>oe(_t.bind(s))):ee&&oe(ee.bind(s))}if(Se(Iu,d),Se(xu,f),Se(ju,p),Se($u,_),Se(ku,y),Se(Cu,w),Se(Mu,ye),Se(Lu,z),Se(Uu,J),Se(Nu,S),Se(qa,R),Se(Du,Ee),W(at))if(at.length){const oe=t.exposed||(t.exposed={});at.forEach(ee=>{Object.defineProperty(oe,ee,{get:()=>s[ee],set:_t=>s[ee]=_t,enumerable:!0})})}else t.exposed||(t.exposed={});q&&t.render===nt&&(t.render=q),Ct!=null&&(t.inheritAttrs=Ct),Ft&&(t.components=Ft),lt&&(t.directives=lt),Ee&&Ba(t)}function Hu(t,e,s=nt){W(t)&&(t=Fn(t));for(const r in t){const n=t[r];let i;ce(n)?"default"in n?i=Ot(n.from||r,n.default,!0):i=Ot(n.from||r):i=Ot(n),Ie(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Ji(t,e,s){gt(W(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function Ka(t,e,s,r){let n=r.includes(".")?nl(s,r):()=>s[r];if(me(t)){const i=e[t];Q(i)&&Or(n,i)}else if(Q(t))Or(n,t.bind(s));else if(ce(t))if(W(t))t.forEach(i=>Ka(i,e,s,r));else{const i=Q(t.handler)?t.handler.bind(s):e[t.handler];Q(i)&&Or(n,i,t)}}function Si(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(c=>jr(l,c,o,!0)),jr(l,e,o)),ce(e)&&i.set(e,l),l}function jr(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&jr(t,i,s,!0),n&&n.forEach(o=>jr(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=Ku[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Ku={data:Qi,props:Yi,emits:Yi,methods:Ds,computed:Ds,beforeCreate:xe,created:xe,beforeMount:xe,mounted:xe,beforeUpdate:xe,updated:xe,beforeDestroy:xe,beforeUnmount:xe,destroyed:xe,unmounted:xe,activated:xe,deactivated:xe,errorCaptured:xe,serverPrefetch:xe,components:Ds,directives:Ds,watch:Gu,provide:Qi,inject:Wu};function Qi(t,e){return e?t?function(){return Oe(Q(t)?t.call(this,this):t,Q(e)?e.call(this,this):e)}:e:t}function Wu(t,e){return Ds(Fn(t),Fn(e))}function Fn(t){if(W(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function xe(t,e){return t?[...new Set([].concat(t,e))]:e}function Ds(t,e){return t?Oe(Object.create(null),t,e):e}function Yi(t,e){return t?W(t)&&W(e)?[...new Set([...t,...e])]:Oe(Object.create(null),zi(t),zi(e??{})):e}function Gu(t,e){if(!t)return e;if(!e)return t;const s=Oe(Object.create(null),t);for(const r in e)s[r]=xe(t[r],e[r]);return s}function Wa(){return{app:null,config:{isNativeTag:ca,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zu=0;function Ju(t,e){return function(r,n=null){Q(r)||(r=Oe({},r)),n!=null&&!ce(n)&&(n=null);const i=Wa(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:zu++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:jd,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Q(u.install)?(o.add(u),u.install(c,...d)):Q(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const p=c._ceVNode||le(r,n);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),d&&e?e(p,u):t(p,u,f),l=!0,c._container=u,u.__vue_app__=c,on(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(gt(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=bs;bs=c;try{return u()}finally{bs=d}}};return c}}let bs=null;function Sr(t,e){if(Pe){let s=Pe.provides;const r=Pe.parent&&Pe.parent.provides;r===s&&(s=Pe.provides=Object.create(r)),s[t]=e}}function Ot(t,e,s=!1){const r=Rd();if(r||bs){let n=bs?bs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&Q(e)?e.call(r&&r.proxy):e}}const Ga={},za=()=>Object.create(Ga),Ja=t=>Object.getPrototypeOf(t)===Ga;function Qu(t,e,s,r=!1){const n={},i=za();t.propsDefaults=Object.create(null),Qa(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Ia(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function Yu(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=re(n),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(rn(t.emitsOptions,f))continue;const p=e[f];if(l)if(ne(i,f))p!==i[f]&&(i[f]=p,c=!0);else{const _=Ye(f);n[_]=qn(l,a,_,p,t,!1)}else p!==i[f]&&(i[f]=p,c=!0)}}}else{Qa(t,e,n,i)&&(c=!0);let u;for(const d in a)(!e||!ne(e,d)&&((u=Bt(d))===d||!ne(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(n[d]=qn(l,a,d,void 0,t,!0)):delete n[d]);if(i!==a)for(const d in i)(!e||!ne(e,d))&&(delete i[d],c=!0)}c&&Et(t.attrs,"set","")}function Qa(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ls(l))continue;const c=e[l];let u;n&&ne(n,u=Ye(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:rn(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=re(s),c=a||ae;for(let u=0;u<i.length;u++){const d=i[u];s[d]=qn(n,l,d,c[d],t,!ne(c,d))}}return o}function qn(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=ne(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Q(l)){const{propsDefaults:c}=n;if(s in c)r=c[s];else{const u=ar(n);r=c[s]=l.call(null,e),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Bt(s))&&(r=!0))}return r}const Xu=new WeakMap;function Ya(t,e,s=!1){const r=s?Xu:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!Q(t)){const u=d=>{l=!0;const[f,p]=Ya(d,e,!0);Oe(o,f),p&&a.push(...p)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ce(t)&&r.set(t,vs),vs;if(W(i))for(let u=0;u<i.length;u++){const d=Ye(i[u]);Xi(d)&&(o[d]=ae)}else if(i)for(const u in i){const d=Ye(u);if(Xi(d)){const f=i[u],p=o[d]=W(f)||Q(f)?{type:f}:Oe({},f),_=p.type;let y=!1,w=!0;if(W(_))for(let T=0;T<_.length;++T){const S=_[T],b=Q(S)&&S.name;if(b==="Boolean"){y=!0;break}else b==="String"&&(w=!1)}else y=Q(_)&&_.name==="Boolean";p[0]=y,p[1]=w,(y||ne(p,"default"))&&a.push(d)}}const c=[o,a];return ce(t)&&r.set(t,c),c}function Xi(t){return t[0]!=="$"&&!Ls(t)}const Oi=t=>t==="_"||t==="_ctx"||t==="$stable",Ti=t=>W(t)?t.map(ft):[ft(t)],Zu=(t,e,s)=>{if(e._n)return e;const r=st((...n)=>Ti(e(...n)),s);return r._c=!1,r},Xa=(t,e,s)=>{const r=t._ctx;for(const n in t){if(Oi(n))continue;const i=t[n];if(Q(i))e[n]=Zu(n,i,r);else if(i!=null){const o=Ti(i);e[n]=()=>o}}},Za=(t,e)=>{const s=Ti(e);t.slots.default=()=>s},el=(t,e,s)=>{for(const r in e)(s||!Oi(r))&&(t[r]=e[r])},ed=(t,e,s)=>{const r=t.slots=za();if(t.vnode.shapeFlag&32){const n=e._;n?(el(r,e,s),s&&fa(r,"_",n,!0)):Xa(e,r)}else e&&Za(t,e)},td=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=ae;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:el(n,e,s):(i=!e.$stable,Xa(e,n)),o=e}else e&&(Za(t,e),o={default:1});if(i)for(const a in n)!Oi(a)&&o[a]==null&&delete n[a]},Ve=vd;function sd(t){return rd(t)}function rd(t,e){const s=Qr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=nt,insertStaticContent:_}=t,y=(g,v,m,A=null,E=null,k=null,x=void 0,I=null,P=!!v.dynamicChildren)=>{if(g===v)return;g&&!$s(g,v)&&(A=O(g),De(g,E,k,!0),g=null),v.patchFlag===-2&&(P=!1,v.dynamicChildren=null);const{type:C,ref:H,shapeFlag:$}=v;switch(C){case nn:w(g,v,m,A);break;case Mt:T(g,v,m,A);break;case Tr:g==null&&S(v,m,A,x);break;case ve:Ft(g,v,m,A,E,k,x,I,P);break;default:$&1?q(g,v,m,A,E,k,x,I,P):$&6?lt(g,v,m,A,E,k,x,I,P):($&64||$&128)&&C.process(g,v,m,A,E,k,x,I,P,F)}H!=null&&E?Vs(H,g&&g.ref,k,v||g,!v):H==null&&g&&g.ref!=null&&Vs(g.ref,null,k,g,!0)},w=(g,v,m,A)=>{if(g==null)r(v.el=a(v.children),m,A);else{const E=v.el=g.el;v.children!==g.children&&c(E,v.children)}},T=(g,v,m,A)=>{g==null?r(v.el=l(v.children||""),m,A):v.el=g.el},S=(g,v,m,A)=>{[g.el,g.anchor]=_(g.children,v,m,A,g.el,g.anchor)},b=({el:g,anchor:v},m,A)=>{let E;for(;g&&g!==v;)E=f(g),r(g,m,A),g=E;r(v,m,A)},R=({el:g,anchor:v})=>{let m;for(;g&&g!==v;)m=f(g),n(g),g=m;n(v)},q=(g,v,m,A,E,k,x,I,P)=>{if(v.type==="svg"?x="svg":v.type==="math"&&(x="mathml"),g==null)z(v,m,A,E,k,x,I,P);else{const C=g.el&&g.el._isVueCE?g.el:null;try{C&&C._beginPatch(),Ee(g,v,E,k,x,I,P)}finally{C&&C._endPatch()}}},z=(g,v,m,A,E,k,x,I)=>{let P,C;const{props:H,shapeFlag:$,transition:V,dirs:G}=g;if(P=g.el=o(g.type,k,H&&H.is,H),$&8?u(P,g.children):$&16&&ye(g.children,P,null,A,E,mn(g,k),x,I),G&&Ht(g,null,A,"created"),J(P,g,g.scopeId,x,A),H){for(const ue in H)ue!=="value"&&!Ls(ue)&&i(P,ue,null,H[ue],k,A);"value"in H&&i(P,"value",null,H.value,k),(C=H.onVnodeBeforeMount)&&dt(C,A,g)}G&&Ht(g,null,A,"beforeMount");const X=nd(E,V);X&&V.beforeEnter(P),r(P,v,m),((C=H&&H.onVnodeMounted)||X||G)&&Ve(()=>{C&&dt(C,A,g),X&&V.enter(P),G&&Ht(g,null,A,"mounted")},E)},J=(g,v,m,A,E)=>{if(m&&p(g,m),A)for(let k=0;k<A.length;k++)p(g,A[k]);if(E){let k=E.subTree;if(v===k||ol(k.type)&&(k.ssContent===v||k.ssFallback===v)){const x=E.vnode;J(g,x,x.scopeId,x.slotScopeIds,E.parent)}}},ye=(g,v,m,A,E,k,x,I,P=0)=>{for(let C=P;C<g.length;C++){const H=g[C]=I?$t(g[C]):ft(g[C]);y(null,H,v,m,A,E,k,x,I)}},Ee=(g,v,m,A,E,k,x)=>{const I=v.el=g.el;let{patchFlag:P,dynamicChildren:C,dirs:H}=v;P|=g.patchFlag&16;const $=g.props||ae,V=v.props||ae;let G;if(m&&Kt(m,!1),(G=V.onVnodeBeforeUpdate)&&dt(G,m,v,g),H&&Ht(v,g,m,"beforeUpdate"),m&&Kt(m,!0),($.innerHTML&&V.innerHTML==null||$.textContent&&V.textContent==null)&&u(I,""),C?at(g.dynamicChildren,C,I,m,A,mn(v,E),k):x||ee(g,v,I,null,m,A,mn(v,E),k,!1),P>0){if(P&16)Ct(I,$,V,m,E);else if(P&2&&$.class!==V.class&&i(I,"class",null,V.class,E),P&4&&i(I,"style",$.style,V.style,E),P&8){const X=v.dynamicProps;for(let ue=0;ue<X.length;ue++){const ie=X[ue],Ue=$[ie],Ae=V[ie];(Ae!==Ue||ie==="value")&&i(I,ie,Ue,Ae,E,m)}}P&1&&g.children!==v.children&&u(I,v.children)}else!x&&C==null&&Ct(I,$,V,m,E);((G=V.onVnodeUpdated)||H)&&Ve(()=>{G&&dt(G,m,v,g),H&&Ht(v,g,m,"updated")},A)},at=(g,v,m,A,E,k,x)=>{for(let I=0;I<v.length;I++){const P=g[I],C=v[I],H=P.el&&(P.type===ve||!$s(P,C)||P.shapeFlag&198)?d(P.el):m;y(P,C,H,null,A,E,k,x,!0)}},Ct=(g,v,m,A,E)=>{if(v!==m){if(v!==ae)for(const k in v)!Ls(k)&&!(k in m)&&i(g,k,v[k],null,E,A);for(const k in m){if(Ls(k))continue;const x=m[k],I=v[k];x!==I&&k!=="value"&&i(g,k,I,x,E,A)}"value"in m&&i(g,"value",v.value,m.value,E)}},Ft=(g,v,m,A,E,k,x,I,P)=>{const C=v.el=g?g.el:a(""),H=v.anchor=g?g.anchor:a("");let{patchFlag:$,dynamicChildren:V,slotScopeIds:G}=v;G&&(I=I?I.concat(G):G),g==null?(r(C,m,A),r(H,m,A),ye(v.children||[],m,H,E,k,x,I,P)):$>0&&$&64&&V&&g.dynamicChildren?(at(g.dynamicChildren,V,m,E,k,x,I),(v.key!=null||E&&v===E.subTree)&&tl(g,v,!0)):ee(g,v,m,H,E,k,x,I,P)},lt=(g,v,m,A,E,k,x,I,P)=>{v.slotScopeIds=I,g==null?v.shapeFlag&512?E.ctx.activate(v,m,A,x,P):Is(v,m,A,E,k,x,P):rs(g,v,P)},Is=(g,v,m,A,E,k,x)=>{const I=g.component=Td(g,A,E);if(Va(g)&&(I.ctx.renderer=F),Ad(I,!1,x),I.asyncDep){if(E&&E.registerDep(I,Se,x),!g.el){const P=I.subTree=le(Mt);T(null,P,v,m),g.placeholder=P.el}}else Se(I,g,v,m,E,k,x)},rs=(g,v,m)=>{const A=v.component=g.component;if(pd(g,v,m))if(A.asyncDep&&!A.asyncResolved){oe(A,v,m);return}else A.next=v,A.update();else v.el=g.el,A.vnode=v},Se=(g,v,m,A,E,k,x)=>{const I=()=>{if(g.isMounted){let{next:$,bu:V,u:G,parent:X,vnode:ue}=g;{const Me=sl(g);if(Me){$&&($.el=ue.el,oe(g,$,x)),Me.asyncDep.then(()=>{g.isUnmounted||I()});return}}let ie=$,Ue;Kt(g,!1),$?($.el=ue.el,oe(g,$,x)):$=ue,V&&Er(V),(Ue=$.props&&$.props.onVnodeBeforeUpdate)&&dt(Ue,X,$,ue),Kt(g,!0);const Ae=yn(g),Xe=g.subTree;g.subTree=Ae,y(Xe,Ae,d(Xe.el),O(Xe),g,E,k),$.el=Ae.el,ie===null&&gd(g,Ae.el),G&&Ve(G,E),(Ue=$.props&&$.props.onVnodeUpdated)&&Ve(()=>dt(Ue,X,$,ue),E)}else{let $;const{el:V,props:G}=v,{bm:X,m:ue,parent:ie,root:Ue,type:Ae}=g,Xe=Fs(v);if(Kt(g,!1),X&&Er(X),!Xe&&($=G&&G.onVnodeBeforeMount)&&dt($,ie,v),Kt(g,!0),V&&fe){const Me=()=>{g.subTree=yn(g),fe(V,g.subTree,g,E,null)};Xe&&Ae.__asyncHydrate?Ae.__asyncHydrate(V,g,Me):Me()}else{Ue.ce&&Ue.ce._def.shadowRoot!==!1&&Ue.ce._injectChildStyle(Ae);const Me=g.subTree=yn(g);y(null,Me,m,A,g,E,k),v.el=Me.el}if(ue&&Ve(ue,E),!Xe&&($=G&&G.onVnodeMounted)){const Me=v;Ve(()=>dt($,ie,Me),E)}(v.shapeFlag&256||ie&&Fs(ie.vnode)&&ie.vnode.shapeFlag&256)&&g.a&&Ve(g.a,E),g.isMounted=!0,v=m=A=null}};g.scope.on();const P=g.effect=new _a(I);g.scope.off();const C=g.update=P.run.bind(P),H=g.job=P.runIfDirty.bind(P);H.i=g,H.id=g.uid,P.scheduler=()=>bi(H),Kt(g,!0),C()},oe=(g,v,m)=>{v.component=g;const A=g.vnode.props;g.vnode=v,g.next=null,Yu(g,v.props,A,m),td(g,v.children,m),Rt(),Ki(g),At()},ee=(g,v,m,A,E,k,x,I,P=!1)=>{const C=g&&g.children,H=g?g.shapeFlag:0,$=v.children,{patchFlag:V,shapeFlag:G}=v;if(V>0){if(V&128){Pt(C,$,m,A,E,k,x,I,P);return}else if(V&256){_t(C,$,m,A,E,k,x,I,P);return}}G&8?(H&16&&ze(C,E,k),$!==C&&u(m,$)):H&16?G&16?Pt(C,$,m,A,E,k,x,I,P):ze(C,E,k,!0):(H&8&&u(m,""),G&16&&ye($,m,A,E,k,x,I,P))},_t=(g,v,m,A,E,k,x,I,P)=>{g=g||vs,v=v||vs;const C=g.length,H=v.length,$=Math.min(C,H);let V;for(V=0;V<$;V++){const G=v[V]=P?$t(v[V]):ft(v[V]);y(g[V],G,m,null,E,k,x,I,P)}C>H?ze(g,E,k,!0,!1,$):ye(v,m,A,E,k,x,I,P,$)},Pt=(g,v,m,A,E,k,x,I,P)=>{let C=0;const H=v.length;let $=g.length-1,V=H-1;for(;C<=$&&C<=V;){const G=g[C],X=v[C]=P?$t(v[C]):ft(v[C]);if($s(G,X))y(G,X,m,null,E,k,x,I,P);else break;C++}for(;C<=$&&C<=V;){const G=g[$],X=v[V]=P?$t(v[V]):ft(v[V]);if($s(G,X))y(G,X,m,null,E,k,x,I,P);else break;$--,V--}if(C>$){if(C<=V){const G=V+1,X=G<H?v[G].el:A;for(;C<=V;)y(null,v[C]=P?$t(v[C]):ft(v[C]),m,X,E,k,x,I,P),C++}}else if(C>V)for(;C<=$;)De(g[C],E,k,!0),C++;else{const G=C,X=C,ue=new Map;for(C=X;C<=V;C++){const Be=v[C]=P?$t(v[C]):ft(v[C]);Be.key!=null&&ue.set(Be.key,C)}let ie,Ue=0;const Ae=V-X+1;let Xe=!1,Me=0;const xs=new Array(Ae);for(C=0;C<Ae;C++)xs[C]=0;for(C=G;C<=$;C++){const Be=g[C];if(Ue>=Ae){De(Be,E,k,!0);continue}let ut;if(Be.key!=null)ut=ue.get(Be.key);else for(ie=X;ie<=V;ie++)if(xs[ie-X]===0&&$s(Be,v[ie])){ut=ie;break}ut===void 0?De(Be,E,k,!0):(xs[ut-X]=C+1,ut>=Me?Me=ut:Xe=!0,y(Be,v[ut],m,null,E,k,x,I,P),Ue++)}const Li=Xe?id(xs):vs;for(ie=Li.length-1,C=Ae-1;C>=0;C--){const Be=X+C,ut=v[Be],Mi=v[Be+1],Bi=Be+1<H?Mi.el||Mi.placeholder:A;xs[C]===0?y(null,ut,m,Bi,E,k,x,I,P):Xe&&(ie<0||C!==Li[ie]?ct(ut,m,Bi,2):ie--)}}},ct=(g,v,m,A,E=null)=>{const{el:k,type:x,transition:I,children:P,shapeFlag:C}=g;if(C&6){ct(g.component.subTree,v,m,A);return}if(C&128){g.suspense.move(v,m,A);return}if(C&64){x.move(g,v,m,F);return}if(x===ve){r(k,v,m);for(let $=0;$<P.length;$++)ct(P[$],v,m,A);r(g.anchor,v,m);return}if(x===Tr){b(g,v,m);return}if(A!==2&&C&1&&I)if(A===0)I.beforeEnter(k),r(k,v,m),Ve(()=>I.enter(k),E);else{const{leave:$,delayLeave:V,afterLeave:G}=I,X=()=>{g.ctx.isUnmounted?n(k):r(k,v,m)},ue=()=>{k._isLeaving&&k[Au](!0),$(k,()=>{X(),G&&G()})};V?V(k,X,ue):ue()}else r(k,v,m)},De=(g,v,m,A=!1,E=!1)=>{const{type:k,props:x,ref:I,children:P,dynamicChildren:C,shapeFlag:H,patchFlag:$,dirs:V,cacheIndex:G}=g;if($===-2&&(E=!1),I!=null&&(Rt(),Vs(I,null,m,g,!0),At()),G!=null&&(v.renderCache[G]=void 0),H&256){v.ctx.deactivate(g);return}const X=H&1&&V,ue=!Fs(g);let ie;if(ue&&(ie=x&&x.onVnodeBeforeUnmount)&&dt(ie,v,g),H&6)qt(g.component,m,A);else{if(H&128){g.suspense.unmount(m,A);return}X&&Ht(g,null,v,"beforeUnmount"),H&64?g.type.remove(g,v,m,F,A):C&&!C.hasOnce&&(k!==ve||$>0&&$&64)?ze(C,v,m,!1,!0):(k===ve&&$&384||!E&&H&16)&&ze(P,v,m),A&&ns(g)}(ue&&(ie=x&&x.onVnodeUnmounted)||X)&&Ve(()=>{ie&&dt(ie,v,g),X&&Ht(g,null,v,"unmounted")},m)},ns=g=>{const{type:v,el:m,anchor:A,transition:E}=g;if(v===ve){is(m,A);return}if(v===Tr){R(g);return}const k=()=>{n(m),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(g.shapeFlag&1&&E&&!E.persisted){const{leave:x,delayLeave:I}=E,P=()=>x(m,k);I?I(g.el,k,P):P()}else k()},is=(g,v)=>{let m;for(;g!==v;)m=f(g),n(g),g=m;n(v)},qt=(g,v,m)=>{const{bum:A,scope:E,job:k,subTree:x,um:I,m:P,a:C}=g;Zi(P),Zi(C),A&&Er(A),E.stop(),k&&(k.flags|=8,De(x,g,v,m)),I&&Ve(I,v),Ve(()=>{g.isUnmounted=!0},v)},ze=(g,v,m,A=!1,E=!1,k=0)=>{for(let x=k;x<g.length;x++)De(g[x],v,m,A,E)},O=g=>{if(g.shapeFlag&6)return O(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const v=f(g.anchor||g.el),m=v&&v[Tu];return m?f(m):v};let D=!1;const j=(g,v,m)=>{g==null?v._vnode&&De(v._vnode,null,null,!0):y(v._vnode||null,g,v,null,null,null,m),v._vnode=g,D||(D=!0,Ki(),Da(),D=!1)},F={p:y,um:De,m:ct,r:ns,mt:Is,mc:ye,pc:ee,pbc:at,n:O,o:t};let Y,fe;return e&&([Y,fe]=e(F)),{render:j,hydrate:Y,createApp:Ju(j,Y)}}function mn({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function Kt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function nd(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function tl(t,e,s=!1){const r=t.children,n=e.children;if(W(r)&&W(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=$t(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&tl(o,a)),a.type===nn&&a.patchFlag!==-1&&(a.el=o.el),a.type===Mt&&!a.el&&(a.el=o.el)}}function id(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(n=s[s.length-1],t[n]<c){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function sl(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:sl(e)}function Zi(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const od=Symbol.for("v-scx"),ad=()=>Ot(od);function Or(t,e,s){return rl(t,e,s)}function rl(t,e,s=ae){const{immediate:r,deep:n,flush:i,once:o}=s,a=Oe({},s),l=e&&r||!e&&i!=="post";let c;if(er){if(i==="sync"){const p=ad();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=nt,p.resume=nt,p.pause=nt,p}}const u=Pe;a.call=(p,_,y)=>gt(p,u,_,y);let d=!1;i==="post"?a.scheduler=p=>{Ve(p,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,_)=>{_?p():bi(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const f=bu(t,e,a);return er&&(c?c.push(f):l&&f()),f}function ld(t,e,s){const r=this.proxy,n=me(t)?t.includes(".")?nl(r,t):()=>r[t]:t.bind(r,r);let i;Q(e)?i=e:(i=e.handler,s=e);const o=ar(this),a=rl(n,i.bind(r),s);return o(),a}function nl(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const cd=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ye(e)}Modifiers`]||t[`${Bt(e)}Modifiers`];function ud(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||ae;let n=s;const i=e.startsWith("update:"),o=i&&cd(r,e.slice(7));o&&(o.trim&&(n=s.map(u=>me(u)?u.trim():u)),o.number&&(n=s.map(Jr)));let a,l=r[a=hn(e)]||r[a=hn(Ye(e))];!l&&i&&(l=r[a=hn(Bt(e))]),l&&gt(l,t,6,n);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,gt(c,t,6,n)}}const dd=new WeakMap;function il(t,e,s=!1){const r=s?dd:e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!Q(t)){const l=c=>{const u=il(c,e,!0);u&&(a=!0,Oe(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ce(t)&&r.set(t,null),null):(W(i)?i.forEach(l=>o[l]=null):Oe(o,i),ce(t)&&r.set(t,o),o)}function rn(t,e){return!t||!Kr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ne(t,e[0].toLowerCase()+e.slice(1))||ne(t,Bt(e))||ne(t,e))}function yn(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:_,inheritAttrs:y}=t,w=Ir(t);let T,S;try{if(s.shapeFlag&4){const R=n||r,q=R;T=ft(c.call(q,R,u,d,p,f,_)),S=a}else{const R=e;T=ft(R.length>1?R(d,{attrs:a,slots:o,emit:l}):R(d,null)),S=e.props?a:hd(a)}}catch(R){Ks.length=0,tn(R,t,1),T=le(Mt)}let b=T;if(S&&y!==!1){const R=Object.keys(S),{shapeFlag:q}=b;R.length&&q&7&&(i&&R.some(ui)&&(S=fd(S,i)),b=Os(b,S,!1,!0))}return s.dirs&&(b=Os(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&Ei(b,s.transition),T=b,Ir(w),T}const hd=t=>{let e;for(const s in t)(s==="class"||s==="style"||Kr(s))&&((e||(e={}))[s]=t[s]);return e},fd=(t,e)=>{const s={};for(const r in t)(!ui(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function pd(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?eo(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!rn(c,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?eo(r,o,c):!0:!!o;return!1}function eo(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!rn(s,i))return!0}return!1}function gd({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const ol=t=>t.__isSuspense;function vd(t,e){e&&e.pendingBranch?W(t)?e.effects.push(...t):e.effects.push(t):Ou(t)}const ve=Symbol.for("v-fgt"),nn=Symbol.for("v-txt"),Mt=Symbol.for("v-cmt"),Tr=Symbol.for("v-stc"),Ks=[];let We=null;function U(t=!1){Ks.push(We=t?null:[])}function _d(){Ks.pop(),We=Ks[Ks.length-1]||null}let Zs=1;function $r(t,e=!1){Zs+=t,t<0&&We&&e&&(We.hasOnce=!0)}function al(t){return t.dynamicChildren=Zs>0?We||vs:null,_d(),Zs>0&&We&&We.push(t),t}function M(t,e,s,r,n,i){return al(h(t,e,s,r,n,i,!0))}function md(t,e,s,r,n){return al(le(t,e,s,r,n,!0))}function Nr(t){return t?t.__v_isVNode===!0:!1}function $s(t,e){return t.type===e.type&&t.key===e.key}const ll=({key:t})=>t??null,Rr=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?me(t)||Ie(t)||Q(t)?{i:Ke,r:t,k:e,f:!!s}:t:null);function h(t,e=null,s=null,r=0,n=null,i=t===ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ll(e),ref:e&&Rr(e),scopeId:La,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ke};return a?(Ri(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=me(s)?8:16),Zs>0&&!o&&We&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&We.push(l),l}const le=yd;function yd(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===Bu)&&(t=Mt),Nr(t)){const a=Os(t,e,!0);return s&&Ri(a,s),Zs>0&&!i&&We&&(a.shapeFlag&6?We[We.indexOf(t)]=a:We.push(a)),a.patchFlag=-2,a}if(xd(t)&&(t=t.__vccOpts),e){e=wd(e);let{class:a,style:l}=e;a&&!me(a)&&(e.class=Ce(a)),ce(l)&&(yi(l)&&!W(l)&&(l=Oe({},l)),e.style=Yr(l))}const o=me(t)?1:ol(t)?128:Ru(t)?64:ce(t)?4:Q(t)?2:0;return h(t,e,s,r,n,o,i,!0)}function wd(t){return t?yi(t)||Ja(t)?Oe({},t):t:null}function Os(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?Ed(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ll(c),ref:e&&e.ref?s&&i?W(i)?i.concat(Rr(e)):[i,Rr(e)]:Rr(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ve?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Os(t.ssContent),ssFallback:t.ssFallback&&Os(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ei(u,l.clone(u)),u}function Z(t=" ",e=0){return le(nn,null,t,e)}function bd(t,e){const s=le(Tr,null,t);return s.staticCount=e,s}function Tt(t="",e=!1){return e?(U(),md(Mt,null,t)):le(Mt,null,t)}function ft(t){return t==null||typeof t=="boolean"?le(Mt):W(t)?le(ve,null,t.slice()):Nr(t)?$t(t):le(nn,null,String(t))}function $t(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Os(t)}function Ri(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(W(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),Ri(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!Ja(e)?e._ctx=Ke:n===3&&Ke&&(Ke.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Q(e)?(e={default:e,_ctx:Ke},s=32):(e=String(e),r&64?(s=16,e=[Z(e)]):s=8);t.children=e,t.shapeFlag|=s}function Ed(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=Ce([e.class,r.class]));else if(n==="style")e.style=Yr([e.style,r.style]);else if(Kr(n)){const i=e[n],o=r[n];o&&i!==o&&!(W(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function dt(t,e,s,r=null){gt(t,e,7,[s,r])}const Sd=Wa();let Od=0;function Td(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||Sd,i={uid:Od++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ya(r,n),emitsOptions:il(r,n),emit:null,emitted:null,propsDefaults:ae,inheritAttrs:r.inheritAttrs,ctx:ae,data:ae,props:ae,attrs:ae,slots:ae,refs:ae,setupState:ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ud.bind(null,i),t.ce&&t.ce(i),i}let Pe=null;const Rd=()=>Pe||Ke;let Dr,Hn;{const t=Qr(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};Dr=e("__VUE_INSTANCE_SETTERS__",s=>Pe=s),Hn=e("__VUE_SSR_SETTERS__",s=>er=s)}const ar=t=>{const e=Pe;return Dr(t),t.scope.on(),()=>{t.scope.off(),Dr(e)}},to=()=>{Pe&&Pe.scope.off(),Dr(null)};function cl(t){return t.vnode.shapeFlag&4}let er=!1;function Ad(t,e=!1,s=!1){e&&Hn(e);const{props:r,children:n}=t.vnode,i=cl(t);Qu(t,r,i,e),ed(t,n,s||e);const o=i?kd(t,e):void 0;return e&&Hn(!1),o}function kd(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Fu);const{setup:r}=s;if(r){Rt();const n=t.setupContext=r.length>1?Pd(t):null,i=ar(t),o=or(r,t,0,[t.props,n]),a=ua(o);if(At(),i(),(a||t.sp)&&!Fs(t)&&Ba(t),a){if(o.then(to,to),e)return o.then(l=>{so(t,l,e)}).catch(l=>{tn(l,t,0)});t.asyncDep=o}else so(t,o,e)}else ul(t,e)}function so(t,e,s){Q(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ce(e)&&(t.setupState=ja(e)),ul(t,s)}let ro;function ul(t,e,s){const r=t.type;if(!t.render){if(!e&&ro&&!r.render){const n=r.template||Si(t).template;if(n){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Oe(Oe({isCustomElement:i,delimiters:a},o),l);r.render=ro(n,c)}}t.render=r.render||nt}{const n=ar(t);Rt();try{qu(t)}finally{At(),n()}}}const Cd={get(t,e){return ke(t,"get",""),t[e]}};function Pd(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Cd),slots:t.slots,emit:t.emit,expose:e}}function on(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ja(fu(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Hs)return Hs[s](t)},has(e,s){return s in e||s in Hs}})):t.proxy}function Id(t,e=!0){return Q(t)?t.displayName||t.name:t.name||e&&t.__name}function xd(t){return Q(t)&&"__vccOpts"in t}const rt=(t,e)=>yu(t,e,er);function dl(t,e,s){try{$r(-1);const r=arguments.length;return r===2?ce(e)&&!W(e)?Nr(e)?le(t,null,[e]):le(t,e):le(t,null,e):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&Nr(s)&&(s=[s]),le(t,e,s))}finally{$r(1)}}const jd="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kn;const no=typeof window<"u"&&window.trustedTypes;if(no)try{Kn=no.createPolicy("vue",{createHTML:t=>t})}catch{}const hl=Kn?t=>Kn.createHTML(t):t=>t,$d="http://www.w3.org/2000/svg",Nd="http://www.w3.org/1998/Math/MathML",wt=typeof document<"u"?document:null,io=wt&&wt.createElement("template"),Dd={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?wt.createElementNS($d,t):e==="mathml"?wt.createElementNS(Nd,t):s?wt.createElement(t,{is:s}):wt.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>wt.createTextNode(t),createComment:t=>wt.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wt.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{io.innerHTML=hl(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=io.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Ud=Symbol("_vtc");function Ld(t,e,s){const r=t[Ud];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const oo=Symbol("_vod"),Md=Symbol("_vsh"),Bd=Symbol(""),Vd=/(?:^|;)\s*display\s*:/;function Fd(t,e,s){const r=t.style,n=me(s);let i=!1;if(s&&!n){if(e)if(me(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Ar(r,a,"")}else for(const o in e)s[o]==null&&Ar(r,o,"");for(const o in s)o==="display"&&(i=!0),Ar(r,o,s[o])}else if(n){if(e!==s){const o=r[Bd];o&&(s+=";"+o),r.cssText=s,i=Vd.test(s)}}else e&&t.removeAttribute("style");oo in t&&(t[oo]=i?r.display:"",t[Md]&&(r.display="none"))}const ao=/\s*!important$/;function Ar(t,e,s){if(W(s))s.forEach(r=>Ar(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=qd(t,e);ao.test(s)?t.setProperty(Bt(r),s.replace(ao,""),"important"):t[r]=s}}const lo=["Webkit","Moz","ms"],wn={};function qd(t,e){const s=wn[e];if(s)return s;let r=Ye(e);if(r!=="filter"&&r in t)return wn[e]=r;r=zr(r);for(let n=0;n<lo.length;n++){const i=lo[n]+r;if(i in t)return wn[e]=i}return e}const co="http://www.w3.org/1999/xlink";function uo(t,e,s,r,n,i=Hc(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(co,e.slice(6,e.length)):t.setAttributeNS(co,e,s):s==null||i&&!pa(s)?t.removeAttribute(e):t.setAttribute(e,i?"":pt(s)?String(s):s)}function ho(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?hl(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=pa(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Qt(t,e,s,r){t.addEventListener(e,s,r)}function Hd(t,e,s,r){t.removeEventListener(e,s,r)}const fo=Symbol("_vei");function Kd(t,e,s,r,n=null){const i=t[fo]||(t[fo]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=Wd(e);if(r){const c=i[e]=Jd(r,n);Qt(t,a,c,l)}else o&&(Hd(t,a,o,l),i[e]=void 0)}}const po=/(?:Once|Passive|Capture)$/;function Wd(t){let e;if(po.test(t)){e={};let r;for(;r=t.match(po);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bt(t.slice(2)),e]}let bn=0;const Gd=Promise.resolve(),zd=()=>bn||(Gd.then(()=>bn=0),bn=Date.now());function Jd(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;gt(Qd(r,s.value),e,5,[r])};return s.value=t,s.attached=zd(),s}function Qd(t,e){if(W(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const go=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Yd=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?Ld(t,r,o):e==="style"?Fd(t,s,r):Kr(e)?ui(e)||Kd(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xd(t,e,r,o))?(ho(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&uo(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!me(r))?ho(t,Ye(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),uo(t,e,r,o))};function Xd(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&go(e)&&Q(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return go(e)&&me(s)?!1:e in t}const Ur=t=>{const e=t.props["onUpdate:modelValue"]||!1;return W(e)?s=>Er(e,s):e};function Zd(t){t.target.composing=!0}function vo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Es=Symbol("_assign");function _o(t,e,s){return e&&(t=t.trim()),s&&(t=Jr(t)),t}const an={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[Es]=Ur(n);const i=r||n.props&&n.props.type==="number";Qt(t,e?"change":"input",o=>{o.target.composing||t[Es](_o(t.value,s,i))}),(s||i)&&Qt(t,"change",()=>{t.value=_o(t.value,s,i)}),e||(Qt(t,"compositionstart",Zd),Qt(t,"compositionend",vo),Qt(t,"change",vo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[Es]=Ur(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Jr(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},eh={deep:!0,created(t,{value:e,modifiers:{number:s}},r){const n=Wr(e);Qt(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>s?Jr(Lr(o)):Lr(o));t[Es](t.multiple?n?new Set(i):i:i[0]),t._assigning=!0,wi(()=>{t._assigning=!1})}),t[Es]=Ur(r)},mounted(t,{value:e}){mo(t,e)},beforeUpdate(t,e,s){t[Es]=Ur(s)},updated(t,{value:e}){t._assigning||mo(t,e)}};function mo(t,e){const s=t.multiple,r=W(e);if(!(s&&!r&&!Wr(e))){for(let n=0,i=t.options.length;n<i;n++){const o=t.options[n],a=Lr(o);if(s)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=Wc(e,a)>-1}else o.selected=e.has(a);else if(Xr(Lr(o),e)){t.selectedIndex!==n&&(t.selectedIndex=n);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Lr(t){return"_value"in t?t._value:t.value}const th=["ctrl","shift","alt","meta"],sh={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>th.some(s=>t[`${s}Key`]&&!e.includes(s))},lr=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const a=sh[e[o]];if(a&&a(n,e))return}return t(n,...i)})},rh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fl=(t,e)=>{const s=t._withKeys||(t._withKeys={}),r=e.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=Bt(n.key);if(e.some(o=>o===i||rh[o]===i))return t(n)})},nh=Oe({patchProp:Yd},Dd);let yo;function ih(){return yo||(yo=sd(nh))}const oh=(...t)=>{const e=ih().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=lh(r);if(!n)return;const i=e._component;!Q(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,ah(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function ah(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function lh(t){return me(t)?document.querySelector(t):t}const vt=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},ch={name:"Navbar",data(){return{searchQuery:""}},methods:{handleSearch(){this.searchQuery.trim()&&this.$router.push(`/videos?search=${encodeURIComponent(this.searchQuery)}`)}}},uh={class:"navbar"},dh={class:"container"},hh={class:"nav-content"},fh={class:"logo"},ph={class:"nav-links"},gh={class:"nav-search"},vh={class:"search-box"};function _h(t,e,s,r,n,i){const o=qs("router-link");return U(),M("nav",uh,[h("div",dh,[h("div",hh,[h("div",fh,[le(o,{to:"/",class:"logo-link"},{default:st(()=>[...e[2]||(e[2]=[h("i",{class:"fas fa-music"},null,-1),h("span",null,"",-1)])]),_:1})]),h("div",ph,[le(o,{to:"/",class:"nav-link"},{default:st(()=>[...e[3]||(e[3]=[Z("",-1)])]),_:1}),le(o,{to:"/categories",class:"nav-link"},{default:st(()=>[...e[4]||(e[4]=[Z("",-1)])]),_:1}),le(o,{to:"/videos",class:"nav-link"},{default:st(()=>[...e[5]||(e[5]=[Z("",-1)])]),_:1}),le(o,{to:"/ai-chat",class:"nav-link"},{default:st(()=>[...e[6]||(e[6]=[Z("AI",-1)])]),_:1}),le(o,{to:"/about",class:"nav-link"},{default:st(()=>[...e[7]||(e[7]=[Z("",-1)])]),_:1})]),h("div",gh,[h("div",vh,[e[8]||(e[8]=h("i",{class:"fas fa-search search-icon"},null,-1)),Xs(h("input",{type:"text",class:"search-input",placeholder:"...","onUpdate:modelValue":e[0]||(e[0]=a=>n.searchQuery=a),onKeyup:e[1]||(e[1]=fl((...a)=>i.handleSearch&&i.handleSearch(...a),["enter"]))},null,544),[[an,n.searchQuery]])])])])])])}const mh=vt(ch,[["render",_h],["__scopeId","data-v-e36615ad"]]);const yh={name:"Footer"},wh={class:"footer"},bh={class:"container"},Eh={class:"footer-content"},Sh={class:"footer-section"};function Oh(t,e,s,r,n,i){const o=qs("router-link");return U(),M("footer",wh,[h("div",bh,[h("div",Eh,[e[5]||(e[5]=bd('<div class="footer-section" data-v-82254c51><h3 data-v-82254c51></h3><p data-v-82254c51></p><div class="social-links" data-v-82254c51><a href="#" class="social-link" data-v-82254c51><i class="fab fa-weixin" data-v-82254c51></i></a><a href="#" class="social-link" data-v-82254c51><i class="fab fa-weibo" data-v-82254c51></i></a><a href="#" class="social-link" data-v-82254c51><i class="fab fa-qq" data-v-82254c51></i></a></div></div>',1)),h("div",Sh,[e[4]||(e[4]=h("h4",null,"",-1)),h("ul",null,[h("li",null,[le(o,{to:"/"},{default:st(()=>[...e[0]||(e[0]=[Z("",-1)])]),_:1})]),h("li",null,[le(o,{to:"/categories"},{default:st(()=>[...e[1]||(e[1]=[Z("",-1)])]),_:1})]),h("li",null,[le(o,{to:"/videos"},{default:st(()=>[...e[2]||(e[2]=[Z("",-1)])]),_:1})]),h("li",null,[le(o,{to:"/about"},{default:st(()=>[...e[3]||(e[3]=[Z("",-1)])]),_:1})])])]),e[6]||(e[6]=h("div",{class:"footer-section"},[h("h4",null,""),h("ul",null,[h("li",null,[h("i",{class:"fas fa-envelope"}),Z(" contact@quyi.com")]),h("li",null,[h("i",{class:"fas fa-phone"}),Z(" 400-123-4567")]),h("li",null,[h("i",{class:"fas fa-map-marker-alt"}),Z(" ")])])],-1))]),e[7]||(e[7]=h("div",{class:"footer-bottom"},[h("p",null," 2025 . .")],-1))])])}const Th=vt(yh,[["render",Oh],["__scopeId","data-v-82254c51"]]);const Rh={name:"App",components:{Navbar:mh,Footer:Th}},Ah={id:"app"},kh={class:"main-content"};function Ch(t,e,s,r,n,i){const o=qs("Navbar"),a=qs("router-view"),l=qs("Footer");return U(),M("div",Ah,[le(o),h("main",kh,[le(a)]),le(l)])}const Ph=vt(Rh,[["render",Ch],["__scopeId","data-v-a7a43c4d"]]);/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const fs=typeof document<"u";function pl(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ih(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&pl(t.default)}const se=Object.assign;function En(t,e){const s={};for(const r in e){const n=e[r];s[r]=ot(n)?n.map(t):t(n)}return s}const Ws=()=>{},ot=Array.isArray;function wo(t,e){const s={};for(const r in t)s[r]=r in e?e[r]:t[r];return s}const gl=/#/g,xh=/&/g,jh=/\//g,$h=/=/g,Nh=/\?/g,vl=/\+/g,Dh=/%5B/g,Uh=/%5D/g,_l=/%5E/g,Lh=/%60/g,ml=/%7B/g,Mh=/%7C/g,yl=/%7D/g,Bh=/%20/g;function Ai(t){return t==null?"":encodeURI(""+t).replace(Mh,"|").replace(Dh,"[").replace(Uh,"]")}function Vh(t){return Ai(t).replace(ml,"{").replace(yl,"}").replace(_l,"^")}function Wn(t){return Ai(t).replace(vl,"%2B").replace(Bh,"+").replace(gl,"%23").replace(xh,"%26").replace(Lh,"`").replace(ml,"{").replace(yl,"}").replace(_l,"^")}function Fh(t){return Wn(t).replace($h,"%3D")}function qh(t){return Ai(t).replace(gl,"%23").replace(Nh,"%3F")}function Hh(t){return qh(t).replace(jh,"%2F")}function tr(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const Kh=/\/$/,Wh=t=>t.replace(Kh,"");function Sn(t,e,s="/"){let r,n={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,a>0?a:e.length),n=t(i.slice(1))),a>=0&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Qh(r??e,s),{fullPath:r+i+o,path:r,query:n,hash:tr(o)}}function Gh(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function bo(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function zh(t,e,s){const r=e.matched.length-1,n=s.matched.length-1;return r>-1&&r===n&&Ts(e.matched[r],s.matched[n])&&wl(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Ts(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function wl(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!Jh(t[s],e[s]))return!1;return!0}function Jh(t,e){return ot(t)?Eo(t,e):ot(e)?Eo(e,t):t===e}function Eo(t,e){return ot(e)?t.length===e.length&&t.every((s,r)=>s===e[r]):t.length===1&&t[0]===e}function Qh(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),r=t.split("/"),n=r[r.length-1];(n===".."||n===".")&&r.push("");let i=s.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const It={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Gn=function(t){return t.pop="pop",t.push="push",t}({}),On=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function Yh(t){if(!t)if(fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Wh(t)}const Xh=/^[^#]+#/;function Zh(t,e){return t.replace(Xh,"#")+e}function ef(t,e){const s=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-s.left-(e.left||0),top:r.top-s.top-(e.top||0)}}const ln=()=>({left:window.scrollX,top:window.scrollY});function tf(t){let e;if("el"in t){const s=t.el,r=typeof s=="string"&&s.startsWith("#"),n=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!n)return;e=ef(n,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function So(t,e){return(history.state?history.state.position-e:-1)+t}const zn=new Map;function sf(t,e){zn.set(t,e)}function rf(t){const e=zn.get(t);return zn.delete(t),e}function nf(t){return typeof t=="string"||t&&typeof t=="object"}function bl(t){return typeof t=="string"||typeof t=="symbol"}let ge=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const El=Symbol("");ge.MATCHER_NOT_FOUND+"",ge.NAVIGATION_GUARD_REDIRECT+"",ge.NAVIGATION_ABORTED+"",ge.NAVIGATION_CANCELLED+"",ge.NAVIGATION_DUPLICATED+"";function Rs(t,e){return se(new Error,{type:t,[El]:!0},e)}function yt(t,e){return t instanceof Error&&El in t&&(e==null||!!(t.type&e))}const of=["params","query","hash"];function af(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of of)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function lf(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const n=s[r].replace(vl," "),i=n.indexOf("="),o=tr(i<0?n:n.slice(0,i)),a=i<0?null:tr(n.slice(i+1));if(o in e){let l=e[o];ot(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function Oo(t){let e="";for(let s in t){const r=t[s];if(s=Fh(s),r==null){r!==void 0&&(e+=(e.length?"&":"")+s);continue}(ot(r)?r.map(n=>n&&Wn(n)):[r&&Wn(r)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+s,n!=null&&(e+="="+n))})}return e}function cf(t){const e={};for(const s in t){const r=t[s];r!==void 0&&(e[s]=ot(r)?r.map(n=>n==null?null:""+n):r==null?r:""+r)}return e}const uf=Symbol(""),To=Symbol(""),ki=Symbol(""),Sl=Symbol(""),Jn=Symbol("");function Ns(){let t=[];function e(r){return t.push(r),()=>{const n=t.indexOf(r);n>-1&&t.splice(n,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Nt(t,e,s,r,n,i=o=>o()){const o=r&&(r.enterCallbacks[n]=r.enterCallbacks[n]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Rs(ge.NAVIGATION_ABORTED,{from:s,to:e})):f instanceof Error?l(f):nf(f)?l(Rs(ge.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&r.enterCallbacks[n]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[n],e,s,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Tn(t,e,s,r,n=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(pl(l)){const c=(l.__vccOpts||l)[e];c&&i.push(Nt(c,s,r,o,a,n))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=Ih(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&Nt(f,s,r,o,a,n)()}))}}return i}function df(t,e){const s=[],r=[],n=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ts(c,a))?r.push(a):s.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ts(c,l))||n.push(l))}return[s,r,n]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let hf=()=>location.protocol+"//"+location.host;function Ol(t,e){const{pathname:s,search:r,hash:n}=e,i=t.indexOf("#");if(i>-1){let o=n.includes(t.slice(i))?t.slice(i).length:1,a=n.slice(o);return a[0]!=="/"&&(a="/"+a),bo(a,"")}return bo(s,t)+r+n}function ff(t,e,s,r){let n=[],i=[],o=null;const a=({state:f})=>{const p=Ol(t,location),_=s.value,y=e.value;let w=0;if(f){if(s.value=p,e.value=f,o&&o===_){o=null;return}w=y?f.position-y.position:0}else r(p);n.forEach(T=>{T(s.value,_,{delta:w,type:Gn.pop,direction:w?w>0?On.forward:On.back:On.unknown})})};function l(){o=s.value}function c(f){n.push(f);const p=()=>{const _=n.indexOf(f);_>-1&&n.splice(_,1)};return i.push(p),p}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(se({},f.state,{scroll:ln()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function Ro(t,e,s,r=!1,n=!1){return{back:t,current:e,forward:s,replaced:r,position:window.history.length,scroll:n?ln():null}}function pf(t){const{history:e,location:s}=window,r={value:Ol(t,s)},n={value:e.state};n.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?t:t.slice(d))+l:hf()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),n.value=c}catch(p){console.error(p),s[u?"replace":"assign"](f)}}function o(l,c){i(l,se({},e.state,Ro(n.value.back,l,n.value.forward,!0),c,{position:n.value.position}),!0),r.value=l}function a(l,c){const u=se({},n.value,e.state,{forward:l,scroll:ln()});i(u.current,u,!0),i(l,se({},Ro(r.value,l,null),{position:u.position+1},c),!1),r.value=l}return{location:r,state:n,push:a,replace:o}}function gf(t){t=Yh(t);const e=pf(t),s=ff(t,e.state,e.location,e.replace);function r(i,o=!0){o||s.pauseListeners(),history.go(i)}const n=se({location:"",base:t,go:r,createHref:Zh.bind(null,t)},e,s);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}let es=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var we=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(we||{});const vf={type:es.Static,value:""},_f=/[a-zA-Z0-9_]/;function mf(t){if(!t)return[[]];if(t==="/")return[[vf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${s})/"${c}": ${p}`)}let s=we.Static,r=s;const n=[];let i;function o(){i&&n.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(s===we.Static?i.push({type:es.Static,value:c}):s===we.Param||s===we.ParamRegExp||s===we.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:es.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==we.ParamRegExp){r=s,s=we.EscapeNext;continue}switch(s){case we.Static:l==="/"?(c&&d(),o()):l===":"?(d(),s=we.Param):f();break;case we.EscapeNext:f(),s=r;break;case we.Param:l==="("?s=we.ParamRegExp:_f.test(l)?f():(d(),s=we.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case we.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=we.ParamRegExpEnd:u+=l;break;case we.ParamRegExpEnd:d(),s=we.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===we.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}const Ao="[^/]+?",yf={sensitive:!1,strict:!1,start:!0,end:!0};var je=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(je||{});const wf=/[.+*?^${}()[\]/\\]/g;function bf(t,e){const s=se({},yf,e),r=[];let n=s.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[je.Root];s.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=je.Segment+(s.sensitive?je.BonusCaseSensitive:0);if(f.type===es.Static)d||(n+="/"),n+=f.value.replace(wf,"\\$&"),p+=je.Static;else if(f.type===es.Param){const{value:_,repeatable:y,optional:w,regexp:T}=f;i.push({name:_,repeatable:y,optional:w});const S=T||Ao;if(S!==Ao){p+=je.BonusCustomRegExp;try{`${S}`}catch(R){throw new Error(`Invalid custom RegExp for param "${_}" (${S}): `+R.message)}}let b=y?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;d||(b=w&&c.length<2?`(?:/${b})`:"/"+b),w&&(b+="?"),n+=b,p+=je.Dynamic,w&&(p+=je.BonusOptional),y&&(p+=je.BonusRepeatable),S===".*"&&(p+=je.BonusWildcard)}u.push(p)}r.push(u)}if(s.strict&&s.end){const c=r.length-1;r[c][r[c].length-1]+=je.BonusStrict}s.strict||(n+="/?"),s.end?n+="$":s.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,s.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",_=i[f-1];d[_.name]=p&&_.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===es.Static)u+=p.value;else if(p.type===es.Param){const{value:_,repeatable:y,optional:w}=p,T=_ in c?c[_]:"";if(ot(T)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const S=ot(T)?T.join("/"):T;if(!S)if(w)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);u+=S}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Ef(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=e[s]-t[s];if(r)return r;s++}return t.length<e.length?t.length===1&&t[0]===je.Static+je.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===je.Static+je.Segment?1:-1:0}function Tl(t,e){let s=0;const r=t.score,n=e.score;for(;s<r.length&&s<n.length;){const i=Ef(r[s],n[s]);if(i)return i;s++}if(Math.abs(n.length-r.length)===1){if(ko(r))return 1;if(ko(n))return-1}return n.length-r.length}function ko(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Sf={strict:!1,end:!0,sensitive:!1};function Of(t,e,s){const r=bf(mf(t.path),s),n=se(r,{record:t,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function Tf(t,e){const s=[],r=new Map;e=wo(Sf,e);function n(d){return r.get(d)}function i(d,f,p){const _=!p,y=Po(d);y.aliasOf=p&&p.record;const w=wo(e,d),T=[y];if("alias"in d){const R=typeof d.alias=="string"?[d.alias]:d.alias;for(const q of R)T.push(Po(se({},y,{components:p?p.record.components:y.components,path:q,aliasOf:p?p.record:y})))}let S,b;for(const R of T){const{path:q}=R;if(f&&q[0]!=="/"){const z=f.record.path,J=z[z.length-1]==="/"?"":"/";R.path=f.record.path+(q&&J+q)}if(S=Of(R,f,w),p?p.alias.push(S):(b=b||S,b!==S&&b.alias.push(S),_&&d.name&&!Io(S)&&o(d.name)),Rl(S)&&l(S),y.children){const z=y.children;for(let J=0;J<z.length;J++)i(z[J],S,p&&p.children[J])}p=p||S}return b?()=>{o(b)}:Ws}function o(d){if(bl(d)){const f=r.get(d);f&&(r.delete(d),s.splice(s.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=s.indexOf(d);f>-1&&(s.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return s}function l(d){const f=kf(d,s);s.splice(f,0,d),d.record.name&&!Io(d)&&r.set(d.record.name,d)}function c(d,f){let p,_={},y,w;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw Rs(ge.MATCHER_NOT_FOUND,{location:d});w=p.record.name,_=se(Co(f.params,p.keys.filter(b=>!b.optional).concat(p.parent?p.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&Co(d.params,p.keys.map(b=>b.name))),y=p.stringify(_)}else if(d.path!=null)y=d.path,p=s.find(b=>b.re.test(y)),p&&(_=p.parse(y),w=p.record.name);else{if(p=f.name?r.get(f.name):s.find(b=>b.re.test(f.path)),!p)throw Rs(ge.MATCHER_NOT_FOUND,{location:d,currentLocation:f});w=p.record.name,_=se({},f.params,d.params),y=p.stringify(_)}const T=[];let S=p;for(;S;)T.unshift(S.record),S=S.parent;return{name:w,path:y,params:_,matched:T,meta:Af(T)}}t.forEach(d=>i(d));function u(){s.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function Co(t,e){const s={};for(const r of e)r in t&&(s[r]=t[r]);return s}function Po(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Rf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Rf(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const r in t.components)e[r]=typeof s=="object"?s[r]:s;return e}function Io(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Af(t){return t.reduce((e,s)=>se(e,s.meta),{})}function kf(t,e){let s=0,r=e.length;for(;s!==r;){const i=s+r>>1;Tl(t,e[i])<0?r=i:s=i+1}const n=Cf(t);return n&&(r=e.lastIndexOf(n,r-1)),r}function Cf(t){let e=t;for(;e=e.parent;)if(Rl(e)&&Tl(t,e)===0)return e}function Rl({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function xo(t){const e=Ot(ki),s=Ot(Sl),r=rt(()=>{const l=ys(t.to);return e.resolve(l)}),n=rt(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=s.matched;if(!u||!d.length)return-1;const f=d.findIndex(Ts.bind(null,u));if(f>-1)return f;const p=jo(l[c-2]);return c>1&&jo(u)===p&&d[d.length-1].path!==p?d.findIndex(Ts.bind(null,l[c-2])):f}),i=rt(()=>n.value>-1&&$f(s.params,r.value.params)),o=rt(()=>n.value>-1&&n.value===s.matched.length-1&&wl(s.params,r.value.params));function a(l={}){if(jf(l)){const c=e[ys(t.replace)?"replace":"push"](ys(t.to)).catch(Ws);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:rt(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function Pf(t){return t.length===1?t[0]:t}const If=Ma({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xo,setup(t,{slots:e}){const s=en(xo(t)),{options:r}=Ot(ki),n=rt(()=>({[$o(t.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[$o(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&Pf(e.default(s));return t.custom?i:dl("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:n.value},i)}}}),xf=If;function jf(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $f(t,e){for(const s in e){const r=e[s],n=t[s];if(typeof r=="string"){if(r!==n)return!1}else if(!ot(n)||n.length!==r.length||r.some((i,o)=>i!==n[o]))return!1}return!0}function jo(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $o=(t,e,s)=>t??e??s,Nf=Ma({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const r=Ot(Jn),n=rt(()=>t.route||r.value),i=Ot(To,0),o=rt(()=>{let c=ys(i);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=rt(()=>n.value.matched[o.value]);Sr(To,rt(()=>o.value+1)),Sr(uf,a),Sr(Jn,n);const l=pu();return Or(()=>[l.value,a.value,t.name],([c,u,d],[f,p,_])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Ts(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=n.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return No(s.default,{Component:f,route:c});const p=d.props[u],_=p?p===!0?c.params:typeof p=="function"?p(c):p:null,w=dl(f,se({},_,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return No(s.default,{Component:w,route:c})||w}}});function No(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Df=Nf;function Uf(t){const e=Tf(t.routes,t),s=t.parseQuery||lf,r=t.stringifyQuery||Oo,n=t.history,i=Ns(),o=Ns(),a=Ns(),l=gu(It);let c=It;fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=En.bind(null,O=>""+O),d=En.bind(null,Hh),f=En.bind(null,tr);function p(O,D){let j,F;return bl(O)?(j=e.getRecordMatcher(O),F=D):F=O,e.addRoute(F,j)}function _(O){const D=e.getRecordMatcher(O);D&&e.removeRoute(D)}function y(){return e.getRoutes().map(O=>O.record)}function w(O){return!!e.getRecordMatcher(O)}function T(O,D){if(D=se({},D||l.value),typeof O=="string"){const v=Sn(s,O,D.path),m=e.resolve({path:v.path},D),A=n.createHref(v.fullPath);return se(v,m,{params:f(m.params),hash:tr(v.hash),redirectedFrom:void 0,href:A})}let j;if(O.path!=null)j=se({},O,{path:Sn(s,O.path,D.path).path});else{const v=se({},O.params);for(const m in v)v[m]==null&&delete v[m];j=se({},O,{params:d(v)}),D.params=d(D.params)}const F=e.resolve(j,D),Y=O.hash||"";F.params=u(f(F.params));const fe=Gh(r,se({},O,{hash:Vh(Y),path:F.path})),g=n.createHref(fe);return se({fullPath:fe,hash:Y,query:r===Oo?cf(O.query):O.query||{}},F,{redirectedFrom:void 0,href:g})}function S(O){return typeof O=="string"?Sn(s,O,l.value.path):se({},O)}function b(O,D){if(c!==O)return Rs(ge.NAVIGATION_CANCELLED,{from:D,to:O})}function R(O){return J(O)}function q(O){return R(se(S(O),{replace:!0}))}function z(O,D){const j=O.matched[O.matched.length-1];if(j&&j.redirect){const{redirect:F}=j;let Y=typeof F=="function"?F(O,D):F;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=S(Y):{path:Y},Y.params={}),se({query:O.query,hash:O.hash,params:Y.path!=null?{}:O.params},Y)}}function J(O,D){const j=c=T(O),F=l.value,Y=O.state,fe=O.force,g=O.replace===!0,v=z(j,F);if(v)return J(se(S(v),{state:typeof v=="object"?se({},Y,v.state):Y,force:fe,replace:g}),D||j);const m=j;m.redirectedFrom=D;let A;return!fe&&zh(r,F,j)&&(A=Rs(ge.NAVIGATION_DUPLICATED,{to:m,from:F}),ct(F,F,!0,!1)),(A?Promise.resolve(A):at(m,F)).catch(E=>yt(E)?yt(E,ge.NAVIGATION_GUARD_REDIRECT)?E:Pt(E):ee(E,m,F)).then(E=>{if(E){if(yt(E,ge.NAVIGATION_GUARD_REDIRECT))return J(se({replace:g},S(E.to),{state:typeof E.to=="object"?se({},Y,E.to.state):Y,force:fe}),D||m)}else E=Ft(m,F,!0,g,Y);return Ct(m,F,E),E})}function ye(O,D){const j=b(O,D);return j?Promise.reject(j):Promise.resolve()}function Ee(O){const D=is.values().next().value;return D&&typeof D.runWithContext=="function"?D.runWithContext(O):O()}function at(O,D){let j;const[F,Y,fe]=df(O,D);j=Tn(F.reverse(),"beforeRouteLeave",O,D);for(const v of F)v.leaveGuards.forEach(m=>{j.push(Nt(m,O,D))});const g=ye.bind(null,O,D);return j.push(g),ze(j).then(()=>{j=[];for(const v of i.list())j.push(Nt(v,O,D));return j.push(g),ze(j)}).then(()=>{j=Tn(Y,"beforeRouteUpdate",O,D);for(const v of Y)v.updateGuards.forEach(m=>{j.push(Nt(m,O,D))});return j.push(g),ze(j)}).then(()=>{j=[];for(const v of fe)if(v.beforeEnter)if(ot(v.beforeEnter))for(const m of v.beforeEnter)j.push(Nt(m,O,D));else j.push(Nt(v.beforeEnter,O,D));return j.push(g),ze(j)}).then(()=>(O.matched.forEach(v=>v.enterCallbacks={}),j=Tn(fe,"beforeRouteEnter",O,D,Ee),j.push(g),ze(j))).then(()=>{j=[];for(const v of o.list())j.push(Nt(v,O,D));return j.push(g),ze(j)}).catch(v=>yt(v,ge.NAVIGATION_CANCELLED)?v:Promise.reject(v))}function Ct(O,D,j){a.list().forEach(F=>Ee(()=>F(O,D,j)))}function Ft(O,D,j,F,Y){const fe=b(O,D);if(fe)return fe;const g=D===It,v=fs?history.state:{};j&&(F||g?n.replace(O.fullPath,se({scroll:g&&v&&v.scroll},Y)):n.push(O.fullPath,Y)),l.value=O,ct(O,D,j,g),Pt()}let lt;function Is(){lt||(lt=n.listen((O,D,j)=>{if(!qt.listening)return;const F=T(O),Y=z(F,qt.currentRoute.value);if(Y){J(se(Y,{replace:!0,force:!0}),F).catch(Ws);return}c=F;const fe=l.value;fs&&sf(So(fe.fullPath,j.delta),ln()),at(F,fe).catch(g=>yt(g,ge.NAVIGATION_ABORTED|ge.NAVIGATION_CANCELLED)?g:yt(g,ge.NAVIGATION_GUARD_REDIRECT)?(J(se(S(g.to),{force:!0}),F).then(v=>{yt(v,ge.NAVIGATION_ABORTED|ge.NAVIGATION_DUPLICATED)&&!j.delta&&j.type===Gn.pop&&n.go(-1,!1)}).catch(Ws),Promise.reject()):(j.delta&&n.go(-j.delta,!1),ee(g,F,fe))).then(g=>{g=g||Ft(F,fe,!1),g&&(j.delta&&!yt(g,ge.NAVIGATION_CANCELLED)?n.go(-j.delta,!1):j.type===Gn.pop&&yt(g,ge.NAVIGATION_ABORTED|ge.NAVIGATION_DUPLICATED)&&n.go(-1,!1)),Ct(F,fe,g)}).catch(Ws)}))}let rs=Ns(),Se=Ns(),oe;function ee(O,D,j){Pt(O);const F=Se.list();return F.length?F.forEach(Y=>Y(O,D,j)):console.error(O),Promise.reject(O)}function _t(){return oe&&l.value!==It?Promise.resolve():new Promise((O,D)=>{rs.add([O,D])})}function Pt(O){return oe||(oe=!O,Is(),rs.list().forEach(([D,j])=>O?j(O):D()),rs.reset()),O}function ct(O,D,j,F){const{scrollBehavior:Y}=t;if(!fs||!Y)return Promise.resolve();const fe=!j&&rf(So(O.fullPath,0))||(F||!j)&&history.state&&history.state.scroll||null;return wi().then(()=>Y(O,D,fe)).then(g=>g&&tf(g)).catch(g=>ee(g,O,D))}const De=O=>n.go(O);let ns;const is=new Set,qt={currentRoute:l,listening:!0,addRoute:p,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:w,getRoutes:y,resolve:T,options:t,push:R,replace:q,go:De,back:()=>De(-1),forward:()=>De(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Se.add,isReady:_t,install(O){O.component("RouterLink",xf),O.component("RouterView",Df),O.config.globalProperties.$router=qt,Object.defineProperty(O.config.globalProperties,"$route",{enumerable:!0,get:()=>ys(l)}),fs&&!ns&&l.value===It&&(ns=!0,R(n.location).catch(F=>{}));const D={};for(const F in It)Object.defineProperty(D,F,{get:()=>l.value[F],enumerable:!0});O.provide(ki,qt),O.provide(Sl,Ia(D)),O.provide(Jn,l);const j=O.unmount;is.add(O),O.unmount=function(){is.delete(O),is.size<1&&(c=It,lt&&lt(),lt=null,l.value=It,ns=!1,oe=!1),j()}}};function ze(O){return O.reduce((D,j)=>D.then(()=>Ee(j)),Promise.resolve())}return qt}var Qn=function(t,e){return Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,r){s.__proto__=r}||function(s,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(s[n]=r[n])},Qn(t,e)};function Al(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qn(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var Mr=function(){return Mr=Object.assign||function(e){for(var s,r=1,n=arguments.length;r<n;r++){s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},Mr.apply(this,arguments)};function ks(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s}function kl(t,e,s,r){var n=arguments.length,i=n<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,s):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(n<3?o(i):n>3?o(e,s,i):o(e,s))||i);return n>3&&i&&Object.defineProperty(e,s,i),i}function Cl(t,e){return function(s,r){e(s,r,t)}}function Pl(t,e,s,r,n,i){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),d,f=!1,p=s.length-1;p>=0;p--){var _={};for(var y in r)_[y]=y==="access"?{}:r[y];for(var y in r.access)_.access[y]=r.access[y];_.addInitializer=function(T){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(T||null))};var w=(0,s[p])(a==="accessor"?{get:u.get,set:u.set}:u[l],_);if(a==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=o(w.get))&&(u.get=d),(d=o(w.set))&&(u.set=d),(d=o(w.init))&&n.unshift(d)}else(d=o(w))&&(a==="field"?n.unshift(d):u[l]=d)}c&&Object.defineProperty(c,r.name,u),f=!0}function Il(t,e,s){for(var r=arguments.length>2,n=0;n<e.length;n++)s=r?e[n].call(t,s):e[n].call(t);return r?s:void 0}function xl(t){return typeof t=="symbol"?t:"".concat(t)}function jl(t,e,s){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}function $l(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function L(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):n(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function Nl(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,n,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(r=1,n&&(i=c[0]&2?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(u){c=[6,u],n=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var cn=Object.create?function(t,e,s,r){r===void 0&&(r=s);var n=Object.getOwnPropertyDescriptor(e,s);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,r,n)}:function(t,e,s,r){r===void 0&&(r=s),t[r]=e[s]};function Dl(t,e){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s)&&cn(e,t,s)}function Br(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],r=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ci(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var r=s.call(t),n,i=[],o;try{for(;(e===void 0||e-- >0)&&!(n=r.next()).done;)i.push(n.value)}catch(a){o={error:a}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(o)throw o.error}}return i}function Ul(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ci(arguments[e]));return t}function Ll(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<s;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,n++)r[n]=i[o];return r}function Ml(t,e,s){if(s||arguments.length===2)for(var r=0,n=e.length,i;r<n;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function As(t){return this instanceof As?(this.v=t,this):new As(t)}function Bl(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=s.apply(t,e||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),n[Symbol.asyncIterator]=function(){return this},n;function o(p){return function(_){return Promise.resolve(_).then(p,d)}}function a(p,_){r[p]&&(n[p]=function(y){return new Promise(function(w,T){i.push([p,y,w,T])>1||l(p,y)})},_&&(n[p]=_(n[p])))}function l(p,_){try{c(r[p](_))}catch(y){f(i[0][3],y)}}function c(p){p.value instanceof As?Promise.resolve(p.value.v).then(u,d):f(i[0][2],p)}function u(p){l("next",p)}function d(p){l("throw",p)}function f(p,_){p(_),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Vl(t){var e,s;return e={},r("next"),r("throw",function(n){throw n}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(n,i){e[n]=t[n]?function(o){return(s=!s)?{value:As(t[n](o)),done:!1}:i?i(o):o}:i}}function Fl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof Br=="function"?Br(t):t[Symbol.iterator](),s={},r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s);function r(i){s[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),n(a,l,o.done,o.value)})}}function n(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function ql(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Lf=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Yn=function(t){return Yn=Object.getOwnPropertyNames||function(e){var s=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[s.length]=r);return s},Yn(t)};function Hl(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s=Yn(t),r=0;r<s.length;r++)s[r]!=="default"&&cn(e,t,s[r]);return Lf(e,t),e}function Kl(t){return t&&t.__esModule?t:{default:t}}function Wl(t,e,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(t):r?r.value:e.get(t)}function Gl(t,e,s,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(t,s):n?n.value=s:e.set(t,s),s}function zl(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Jl(t,e,s){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,n;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],s&&(n=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");n&&(r=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:r,async:s})}else s&&t.stack.push({async:!0});return e}var Mf=typeof SuppressedError=="function"?SuppressedError:function(t,e,s){var r=new Error(s);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Ql(t){function e(i){t.error=t.hasError?new Mf(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var s,r=0;function n(){for(;s=t.stack.pop();)try{if(!s.async&&r===1)return r=0,t.stack.push(s),Promise.resolve().then(n);if(s.dispose){var i=s.dispose.call(s.value);if(s.async)return r|=2,Promise.resolve(i).then(n,function(o){return e(o),n()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function Yl(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,r,n,i,o){return r?e?".jsx":".js":n&&(!i||!o)?s:n+i+"."+o.toLowerCase()+"js"}):t}const Bf={__extends:Al,__assign:Mr,__rest:ks,__decorate:kl,__param:Cl,__esDecorate:Pl,__runInitializers:Il,__propKey:xl,__setFunctionName:jl,__metadata:$l,__awaiter:L,__generator:Nl,__createBinding:cn,__exportStar:Dl,__values:Br,__read:Ci,__spread:Ul,__spreadArrays:Ll,__spreadArray:Ml,__await:As,__asyncGenerator:Bl,__asyncDelegator:Vl,__asyncValues:Fl,__makeTemplateObject:ql,__importStar:Hl,__importDefault:Kl,__classPrivateFieldGet:Wl,__classPrivateFieldSet:Gl,__classPrivateFieldIn:zl,__addDisposableResource:Jl,__disposeResources:Ql,__rewriteRelativeImportExtension:Yl},Vf=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Jl,get __assign(){return Mr},__asyncDelegator:Vl,__asyncGenerator:Bl,__asyncValues:Fl,__await:As,__awaiter:L,__classPrivateFieldGet:Wl,__classPrivateFieldIn:zl,__classPrivateFieldSet:Gl,__createBinding:cn,__decorate:kl,__disposeResources:Ql,__esDecorate:Pl,__exportStar:Dl,__extends:Al,__generator:Nl,__importDefault:Kl,__importStar:Hl,__makeTemplateObject:ql,__metadata:$l,__param:Cl,__propKey:xl,__read:Ci,__rest:ks,__rewriteRelativeImportExtension:Yl,__runInitializers:Il,__setFunctionName:jl,__spread:Ul,__spreadArray:Ml,__spreadArrays:Ll,__values:Br,default:Bf},Symbol.toStringTag,{value:"Module"})),Ff=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Pi extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class qf extends Pi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Do extends Pi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Uo extends Pi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xn||(Xn={}));class Hf{constructor(e,{headers:s={},customFetch:r,region:n=Xn.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Ff(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return L(this,arguments,void 0,function*(s,r={}){var n;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const _=new URL(`${this.url}/${s}`);p&&p!=="any"&&(f["x-region"]=p,_.searchParams.set("forceFunctionRegion",p));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let w=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(w=o.signal,u.addEventListener("abort",()=>o.abort())):w=o.signal);const T=yield this.fetch(_.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:w}).catch(q=>{throw new qf(q)}),S=T.headers.get("x-relay-error");if(S&&S==="true")throw new Do(T);if(!T.ok)throw new Uo(T);let b=((n=T.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),R;return b==="application/json"?R=yield T.json():b==="application/octet-stream"||b==="application/pdf"?R=yield T.blob():b==="text/event-stream"?R=T:b==="multipart/form-data"?R=yield T.formData():R=yield T.text(),{data:R,error:null,response:T}}catch(a){return{data:null,error:a,response:a instanceof Uo||a instanceof Do?a.context:void 0}}finally{i&&clearTimeout(i)}})}}function Kf(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var Ne={};const Cs=Kf(Vf);var fr={},pr={},gr={},vr={},_r={},mr={},Lo;function Xl(){if(Lo)return mr;Lo=1,Object.defineProperty(mr,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return mr.default=t,mr}var Mo;function Zl(){if(Mo)return _r;Mo=1,Object.defineProperty(_r,"__esModule",{value:!0});const e=Cs.__importDefault(Xl());class s{constructor(n){var i,o;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(i=n.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=n.signal,this.isMaybeSingle=(o=n.isMaybeSingle)!==null&&o!==void 0?o:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,i){return this.headers=new Headers(this.headers),this.headers.set(n,i),this}then(n,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,d,f;let p=null,_=null,y=null,w=l.status,T=l.statusText;if(l.ok){if(this.method!=="HEAD"){const q=await l.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?_=q:_=JSON.parse(q))}const b=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),R=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");b&&R&&R.length>1&&(y=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(p={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,y=null,w=406,T="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const b=await l.text();try{p=JSON.parse(b),Array.isArray(p)&&l.status===404&&(_=[],p=null,w=200,T="OK")}catch{l.status===404&&b===""?(w=204,T="No Content"):p={message:b}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,w=200,T="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:_,count:y,status:w,statusText:T}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,d;return{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(u=l==null?void 0:l.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(d=l==null?void 0:l.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),a.then(n,i)}returns(){return this}overrideTypes(){return this}}return _r.default=s,_r}var Bo;function ec(){if(Bo)return vr;Bo=1,Object.defineProperty(vr,"__esModule",{value:!0});const e=Cs.__importDefault(Zl());class s extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(c,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[n?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return vr.default=s,vr}var Vo;function Ii(){if(Vo)return gr;Vo=1,Object.defineProperty(gr,"__esModule",{value:!0});const e=Cs.__importDefault(ec()),s=new RegExp("[,()]");class r extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&s.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return gr.default=r,gr}var Fo;function tc(){if(Fo)return pr;Fo=1,Object.defineProperty(pr,"__esModule",{value:!0});const e=Cs.__importDefault(Ii());class s{constructor(n,{headers:i={},schema:o,fetch:a}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(n,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(n??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(n,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return pr.default=s,pr}var qo;function Wf(){if(qo)return fr;qo=1,Object.defineProperty(fr,"__esModule",{value:!0});const t=Cs,e=t.__importDefault(tc()),s=t.__importDefault(Ii());class r{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new r(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${i}`);let p;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{f.searchParams.append(y,w)})):(d="POST",p=o);const _=new Headers(this.headers);return c&&_.set("Prefer",`count=${c}`),new s.default({method:d,url:f,headers:_,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return fr.default=r,fr}Object.defineProperty(Ne,"__esModule",{value:!0});var sc=Ne.PostgrestError=hc=Ne.PostgrestBuilder=uc=Ne.PostgrestTransformBuilder=lc=Ne.PostgrestFilterBuilder=oc=Ne.PostgrestQueryBuilder=nc=Ne.PostgrestClient=void 0;const Ps=Cs,rc=Ps.__importDefault(Wf());var nc=Ne.PostgrestClient=rc.default;const ic=Ps.__importDefault(tc());var oc=Ne.PostgrestQueryBuilder=ic.default;const ac=Ps.__importDefault(Ii());var lc=Ne.PostgrestFilterBuilder=ac.default;const cc=Ps.__importDefault(ec());var uc=Ne.PostgrestTransformBuilder=cc.default;const dc=Ps.__importDefault(Zl());var hc=Ne.PostgrestBuilder=dc.default;const fc=Ps.__importDefault(Xl());sc=Ne.PostgrestError=fc.default;var pc=Ne.default={PostgrestClient:rc.default,PostgrestQueryBuilder:ic.default,PostgrestFilterBuilder:ac.default,PostgrestTransformBuilder:cc.default,PostgrestBuilder:dc.default,PostgrestError:fc.default};const Gf=$c({__proto__:null,get PostgrestBuilder(){return hc},get PostgrestClient(){return nc},get PostgrestError(){return sc},get PostgrestFilterBuilder(){return lc},get PostgrestQueryBuilder(){return oc},get PostgrestTransformBuilder(){return uc},default:pc},[Ne]),{PostgrestClient:zf,PostgrestQueryBuilder:wy,PostgrestFilterBuilder:by,PostgrestTransformBuilder:Ey,PostgrestBuilder:Sy,PostgrestError:Oy}=pc||Gf;class Jf{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const r=s.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const r=this.getWebSocketConstructor();return new r(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Qf="2.81.1",Yf=`realtime-js/${Qf}`,gc="1.0.0",Xf="2.0.0",Ho=gc,Zn=1e4,Zf=1e3,ep=100;var Yt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yt||(Yt={}));var be;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(be||(be={}));var Je;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Je||(Je={}));var ei;(function(t){t.websocket="websocket"})(ei||(ei={}));var Xt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Xt||(Xt={}));class tp{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,s){if(this._isArrayBuffer(e.payload))return s(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:s,ref:r,event:n,topic:i,payload:o}=e,a=this.META_LENGTH+s.length+r.length+i.length+n.length,l=new ArrayBuffer(this.HEADER_LENGTH+a);let c=new DataView(l),u=0;c.setUint8(u++,this.KINDS.push),c.setUint8(u++,s.length),c.setUint8(u++,r.length),c.setUint8(u++,i.length),c.setUint8(u++,n.length),Array.from(s,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(r,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(i,f=>c.setUint8(u++,f.charCodeAt(0))),Array.from(n,f=>c.setUint8(u++,f.charCodeAt(0)));var d=new Uint8Array(l.byteLength+o.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(o),l.byteLength),d.buffer}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,r;const{join_ref:n,ref:i,topic:o}=e,a=e.payload.event,l=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0),c=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+a.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(u),f=0;d.setUint8(f++,this.KINDS.userBroadcastPush),d.setUint8(f++,n.length),d.setUint8(f++,i.length),d.setUint8(f++,o.length),d.setUint8(f++,a.length),d.setUint8(f++,this.BINARY_ENCODING),Array.from(n,_=>d.setUint8(f++,_.charCodeAt(0))),Array.from(i,_=>d.setUint8(f++,_.charCodeAt(0))),Array.from(o,_=>d.setUint8(f++,_.charCodeAt(0))),Array.from(a,_=>d.setUint8(f++,_.charCodeAt(0)));var p=new Uint8Array(u.byteLength+l.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(l),u.byteLength),p.buffer}_encodeJsonUserBroadcastPush(e){var s,r;const{join_ref:n,ref:i,topic:o}=e,a=e.payload.event,l=(r=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},u=new TextEncoder().encode(JSON.stringify(l)).buffer,d=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+i.length+o.length+a.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let p=new DataView(f),_=0;p.setUint8(_++,this.KINDS.userBroadcastPush),p.setUint8(_++,n.length),p.setUint8(_++,i.length),p.setUint8(_++,o.length),p.setUint8(_++,a.length),p.setUint8(_++,this.JSON_ENCODING),Array.from(n,w=>p.setUint8(_++,w.charCodeAt(0))),Array.from(i,w=>p.setUint8(_++,w.charCodeAt(0))),Array.from(o,w=>p.setUint8(_++,w.charCodeAt(0))),Array.from(a,w=>p.setUint8(_++,w.charCodeAt(0)));var y=new Uint8Array(f.byteLength+u.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(u),f.byteLength),y.buffer}decode(e,s){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return s(r)}if(typeof e=="string"){const r=JSON.parse(e),[n,i,o,a,l]=r;return s({join_ref:n,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),r=s.getUint8(0),n=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,s,n);case this.KINDS.reply:return this._decodeReply(e,s,n);case this.KINDS.broadcast:return this._decodeBroadcast(e,s,n);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,n)}}_decodePush(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3);let a=this.HEADER_LENGTH+this.META_LENGTH-1;const l=r.decode(e.slice(a,a+n));a=a+n;const c=r.decode(e.slice(a,a+i));a=a+i;const u=r.decode(e.slice(a,a+o));a=a+o;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{join_ref:l,ref:null,topic:c,event:u,payload:d}}_decodeReply(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+this.META_LENGTH;const c=r.decode(e.slice(l,l+n));l=l+n;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=r.decode(e.slice(l,l+a));l=l+a;const p=JSON.parse(r.decode(e.slice(l,e.byteLength))),_={status:f,response:p};return{join_ref:c,ref:u,topic:d,event:Je.reply,payload:_}}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{join_ref:null,ref:null,topic:a,event:l,payload:c}}_decodeUserBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+n));l=l+n;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,_={type:this.BROADCAST,event:u,payload:p};return o>0&&(_.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST,payload:_}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}}class vc{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var de;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(de||(de={}));const Ko=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=sp(o,t,e,n),i),{}):{}},sp=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?_c(i,o):ti(o)},_c=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return op(e,s)}switch(t){case de.bool:return rp(e);case de.float4:case de.float8:case de.int2:case de.int4:case de.int8:case de.numeric:case de.oid:return np(e);case de.json:case de.jsonb:return ip(e);case de.timestamp:return ap(e);case de.abstime:case de.date:case de.daterange:case de.int4range:case de.int8range:case de.money:case de.reltime:case de.text:case de.time:case de.timestamptz:case de.timetz:case de.tsrange:case de.tstzrange:return ti(e);default:return ti(e)}},ti=t=>t,rp=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},np=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},ip=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},op=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>_c(e,a))}return t},ap=t=>typeof t=="string"?t.replace(" ","T"):t,mc=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Rn{constructor(e,s,r={},n=Zn){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Wo;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Wo||(Wo={}));class Gs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Gs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Gs.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(w=>w.presence_ref),p=d.map(w=>w.presence_ref),_=u.filter(w=>p.indexOf(w.presence_ref)<0),y=d.filter(w=>f.indexOf(w.presence_ref)<0);_.length>0&&(a[c]=_),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,n(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Go;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Go||(Go={}));var zs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zs||(zs={}));var bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(bt||(bt={}));class xi{constructor(e,s={config:{}},r){var n,i;if(this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Rn(this,Je.join,this.params,this.timeout),this.rejoinTimer=new vc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=be.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Je.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Gs(this),this.broadcastEndpointURL=mc(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==be.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&n!==void 0?n:[],u=!!this.bindings[zs.PRESENCE]&&this.bindings[zs.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(bt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(bt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:p})=>{var _;if(this.socket.setAuth(),p===void 0){e==null||e(bt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(_=y==null?void 0:y.length)!==null&&_!==void 0?_:0,T=[];for(let S=0;S<w;S++){const b=y[S],{filter:{event:R,schema:q,table:z,filter:J}}=b,ye=p&&p[S];if(ye&&ye.event===R&&ye.schema===q&&ye.table===z&&ye.filter===J)T.push(Object.assign(Object.assign({},b),{id:ye.id}));else{this.unsubscribe(),this.state=be.errored,e==null||e(bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(bt.SUBSCRIBED);return}}).receive("error",p=>{this.state=be.errored,e==null||e(bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this.state===be.joined&&e===zs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,r)}async httpSend(e,s,r={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=c.body)===null||n===void 0?void 0:n.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=be.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Je.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Rn(this,Je.leave,{},e),r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=be.closed,this.bindings={}}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Rn(this,e,s,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ep){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Je;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,s,r);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(p=>{var _,y,w;return((_=p.filter)===null||_===void 0?void 0:_.event)==="*"||((w=(y=p.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var _,y,w,T,S,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const R=p.id,q=(_=p.filter)===null||_===void 0?void 0:_.event;return R&&((y=s.ids)===null||y===void 0?void 0:y.includes(R))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((w=s.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const R=(S=(T=p==null?void 0:p.filter)===null||T===void 0?void 0:T.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return R==="*"||R===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const _=f.data,{schema:y,table:w,commit_timestamp:T,type:S,errors:b}=_;f=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:T,eventType:S,new:{},old:{},errors:b}),this._getPayloadRecords(_))}p.callback(f,r)})}_isClosed(){return this.state===be.closed}_isJoined(){return this.state===be.joined}_isJoining(){return this.state===be.joining}_isLeaving(){return this.state===be.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&xi.isEqual(n.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Je.close,{},e)}_onError(e){this._on(Je.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=be.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Ko(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Ko(e.columns,e.old_record)),s}}const An=()=>{},yr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lp=[1e3,2e3,5e3,1e4],cp=1e4,up=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dp{constructor(e,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zn,this.transport=null,this.heartbeatIntervalMs=yr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=An,this.ref=0,this.reconnectTimer=null,this.vsn=Ho,this.logger=An,this.conn=null,this.sendBuffer=[],this.serializer=new tp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${ei.websocket}`,this.httpEndpoint=mc(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jf.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yt.connecting:return Xt.Connecting;case Yt.open:return Xt.Open;case Yt.closing:return Xt.Closing;default:return Xt.Closed}}isConnected(){return this.connectionState()===Xt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new xi(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Zf,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},yr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(n,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Yt.open||this.conn.readyState===Yt.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Je.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([up],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{const n={access_token:s,version:Yf};s&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(Je.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(s)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new vc(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,r,n,i,o,a,l,c,u,d,f,p;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Zn,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:yr.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:An,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Ho,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:_=>lp[_-1]||cp,this.vsn){case gc:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(_,y)=>y(JSON.stringify(_)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(_,y)=>y(JSON.parse(_));break;case Xf:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ji extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hp extends ji{constructor(e,s,r){super(e),this.name="StorageApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class si extends ji{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}const $i=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),fp=()=>Response,ri=t=>{if(Array.isArray(t))return t.map(s=>ri(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=ri(r)}),e},pp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kn=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},gp=(t,e,s)=>L(void 0,void 0,void 0,function*(){const r=yield fp();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{const i=t.status||500,o=(n==null?void 0:n.statusCode)||i+"";e(new hp(kn(n),i,o))}).catch(n=>{e(new si(kn(n),n))}):e(new si(kn(t),t))}),vp=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(pp(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),s))};function cr(t,e,s,r,n,i){return L(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,vp(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>gp(l,a,r))})})}function sr(t,e,s,r){return L(this,void 0,void 0,function*(){return cr(t,"GET",e,s,r)})}function tt(t,e,s,r,n){return L(this,void 0,void 0,function*(){return cr(t,"POST",e,r,n,s)})}function ni(t,e,s,r,n){return L(this,void 0,void 0,function*(){return cr(t,"PUT",e,r,n,s)})}function _p(t,e,s,r){return L(this,void 0,void 0,function*(){return cr(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function Ni(t,e,s,r,n){return L(this,void 0,void 0,function*(){return cr(t,"DELETE",e,r,n,s)})}class mp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return L(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}var yc;class yp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[yc]="BlobDownloadBuilder",this.promise=null}asStream(){return new mp(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return L(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}yc=Symbol.toStringTag;const wp=yp,bp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zo={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ep{constructor(e,s={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=r,this.fetch=$i(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,r,n){return L(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},zo),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(e=="PUT"?ni:tt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(pe(i))return{data:null,error:i};throw i}})}upload(e,s,r){return L(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return L(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:zo.upsert},n),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield ni(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return L(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield tt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new ji("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}update(e,s,r){return L(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return L(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}copy(e,s,r){return L(this,void 0,void 0,function*(){try{return{data:{path:(yield tt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return L(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield tt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return L(this,void 0,void 0,function*(){try{const n=yield tt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}download(e,s){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>sr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new wp(l,this.shouldThrowOnError)}info(e){return L(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield sr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:ri(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}exists(e){return L(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield _p(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r)&&r instanceof si){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return L(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}list(e,s,r){return L(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},bp),s),{prefix:e||""});return{data:yield tt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}listV2(e,s){return L(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield tt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const wc="2.81.1",bc={"X-Client-Info":`storage-js/${wc}`};class Sp{constructor(e,s={},r,n){this.shouldThrowOnError=!1;const i=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bc),s),this.fetch=$i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return L(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(e);return{data:yield sr(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}getBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}createBucket(e){return L(this,arguments,void 0,function*(s,r={public:!1}){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return L(this,void 0,void 0,function*(){try{return{data:yield ni(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}class Op{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bc),s),this.fetch=$i(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}listBuckets(e){return L(this,void 0,void 0,function*(){try{const s=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&s.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&s.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&s.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&s.set("sortOrder",e.sortOrder),e!=null&&e.search&&s.set("search",e.search);const r=s.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield sr(this.fetch,n,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}}const Di={"X-Client-Info":`storage-js/${wc}`,"Content-Type":"application/json"};class Ec extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Fe(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Cn extends Ec{constructor(e,s,r){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tp extends Ec{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}}var Jo;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Jo||(Jo={}));const Ui=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Qo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ap=(t,e,s)=>L(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(s!=null&&s.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||n+"";e(new Cn(Qo(o),n,a))}).catch(()=>{const o=n+"",a=i.statusText||`HTTP ${n} error`;e(new Cn(a,n,o))});else{const o=n+"",a=i.statusText||`HTTP ${n} error`;e(new Cn(a,n,o))}}else e(new Tp(Qo(t),t))}),kp=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?n:(Rp(r)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(r)):n.body=r,Object.assign(Object.assign({},n),s))};function Cp(t,e,s,r,n,i){return L(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,kp(e,r,n,i)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Ap(l,a,r))})})}function qe(t,e,s,r,n){return L(this,void 0,void 0,function*(){return Cp(t,"POST",e,r,n,s)})}class Pp{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Di),s),this.fetch=Ui(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return L(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}getIndex(e,s){return L(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}listIndexes(e){return L(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}deleteIndex(e,s){return L(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Fe(r))return{data:null,error:r};throw r}})}}class Ip{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Di),s),this.fetch=Ui(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return L(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}getVectors(e){return L(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}listVectors(e){return L(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield qe(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}queryVectors(e){return L(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}deleteVectors(e){return L(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qe(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}}class xp{constructor(e,s={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Di),s),this.fetch=Ui(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return L(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}getBucket(e){return L(this,void 0,void 0,function*(){try{return{data:yield qe(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}listBuckets(){return L(this,arguments,void 0,function*(e={}){try{return{data:yield qe(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return L(this,void 0,void 0,function*(){try{return{data:(yield qe(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Fe(s))return{data:null,error:s};throw s}})}}class jp extends xp{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new $p(this.url,this.headers,e,this.fetch)}}class $p extends Pp{constructor(e,s,r,n){super(e,s,n),this.vectorBucketName=r}createIndex(e){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return L(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return L(this,arguments,void 0,function*(s={}){return e.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return L(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return L(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Np(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Np extends Ip{constructor(e,s,r,n,i){super(e,s,i),this.vectorBucketName=r,this.indexName=n}putVectors(e){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return L(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return L(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return L(this,arguments,void 0,function*(s={}){return e.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return L(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return L(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Dp extends Sp{constructor(e,s={},r,n){super(e,s,r,n)}from(e){return new Ep(this.url,this.headers,e,this.fetch)}get vectors(){return new jp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Op(this.url+"/iceberg",this.headers,this.fetch)}}const Up="2.81.1";let Us="";typeof Deno<"u"?Us="deno":typeof document<"u"?Us="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Us="react-native":Us="node";const Lp={"X-Client-Info":`supabase-js-${Us}/${Up}`},Mp={headers:Lp},Bp={schema:"public"},Vp={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fp={},qp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Hp=()=>Headers,Kp=(t,e,s)=>{const r=qp(s),n=Hp();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new n(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))}};function Wp(t){return t.endsWith("/")?t:t+"/"}function Gp(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d==null?void 0:d.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function zp(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wp(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sc="2.81.1",ps=30*1e3,ii=3,Pn=ii*ps,Jp="http://localhost:9999",Qp="supabase.auth.token",Yp={"X-Client-Info":`gotrue-js/${Sc}`},oi="X-Supabase-Api-Version",Oc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Zp=10*60*1e3;class rr extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function B(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class eg extends rr{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function tg(t){return B(t)&&t.name==="AuthApiError"}class Zt extends rr{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Vt extends rr{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class Ze extends Vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sg(t){return B(t)&&t.name==="AuthSessionMissingError"}class as extends Vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wr extends Vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class br extends Vt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function rg(t){return B(t)&&t.name==="AuthImplicitGrantRedirectError"}class Yo extends Vt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ai extends Vt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function In(t){return B(t)&&t.name==="AuthRetryableFetchError"}class Xo extends Vt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class li extends Vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zo=` 	
\r=`.split(""),ng=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Zo.length;e+=1)t[Zo[e].charCodeAt(0)]=-2;for(let e=0;e<Vr.length;e+=1)t[Vr[e].charCodeAt(0)]=e;return t})();function ea(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Vr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(Vr[r]),e.queuedBits-=6}}function Tc(t,e,s){const r=ng[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ta(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{ag(o,r,s)};for(let o=0;o<t.length;o+=1)Tc(t.charCodeAt(o),n,i);return e.join("")}function ig(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function og(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}ig(r,e)}}function ag(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Ss(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Tc(t.charCodeAt(n),s,r);return new Uint8Array(e)}function lg(t){const e=[];return og(t,s=>e.push(s)),new Uint8Array(e)}function ts(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>ea(n,s,r)),ea(null,s,r),e.join("")}function cg(t){return Math.round(Date.now()/1e3)+t}function ug(){return Symbol("auth-callback")}const Te=()=>typeof window<"u"&&typeof document<"u",Wt={tested:!1,writable:!1},Rc=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wt.tested)return Wt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wt.tested=!0,Wt.writable=!0}catch{Wt.tested=!0,Wt.writable=!1}return Wt.writable};function dg(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const Ac=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),hg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Gt=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},xt=async(t,e)=>{await t.removeItem(e)};class un{constructor(){this.promise=new un.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}un.promiseConstructor=Promise;function xn(t){const e=t.split(".");if(e.length!==3)throw new li("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Xp.test(e[r]))throw new li("JWT not in base64url format");return{header:JSON.parse(ta(e[0])),payload:JSON.parse(ta(e[1])),signature:Ss(e[2]),raw:{header:e[0],payload:e[1]}}}async function fg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function pg(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function gg(t){return("0"+t.toString(16)).substr(-2)}function vg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,gg).join("")}async function _g(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function mg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await _g(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(t,e,s=!1){const r=vg();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await gs(t,`${e}-code-verifier`,n);const i=await mg(r);return[i,r===i?"plain":"s256"]}const yg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wg(t){const e=t.headers.get(oi);if(!e||!e.match(yg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Eg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cs(t){if(!Sg.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jn(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Og(t,e){return new Proxy(t,{get:(s,r,n)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,n)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,r,n)}})}function sa(t){return JSON.parse(JSON.stringify(t))}const Jt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tg=[502,503,504];async function ra(t){var e;if(!hg(t))throw new ai(Jt(t),0);if(Tg.includes(t.status))throw new ai(Jt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Zt(Jt(i),i)}let r;const n=wg(t);if(n&&n.getTime()>=Oc["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new Xo(Jt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ze}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Xo(Jt(s),t.status,s.weak_password.reasons);throw new eg(Jt(s),t.status||500,r)}const Rg=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function K(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[oi]||(i[oi]=Oc["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ag(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ag(t,e,s,r,n,i){const o=Rg(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new ai(Jt(l),0)}if(a.ok||await ra(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await ra(l)}}function et(t){var e;let s=null;Pg(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=cg(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function na(t){const e=et(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kg(t){return{data:t,error:null}}function Cg(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=ks(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function ia(t){return t}function Pg(t){return t.access_token&&t.refresh_token&&t.expires_in}const $n=["global","local","others"];class Ig{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Ac(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=$n[0]){if($n.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${$n.join(", ")}`);try{return await K(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(B(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await K(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Dt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=ks(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await K(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Cg,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(B(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await K(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dt})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ia});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const y=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(B(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){cs(e);try{return await K(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dt})}catch(s){if(B(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){cs(e);try{return await K(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Dt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){cs(e);try{return await K(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Dt})}catch(r){if(B(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){cs(e.userId);try{const{data:s,error:r}=await K(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(B(s))return{data:null,error:s};throw s}}async _deleteFactor(e){cs(e.userId),cs(e.id);try{return{data:await K(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,r,n,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await K(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:ia});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const y=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(_.split(";")[1].split("=")[1]);c[`${w}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(B(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await K(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(B(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await K(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(B(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await K(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(B(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await K(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(B(s))return{data:null,error:s};throw s}}}function oa(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const us={debug:!!(globalThis&&Rc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kc extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xg extends kc{}async function jg(t,e,s){us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xg(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function $g(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Cc(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Ng(t){return parseInt(t,16)}function Dg(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Ug(t){var e;const{chainId:s,domain:r,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Cc(t.address),_=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",w=`${_} wants you to sign in with your Ethereum account:
${p}

${y}`;let T=`URI: ${d}
Version: ${f}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(T+=`
Expiration Time: ${n.toISOString()}`),a&&(T+=`
Not Before: ${a.toISOString()}`),l&&(T+=`
Request ID: ${l}`),c){let S=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);S+=`
- ${b}`}T+=S}return`${w}
${T}`}class _e extends Error{constructor({message:e,code:s,cause:r,name:n}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=n??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Fr extends _e{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function Lg({error:t,options:e}){var s,r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new _e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new _e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new _e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new _e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new _e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Pc(o)){if(i.rp.id!==o)return new _e({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new _e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Mg({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Pc(r)){if(s.rpId!==r)return new _e({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Bg{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Vg=new Bg;function Fg(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:r}=t,n=ks(t,["challenge","user","excludeCredentials"]),i=Ss(e).buffer,o=Object.assign(Object.assign({},s),{id:Ss(s.id).buffer}),a=Object.assign(Object.assign({},n),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Ss(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function qg(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,r=ks(t,["challenge","allowCredentials"]),n=Ss(e).buffer,i=Object.assign(Object.assign({},r),{challenge:n});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Ss(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function Hg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:ts(new Uint8Array(t.response.attestationObject)),clientDataJSON:ts(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Kg(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,r=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ts(new Uint8Array(n.authenticatorData)),clientDataJSON:ts(new Uint8Array(n.clientDataJSON)),signature:ts(new Uint8Array(n.signature)),userHandle:n.userHandle?ts(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Pc(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function aa(){var t,e;return!!(Te()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Wg(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fr("Browser returned unexpected credential type",e)}:{data:null,error:new Fr("Empty credential response",e)}}catch(e){return{data:null,error:Lg({error:e,options:t})}}}async function Gg(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Fr("Browser returned unexpected credential type",e)}:{data:null,error:new Fr("Empty credential response",e)}}catch(e){return{data:null,error:Mg({error:e,options:t})}}}const zg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Jg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function qr(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),s=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),r={};for(const n of t)if(n)for(const i in n){const o=n[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(s(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=qr(a,o):r[i]=qr(o)}else r[i]=o}return r}function Qg(t,e){return qr(zg,t,e||{})}function Yg(t,e){return qr(Jg,t,e||{})}class Xg{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:r,signal:n},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!o)return{data:null,error:a};const l=n??Vg.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Qg(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:d}=await Wg({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=Yg(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:d}=await Gg(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return B(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn authentication")};try{if(!aa())return{data:null,error:new Zt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:r},signal:n},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return B(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!s)return{data:null,error:new rr("rpId is required for WebAuthn registration")};try{if(!aa())return{data:null,error:new Zt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:n},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return B(o)?{data:null,error:o}:{data:null,error:new Zt("Unexpected error in register",o)}}}}$g();const Zg={url:Jp,storageKey:Qp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function la(t,e,s){return await s()}const ds={};class nr{get jwks(){var e,s;return(s=(e=ds[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=ds[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ds[this.storageKey]=Object.assign(Object.assign({},ds[this.storageKey]),{cachedAt:e})}constructor(e){var s,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Zg),e);if(this.storageKey=i.storageKey,this.instanceID=(s=nr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,nr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Te()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ig({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ac(i.fetch),this.lock=i.lock||la,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Te()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=jg:this.lock=la,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Xg(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Rc()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=oa(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=oa(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Sc}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},r="none";if(Te()&&(s=dg(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),Te()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),rg(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return B(s)?this._returnResult({error:s}):this._returnResult({error:new Zt("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:et}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await ls(this.storage,this.storageKey)),i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:_},xform:et})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await K(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:et})}else throw new wr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(B(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:na})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await K(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:na})}else throw new wr("You must provide either an email or phone number and a password");const{data:r,error:n}=s;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const i=new as;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,r,n,i,o,a,l,c,u,d,f;let p,_;if("message"in e)p=e.message,_=e.signature;else{const{chain:y,wallet:w,statement:T,options:S}=e;let b;if(Te())if(typeof w=="object")b=w;else{const Ee=window;if("ethereum"in Ee&&typeof Ee.ethereum=="object"&&"request"in Ee.ethereum&&typeof Ee.ethereum.request=="function")b=Ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=w}const R=new URL((s=S==null?void 0:S.url)!==null&&s!==void 0?s:window.location.href),q=await b.request({method:"eth_requestAccounts"}).then(Ee=>Ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Cc(q[0]);let J=(r=S==null?void 0:S.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!J){const Ee=await b.request({method:"eth_chainId"});J=Ng(Ee)}const ye={domain:R.host,address:z,statement:T,uri:R.href,version:"1",chainId:J,nonce:(n=S==null?void 0:S.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=S==null?void 0:S.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=S==null?void 0:S.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=Ug(ye),_=await b.request({method:"personal_sign",params:[Dg(p),z]})}try{const{data:y,error:w}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:_},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:et});if(w)throw w;if(!y||!y.session||!y.user){const T=new as;return this._returnResult({data:{user:null,session:null},error:T})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if(B(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var s,r,n,i,o,a,l,c,u,d,f,p;let _,y;if("message"in e)_=e.message,y=e.signature;else{const{chain:w,wallet:T,statement:S,options:b}=e;let R;if(Te())if(typeof T=="object")R=T;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))R=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=T}const q=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in R&&R.signIn){const z=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),S?{statement:S}:null));let J;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")J=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)J=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in J&&"signature"in J&&(typeof J.signedMessage=="string"||J.signedMessage instanceof Uint8Array)&&J.signature instanceof Uint8Array)_=typeof J.signedMessage=="string"?J.signedMessage:new TextDecoder().decode(J.signedMessage),y=J.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${q.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(n=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(J=>`- ${J}`)]:[]].join(`
`);const z=await R.signMessage(new TextEncoder().encode(_),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=z}}try{const{data:w,error:T}=await K(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:ts(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:et});if(T)throw T;if(!w||!w.session||!w.user){const S=new as;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:T})}catch(w){if(B(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const s=await Gt(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await K(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:et});if(await xt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new as;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(B(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:et}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new as;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await ls(this.storage,this.storageKey));const{error:d}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await K(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new wr("You must provide either an email or phone number.")}catch(a){if(B(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await K(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:et});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var s,r,n,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await ls(this.storage,this.storageKey));const c=await K(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:kg});return!((i=c.data)===null||i===void 0)&&i.url&&Te()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(B(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new Ze;const{error:n}=await K(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(B(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await K(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await K(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new wr("You must provide either an email or phone number and a type")}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Gt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Pn:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Gt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=jn()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Og(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ze}:await K(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Dt})})}catch(s){if(B(s))return sg(s)&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Ze;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ls(this.storage,this.storageKey));const{data:c,error:u}=await K(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Dt});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(B(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ze;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=xn(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(B(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ze;const{data:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(B(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Te())throw new br("No browser detected.");if(e.error||e.error_description||e.error_code)throw new br(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Yo("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new br("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Yo("No code detected.");const{data:S,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new br("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=ps&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const _=f-d;u-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,f,u):u-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,f,u);const{data:y,error:w}=await this._getUser(i);if(w)throw w;const T={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(r){if(B(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Gt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({error:i});const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(tg(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=ug(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await ls(this.storage,this.storageKey,!0));try{return await K(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(B(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await K(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(n)throw n;return Te()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(B(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var r;try{const{error:n,data:{session:i}}=s;if(n)throw n;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await K(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:et}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new as}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(n){if(B(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await K(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await pg(async n=>(n>0&&await fg(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await K(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:et})),(n,i)=>{const o=200*Math.pow(2,n);return i&&In(i)&&Date.now()+o-r<ps})}catch(r){if(this._debug(s,"error",r),B(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Te()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Gt(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Gt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await gs(this.userStorage,this.storageKey+"-user",o)),n.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:jn()}else if(n&&!n.user&&!n.user){const o=await Gt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await xt(this.storage,this.storageKey+"-user"),await gs(this.storage,this.storageKey,n)):n.user=jn()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((s=n.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Pn;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Pn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),In(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new Ze;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new un;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ze;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),B(i)){const o={data:null,error:i};return In(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await gs(this.userStorage,this.storageKey+"-user",{user:s.user});const n=Object.assign({},s);delete n.user;const i=sa(n);await gs(this.storage,this.storageKey,i)}else{const n=sa(s);await gs(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await xt(this.storage,this.storageKey),await xt(this.storage,this.storageKey+"-code-verifier"),await xt(this.storage,this.storageKey+"-user"),this.userStorage&&await xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ps);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/ps);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${ps}ms, refresh threshold is ${ii} ticks`),n<=ii&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kc)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Te()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await ls(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?this._returnResult({data:null,error:i}):await K(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await K(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Hg(e.webauthn.credential_response):Kg(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await K(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Fg(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:qg(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=xn(r.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((s=(e=r.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:r},error:n}=s;return n?this._returnResult({data:null,error:n}):r?await K(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ze})})}catch(s){if(B(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ze});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,s){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new Ze});const o=await K(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Te()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(a=>a.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Zp>n)return r;const{data:i,error:o}=await K(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,s={}){try{let r=e;if(!r){const{data:p,error:_}=await this.getSession();if(_||!p.session)return this._returnResult({data:null,error:_});r=p.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=xn(r);s!=null&&s.allowExpired||bg(i.exp);const c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:n,signature:o},error:null}}const u=Eg(n.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,lg(`${a}.${l}`)))throw new li("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(B(r))return this._returnResult({data:null,error:r});throw r}}}nr.nextInstanceID={};const ev=nr;class tv extends ev{constructor(e){super(e)}}class sv{constructor(e,s,r){var n,i,o;this.supabaseUrl=e,this.supabaseKey=s;const a=zp(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Bp,realtime:Fp,auth:Object.assign(Object.assign({},Vp),{storageKey:l}),global:Mp},u=Gp(r??{},c);this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Kp(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new zf(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Dp(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Hf(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,s;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tv({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rv=(t,e,s)=>new sv(t,e,s);function nv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}nv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iv="https://hdayzxlqfggmiseanheq.supabase.co",ov="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkYXl6eGxxZmdnbWlzZWFuaGVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc2ODIsImV4cCI6MjA3NzA4MzY4Mn0.eamwYnclJay6PMVj2S1UedZZQ3Wnbzvo7Oj0C5BbKcU",te=rv(iv,ov);class He{static async getCarouselSlides(){try{console.log("Supabase...");const{data:e,error:s}=await te.from("carousel_slides").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(s)throw console.error(":",s),s;return console.log(":",e),e||[]}catch(e){return console.error(":",e),[]}}static async getCategories(){try{const{data:e,error:s}=await te.from("categories").select("*").order("sort_order",{ascending:!0});if(s)throw s;return e||[]}catch(e){return console.error(":",e),[]}}static async getCategoryDetail(e){try{const{data:s,error:r}=await te.from("categories").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error(":",s),null}}static async getCategoryDetailWithRepresentatives(e){try{const{data:s,error:r}=await te.from("categories").select("*").eq("id",e).single();if(r)throw r;const{data:n,error:i}=await te.from("representatives").select("*").eq("category_id",e).order("created_at",{ascending:!0});if(i)throw i;const{data:o,error:a}=await te.from("videos").select("*").eq("category_id",e).limit(4).order("views_count",{ascending:!1});if(a)throw a;return{category:s,representatives:n||[],videos:o||[]}}catch(s){return console.error(":",s),null}}static async getCategoryRepresentatives(e){try{const{data:s,error:r}=await te.from("representatives").select("*").eq("category_id",e).order("created_at",{ascending:!0});if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getCategoryVideos(e,s=4){try{const{data:r,error:n}=await te.from("videos").select("*").eq("category_id",e).limit(s).order("views_count",{ascending:!1});if(n)throw n;return r||[]}catch(r){return console.error(":",r),[]}}static async getCategoryStats(e){try{const{count:s,error:r}=await te.from("videos").select("*",{count:"exact",head:!0}).eq("category_id",e);if(r)throw r;const{count:n,error:i}=await te.from("representatives").select("*",{count:"exact",head:!0}).eq("category_id",e);if(i)throw i;const{data:o,error:a}=await te.from("videos").select("views_count").eq("category_id",e);if(a)throw a;const l=(o==null?void 0:o.reduce((c,u)=>c+(u.views_count||0),0))||0;return{videoCount:s||0,representativeCount:n||0,totalViews:l}}catch(s){return console.error(":",s),{videoCount:0,representativeCount:0,totalViews:0}}}static async getCategoryDetailWithRepresentatives(e){try{const{data:s,error:r}=await te.from("categories").select("*").eq("id",e).single();if(r)throw r;const{data:n,error:i}=await te.from("representatives").select("*").eq("category_id",e).order("created_at",{ascending:!0});if(i)throw i;const{data:o,error:a}=await te.from("videos").select("*").eq("category_id",e).limit(4).order("views_count",{ascending:!1});if(a)throw a;return{category:s,representatives:n||[],videos:o||[]}}catch(s){return console.error(":",s),null}}static async getCategoryRepresentatives(e){try{const{data:s,error:r}=await te.from("representatives").select("*").eq("category_id",e).order("created_at",{ascending:!0});if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getCategoryVideos(e,s=4){try{const{data:r,error:n}=await te.from("videos").select("*").eq("category_id",e).limit(s).order("views_count",{ascending:!1});if(n)throw n;return r||[]}catch(r){return console.error(":",r),[]}}static async getCategoryStats(e){try{const{count:s,error:r}=await te.from("videos").select("*",{count:"exact",head:!0}).eq("category_id",e);if(r)throw r;const{count:n,error:i}=await te.from("representatives").select("*",{count:"exact",head:!0}).eq("category_id",e);if(i)throw i;const{data:o,error:a}=await te.from("videos").select("views_count").eq("category_id",e);if(a)throw a;const l=(o==null?void 0:o.reduce((c,u)=>c+(u.views_count||0),0))||0;return{videoCount:s||0,representativeCount:n||0,totalViews:l}}catch(s){return console.error(":",s),{videoCount:0,representativeCount:0,totalViews:0}}}static async getVideos(e={}){const{categoryId:s=null,page:r=1,pageSize:n=12,sortBy:i="created_at",sortOrder:o="desc",featured:a=!1}=e;try{let l=te.from("videos").select("*",{count:"exact"});s&&(l=l.eq("category_id",s)),a&&(l=l.eq("is_featured",!0)),l=l.order(i,{ascending:o==="asc"});const c=(r-1)*n,u=c+n-1;l=l.range(c,u);const{data:d,error:f,count:p}=await l;if(f)throw f;return{videos:d||[],total:p||0,page:r,pageSize:n,totalPages:Math.ceil((p||0)/n)}}catch(l){return console.error(":",l),{videos:[],total:0,page:r,pageSize:n,totalPages:0}}}static async getVideoDetail(e){try{const{data:s,error:r}=await te.from("video_details").select("*").eq("id",e).single();if(r)throw r;return s}catch(s){return console.error(":",s),null}}static async searchVideos(e,s={}){const{page:r=1,pageSize:n=12}=s;try{const{data:i,error:o}=await te.rpc("search_videos",{search_query:e});if(o)throw o;const a=(r-1)*n,l=a+n;return{videos:(i||[]).slice(a,l),total:(i||[]).length,page:r,pageSize:n,totalPages:Math.ceil((i||[]).length/n)}}catch(i){return console.error(":",i),{videos:[],total:0,page:r,pageSize:n,totalPages:0}}}static async incrementVideoViews(e){try{const{error:s}=await te.rpc("increment_video_views",{video_id_param:e});if(s)throw s;return!0}catch(s){return console.error(":",s),!1}}static async recordSearchKeyword(e){if(e.trim())try{const{data:s}=await te.from("search_keywords").select("id, search_count").eq("keyword",e).single();if(s){const{error:r}=await te.from("search_keywords").update({search_count:s.search_count+1,last_searched:new Date().toISOString()}).eq("id",s.id);if(r)throw r}else{const{error:r}=await te.from("search_keywords").insert([{keyword:e,search_count:1,last_searched:new Date().toISOString()}]);if(r)throw r}}catch(s){console.error(":",s)}}static async getPopularKeywords(e=10){try{const{data:s,error:r}=await te.from("search_keywords").select("keyword, search_count").order("search_count",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getRecommendedVideos(e=6){try{const{data:s,error:r}=await te.from("videos").select("*").order("views_count",{ascending:!1}).order("likes_count",{ascending:!1}).limit(e);if(r)throw r;return s||[]}catch(s){return console.error(":",s),[]}}static async getRecentEvents(e=6){try{console.log("Supabase...");const{data:s,error:r}=await te.from("events").select("*").order("event_date",{ascending:!1}).order("sort_order",{ascending:!0}).limit(e);if(r)throw console.error(":",r),r;return console.log(":",s),s||[]}catch(s){return console.error(":",s),[]}}static async getRelatedVideosByTags(e,s=4){if(!e||e.length===0)return[];try{const{data:r,error:n}=await te.from("videos").select("*").overlaps("tags",e).limit(s);if(n)throw n;return r||[]}catch(r){return console.error(":",r),[]}}}const av={name:"Home",data(){return{recentEvents:[],featuredVideos:[],loading:!0,currentSlide:0,carouselInterval:null,carouselSlides:[],showModal:!1,selectedEvent:null}},async mounted(){await this.loadData(),this.startCarousel()},beforeUnmount(){this.stopCarousel()},methods:{async loadData(){try{const t=await He.getCarouselSlides();console.log(":",t),t&&t.length>0?(this.carouselSlides=t.map(s=>({id:s.id,title:s.title,description:s.description,image:this.processImageUrl(s.image_url)})),console.log(":",this.carouselSlides)):(console.log(""),this.setDefaultData());const e=await He.getRecentEvents();console.log(":",e),e&&e.length>0?(this.recentEvents=e.map(s=>({id:s.id,title:s.title,description:s.description,type:s.event_type,typeClass:this.getEventTypeClass(s.event_type),date:this.formatDate(s.event_date),location:s.location})),console.log(":",this.recentEvents)):(console.log(""),this.recentEvents=this.getDefaultEvents()),this.featuredVideos=await He.getRecommendedVideos(3)}catch(t){console.error(":",t),console.log(""),this.setDefaultData()}finally{this.loading=!1}},setDefaultData(){this.carouselSlides=[{id:1,title:"",description:"",image:"https://images.unsplash.com/photo-1517330323742-98449c5d72f5?w=1200&h=600&fit=crop"},{id:2,title:"",description:"",image:"https://images.unsplash.com/photo-1516900448138-898720e93639?w=1200&h=600&fit=crop"},{id:3,title:"",description:"",image:"https://images.unsplash.com/photo-1573164713714-d95e436ab8d6?w=1200&h=600&fit=crop"},{id:4,title:"",description:"",image:"https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=1200&h=600&fit=crop"}],this.recentEvents=this.getDefaultEvents()},getDefaultEvents(){return[{id:1,title:"2024",description:"",type:"",typeClass:"ticket",date:"2024-03-15",location:""},{id:2,title:"",description:"",type:"",typeClass:"gala",date:"2024-03-20",location:""},{id:3,title:"",description:"",type:"",typeClass:"competition",date:"2024-04-10",location:""}]},getEventTypeClass(t){return{:"ticket",:"gala",:"competition",:"performance"}[t]||"default"},formatDate(t){return new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})},processImageUrl(t){return t?t.startsWith("http://")||t.startsWith("https://")?t:t.startsWith("/src/")?t.replace("/src/","/"):t:""},viewEventDetails(t){this.$router.push(`/events/${t}`)},goToVideo(t){this.$router.push(`/video/${t}`)},startCarousel(){this.carouselInterval=setInterval(()=>{this.nextSlide()},5e3)},stopCarousel(){this.carouselInterval&&(clearInterval(this.carouselInterval),this.carouselInterval=null)},nextSlide(){this.currentSlide=(this.currentSlide+1)%this.carouselSlides.length},prevSlide(){this.currentSlide=(this.currentSlide-1+this.carouselSlides.length)%this.carouselSlides.length},goToSlide(t){this.currentSlide=t},showEventModal(t){this.selectedEvent=t,this.showModal=!0,document.body.style.overflow="hidden"},closeModal(){this.showModal=!1,this.selectedEvent=null,document.body.style.overflow=""}}},lv={class:"home"},cv={class:"carousel-section"},uv={class:"carousel-container"},dv={class:"carousel"},hv={class:"slide-content"},fv={class:"slide-info"},pv={class:"slide-title"},gv={class:"slide-description"},vv={class:"carousel-indicators"},_v=["onClick"],mv={class:"events"},yv={class:"container"},wv={class:"event-list"},bv=["onClick"],Ev={class:"event-item-content"},Sv={class:"event-info"},Ov={class:"event-type"},Tv={class:"event-title"},Rv={class:"event-description"},Av={class:"event-meta"},kv={class:"event-date"},Cv={class:"event-location"},Pv={class:"modal-header"},Iv={class:"modal-title"},xv={class:"modal-body"},jv={class:"event-details"},$v={class:"detail-item"},Nv={class:"detail-item"},Dv={class:"detail-value"},Uv={class:"detail-item"},Lv={class:"detail-value"},Mv={class:"detail-item full-width"},Bv={class:"detail-description"},Vv={class:"modal-footer"};function Fv(t,e,s,r,n,i){return U(),M("div",lv,[h("section",cv,[h("div",uv,[h("div",dv,[(U(!0),M(ve,null,Ge(n.carouselSlides,(o,a)=>(U(),M("div",{key:o.id,class:Ce(["slide",{active:n.currentSlide===a}]),style:Yr({backgroundImage:`url(${o.image})`})},[e[6]||(e[6]=h("div",{class:"slide-overlay"},null,-1)),h("div",hv,[h("div",fv,[h("span",pv,N(o.title),1),h("span",gv,N(o.description),1)])])],6))),128))]),h("div",vv,[(U(!0),M(ve,null,Ge(n.carouselSlides,(o,a)=>(U(),M("button",{key:o.id,class:Ce(["indicator",{active:n.currentSlide===a}]),onClick:l=>i.goToSlide(a)},null,10,_v))),128))]),h("button",{class:"carousel-nav prev",onClick:e[0]||(e[0]=(...o)=>i.prevSlide&&i.prevSlide(...o))},[...e[7]||(e[7]=[h("i",{class:"fas fa-chevron-left"},null,-1)])]),h("button",{class:"carousel-nav next",onClick:e[1]||(e[1]=(...o)=>i.nextSlide&&i.nextSlide(...o))},[...e[8]||(e[8]=[h("i",{class:"fas fa-chevron-right"},null,-1)])])])]),h("section",mv,[h("div",yv,[e[9]||(e[9]=h("h2",{class:"section-title"},"",-1)),h("div",wv,[(U(!0),M(ve,null,Ge(n.recentEvents,o=>(U(),M("div",{key:o.id,class:"event-item",onClick:a=>i.showEventModal(o)},[h("div",Ev,[h("div",Sv,[h("div",Ov,[h("span",{class:Ce(o.typeClass)},N(o.type),3)]),h("h4",Tv,N(o.title),1),h("p",Rv,N(o.description),1)]),h("div",Av,[h("p",kv,N(o.date),1),h("p",Cv,N(o.location),1)])])],8,bv))),128))])])]),n.showModal?(U(),M("div",{key:0,class:"modal-overlay",onClick:e[5]||(e[5]=(...o)=>i.closeModal&&i.closeModal(...o))},[h("div",{class:"modal-content",onClick:e[4]||(e[4]=lr(()=>{},["stop"]))},[h("div",Pv,[h("h3",Iv,N(n.selectedEvent.title),1),h("button",{class:"modal-close",onClick:e[2]||(e[2]=(...o)=>i.closeModal&&i.closeModal(...o))},[...e[10]||(e[10]=[h("i",{class:"fas fa-times"},null,-1)])])]),h("div",xv,[h("div",jv,[h("div",$v,[e[11]||(e[11]=h("span",{class:"detail-label"},"",-1)),h("span",{class:Ce(["detail-value event-type-badge",n.selectedEvent.typeClass])},N(n.selectedEvent.type),3)]),h("div",Nv,[e[12]||(e[12]=h("span",{class:"detail-label"},"",-1)),h("span",Dv,N(n.selectedEvent.date),1)]),h("div",Uv,[e[13]||(e[13]=h("span",{class:"detail-label"},"",-1)),h("span",Lv,N(n.selectedEvent.location),1)]),h("div",Mv,[e[14]||(e[14]=h("span",{class:"detail-label"},"",-1)),h("p",Bv,N(n.selectedEvent.description),1)])])]),h("div",Vv,[h("button",{class:"btn btn-secondary",onClick:e[3]||(e[3]=(...o)=>i.closeModal&&i.closeModal(...o))},"")])])])):Tt("",!0)])}const qv=vt(av,[["render",Fv],["__scopeId","data-v-6768ceec"]]);const Hv={name:"Categories",data(){return{sidebarOpen:!1,activeNav:1,isLoading:!1,errorMessage:"",categoryNavs:[{id:1,name:""},{id:2,name:""},{id:3,name:""},{id:4,name:""}],categories:[]}},computed:{filteredCategories(){return this.activeNav===1?this.categories:this.categories.filter(t=>t.type===this.activeNav)},activeNavName(){if(this.activeNav===1)return"";const t=this.categoryNavs.find(e=>e.id===this.activeNav);return t?t.name:""}},async mounted(){await this.loadCategories()},methods:{async loadCategories(){this.isLoading=!0,this.errorMessage="";try{const t=await He.getCategories();t&&t.length>0?this.categories=t.map(e=>({id:e.id,name:e.name,icon:this.getCategoryIcon(e.name),description:e.description||"",videoCount:Math.floor(Math.random()*200)+50,studentCount:Math.floor(Math.random()*1e4)+1e3,type:this.getCategoryType(e.name)})):this.useDefaultCategories()}catch(t){console.error(":",t),this.errorMessage="",this.useDefaultCategories()}finally{this.isLoading=!1}},getCategoryIcon(t){return{:"fas fa-microphone-alt",:"fas fa-book-open",:"fas fa-mask",:"fas fa-landmark",:"fas fa-drum",:"fas fa-guitar",:"fas fa-masks-theater",:"fas fa-users"}[t]||"fas fa-folder"},getCategoryType(t){return{:2,:2,:3,:3,:4,:4,:3,:4}[t]||1},useDefaultCategories(){this.categories=[{id:1,name:"",icon:"fas fa-microphone-alt",description:"",videoCount:128,studentCount:5234,type:2},{id:2,name:"",icon:"fas fa-book-open",description:"",videoCount:96,studentCount:3856,type:2},{id:3,name:"",icon:"fas fa-mask",description:"",videoCount:156,studentCount:6897,type:3}]},toggleSidebar(){this.sidebarOpen=!this.sidebarOpen},setActiveNav(t){this.activeNav=t},getNavIcon(t){return{1:"fa-th-large",2:"fa-comments",3:"fa-mask",4:"fa-music"}[t]||"fa-folder"},getCategoryCount(t){return t===1?this.categories.length:this.categories.filter(e=>e.type===t).length},goToCategory(t){this.$router.push(`/category/${t}`)},viewCategoryDetails(t){this.$router.push(`/category/${t}`)},viewCategoryDetails(t){this.$router.push(`/category/${t}`)}}},Kv={class:"categories"},Wv={class:"sidebar"},Gv={class:"sidebar-header"},zv={class:"category-nav"},Jv=["onClick"],Qv={class:"category-count"},Yv={class:"container"},Xv={class:"page-title"},Zv={key:0,class:"loading-container"},e_={key:1,class:"error-container"},t_={key:2,class:"category-content"},s_=["onClick"],r_={class:"category-header"},n_={class:"category-description"},i_={class:"category-stats"},o_=["onClick"],a_={key:3,class:"no-categories"};function l_(t,e,s,r,n,i){return U(),M("div",Kv,[h("aside",Wv,[h("div",Gv,[h("div",{class:"sidebar-toggle",onClick:e[0]||(e[0]=(...o)=>i.toggleSidebar&&i.toggleSidebar(...o))},[h("i",{class:Ce(["fas",n.sidebarOpen?"fa-times":"fa-bars"])},null,2)])]),h("div",{class:Ce(["sidebar-content",{open:n.sidebarOpen}])},[h("nav",zv,[(U(!0),M(ve,null,Ge(n.categoryNavs,o=>(U(),M("div",{key:o.id,class:Ce(["nav-item",{active:n.activeNav===o.id}]),onClick:a=>i.setActiveNav(o.id)},[h("span",null,N(o.name),1),h("span",Qv,N(i.getCategoryCount(o.id)),1)],10,Jv))),128))])],2)]),h("main",{class:Ce(["main-content",{"sidebar-expanded":n.sidebarOpen}])},[h("div",Yv,[h("h1",Xv,N(i.activeNavName?`${i.activeNavName}`:""),1),n.isLoading?(U(),M("div",Zv,[...e[2]||(e[2]=[h("div",{class:"loading-spinner"},null,-1),h("p",null,"...",-1)])])):n.errorMessage?(U(),M("div",e_,[e[3]||(e[3]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),h("p",null,N(n.errorMessage),1),h("button",{onClick:e[1]||(e[1]=(...o)=>i.loadCategories&&i.loadCategories(...o)),class:"btn btn-secondary"},"  ")])):(U(),M("div",t_,[(U(!0),M(ve,null,Ge(i.filteredCategories,o=>(U(),M("div",{key:o.id,class:"category-item card",onClick:a=>i.goToCategory(o.id)},[h("div",r_,[h("i",{class:Ce(o.icon)},null,2),h("h3",null,N(o.name),1)]),h("p",n_,N(o.description),1),h("div",i_,[h("span",null,[e[4]||(e[4]=h("i",{class:"fas fa-video"},null,-1)),Z(" "+N(o.videoCount)+" ",1)]),h("span",null,[e[5]||(e[5]=h("i",{class:"fas fa-users"},null,-1)),Z(" "+N(o.studentCount)+" ",1)])]),h("button",{class:"btn btn-secondary",onClick:lr(a=>i.viewCategoryDetails(o.id),["stop"])},[...e[6]||(e[6]=[Z("  ",-1),h("i",{class:"fas fa-eye"},null,-1)])],8,o_)],8,s_))),128))])),!n.isLoading&&!n.errorMessage&&i.filteredCategories.length===0?(U(),M("div",a_,[...e[7]||(e[7]=[h("i",{class:"fas fa-masks-theater"},null,-1),h("p",null,"",-1)])])):Tt("",!0)])],2)])}const c_=vt(Hv,[["render",l_],["__scopeId","data-v-c5c72298"]]);const u_={name:"CategoryDetail",props:{id:{type:[String,Number],required:!0}},data(){return{isLoading:!1,errorMessage:"",category:null,representativesData:[],displayVideo:null}},computed:{detailedRepresentatives(){return this.representativesData&&this.representativesData.length>0?this.representativesData:{1:[{id:1,name:"",birthPeriod:"1917-1993",masterpiece:"",achievement:'""'},{id:2,name:"",birthPeriod:"1914-2003",masterpiece:"",achievement:""},{id:3,name:"",birthPeriod:"1973-",masterpiece:"",achievement:""}],2:[{id:1,name:"",birthPeriod:"1934-2018",masterpiece:"",achievement:'""'},{id:2,name:"",birthPeriod:"1944-",masterpiece:"",achievement:""}],3:[{id:1,name:"",birthPeriod:"1894-1961",masterpiece:"",achievement:'""'},{id:2,name:"",birthPeriod:"1904-1958",masterpiece:"",achievement:'""'}]}[this.id]||[]}},async mounted(){await this.loadCategoryDetail()},methods:{async loadCategoryDetail(){this.isLoading=!0,this.errorMessage="";try{const t=await He.getCategoryDetailWithRepresentatives(parseInt(this.id));if(!t){this.errorMessage="";return}this.category=t.category,t.representatives&&t.representatives.length>0?this.representativesData=t.representatives.map(e=>({id:e.id,name:e.name,birthPeriod:e.birth_period,masterpiece:e.masterpiece,achievement:e.artistic_achievement,status:e.status,statusText:e.status_text,avatarUrl:e.avatar_url,biography:e.biography})):this.useMockRepresentatives(),this.relatedVideos=t.videos||[],this.relatedVideos.length>0?this.displayVideo=this.relatedVideos[0]:this.useMockVideo()}catch(t){console.error(":",t),this.errorMessage="",this.useMockData(),this.useMockVideo()}finally{this.isLoading=!1}},useMockData(){const t={1:{id:1,name:"",description:"",representatives:"",origin:"",characteristics:"",performance_form:"",popularity:""},2:{id:2,name:"",description:"",representatives:"",origin:"",characteristics:"",performance_form:"",popularity:""},3:{id:3,name:"",description:"",representatives:"",origin:"",characteristics:"",performance_form:"",popularity:""}};this.category=t[this.id]||t[1],this.useMockRepresentatives()},useMockRepresentatives(){const t={1:[{id:1,name:"",birthPeriod:"1973-",masterpiece:"",achievement:"",status:"living",statusText:""},{id:2,name:"",birthPeriod:"1969-",masterpiece:"",achievement:"",status:"living",statusText:""},{id:3,name:"",birthPeriod:"1914-2003",masterpiece:"",achievement:"",status:"master",statusText:""},{id:4,name:"",birthPeriod:"1917-1993",masterpiece:"",achievement:'""',status:"master",statusText:""}],2:[{id:1,name:"",birthPeriod:"1934-2018",masterpiece:"",achievement:'""',status:"master",statusText:""},{id:2,name:"",birthPeriod:"1944-",masterpiece:"",achievement:"",status:"living",statusText:""},{id:3,name:"",birthPeriod:"1929-2015",masterpiece:"",achievement:'""',status:"master",statusText:""},{id:4,name:"",birthPeriod:"1941-",masterpiece:"",achievement:"",status:"living",statusText:""}],3:[{id:1,name:"",birthPeriod:"1894-1961",masterpiece:"",achievement:'""',status:"master",statusText:""},{id:2,name:"",birthPeriod:"1904-1958",masterpiece:"",achievement:'""',status:"master",statusText:""},{id:3,name:"",birthPeriod:"1900-1976",masterpiece:"",achievement:'""',status:"master",statusText:""},{id:4,name:"",birthPeriod:"1900-1968",masterpiece:"",achievement:'""',status:"master",statusText:""}]};this.representativesData=t[this.id]||[]},getCategoryIcon(t){return{:"fas fa-microphone-alt",:"fas fa-book-open",:"fas fa-mask",:"fas fa-landmark",:"fas fa-drum",:"fas fa-guitar",:"fas fa-masks-theater",:"fas fa-users"}[t]||"fas fa-folder"},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},goBack(){this.$router.back()},goToVideos(){this.$router.push(`/videos?category=${this.id}`)},goToCategories(){this.$router.push("/categories")},goToVideo(t){this.$router.push(`/video/${t}`)},showRepresentativeDetail(t){alert(` ${t.name} 

${t.birthPeriod}
${t.masterpiece}
${t.achievement}`)},showRepresentativeDetail(t){alert(` ${t.name} 

${t.birthPeriod}
${t.masterpiece}
${t.achievement}`)},useMockVideo(){const t={1:{id:1,title:" - ",description:"",duration:1800,views_count:25e3},2:{id:2,title:" - ",description:"",duration:2400,views_count:18e3},3:{id:3,title:" - ",description:"",duration:1500,views_count:12e3}};this.displayVideo=t[this.id]||t[1]},playVideo(t){this.$router.push(`/video/${t}`)}}},d_={class:"category-container"},h_={key:0,class:"loading-state"},f_={key:1,class:"error-state"},p_={key:2,class:"category-main"},g_={class:"back-section"},v_={class:"content-card"},__={class:"category-header"},m_={class:"category-icon"},y_={class:"category-info"},w_={class:"category-desc"},b_={class:"category-meta"},E_={class:"detail-content"},S_={class:"content-section"},O_={class:"content-section"},T_={class:"content-section"},R_={class:"content-section"},A_={class:"people-grid"},k_={class:"person-info"},C_={class:"person-bio"},P_={class:"person-details"},I_={key:0,class:"video-section"},x_={class:"video-card"},j_={class:"video-info"},$_={class:"video-desc"},N_={class:"video-meta"},D_={key:3,class:"no-data"};function U_(t,e,s,r,n,i){return U(),M("div",d_,[n.isLoading?(U(),M("div",h_,[...e[4]||(e[4]=[h("div",{class:"spinner"},null,-1),h("p",null,"...",-1)])])):n.errorMessage?(U(),M("div",f_,[e[5]||(e[5]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),h("p",null,N(n.errorMessage),1),h("button",{onClick:e[0]||(e[0]=(...o)=>i.loadCategoryDetail&&i.loadCategoryDetail(...o)),class:"retry-btn"},"  ")])):n.category?(U(),M("div",p_,[h("div",g_,[h("button",{onClick:e[1]||(e[1]=(...o)=>i.goBack&&i.goBack(...o)),class:"back-btn"},[...e[6]||(e[6]=[h("i",{class:"fas fa-arrow-left"},null,-1),Z("  ",-1)])])]),h("div",v_,[h("div",__,[h("div",m_,[h("i",{class:Ce(i.getCategoryIcon(n.category.name))},null,2)]),h("div",y_,[h("h1",null,N(n.category.name),1),h("p",w_,N(n.category.description),1),h("div",b_,[h("span",null,[e[7]||(e[7]=h("i",{class:"fas fa-map-marker-alt"},null,-1)),Z(" "+N(n.category.origin),1)]),h("span",null,[e[8]||(e[8]=h("i",{class:"fas fa-star"},null,-1)),Z(" "+N(n.category.popularity),1)])])])]),h("div",E_,[h("div",S_,[e[9]||(e[9]=h("h3",null,"",-1)),h("p",null,N(n.category.detailed_description),1)]),h("div",O_,[e[10]||(e[10]=h("h3",null,"",-1)),h("p",null,N(n.category.characteristics),1)]),h("div",T_,[e[11]||(e[11]=h("h3",null,"",-1)),h("p",null,N(n.category.performance_form),1)]),h("div",R_,[e[15]||(e[15]=h("h3",null,"",-1)),h("div",A_,[(U(!0),M(ve,null,Ge(i.detailedRepresentatives,o=>(U(),M("div",{key:o.id,class:"person-card"},[e[14]||(e[14]=h("div",{class:"person-avatar"},[h("i",{class:"fas fa-user"})],-1)),h("div",k_,[h("h4",null,N(o.name),1),h("p",C_,N(o.achievement),1),h("p",P_,[h("span",null,[e[12]||(e[12]=h("i",{class:"fas fa-clock"},null,-1)),Z(" "+N(o.birthPeriod),1)]),h("span",null,[e[13]||(e[13]=h("i",{class:"fas fa-star"},null,-1)),Z(" "+N(o.masterpiece),1)])])])]))),128))])])]),n.displayVideo?(U(),M("div",I_,[e[20]||(e[20]=h("h3",null,"",-1)),h("div",x_,[e[19]||(e[19]=h("div",{class:"video-thumbnail"},[h("i",{class:"fas fa-play-circle"})],-1)),h("div",j_,[h("h4",null,N(n.displayVideo.title),1),h("p",$_,N(n.displayVideo.description),1),h("div",N_,[h("span",null,[e[16]||(e[16]=h("i",{class:"fas fa-clock"},null,-1)),Z(" "+N(i.formatDuration(n.displayVideo.duration)),1)]),h("span",null,[e[17]||(e[17]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+N(n.displayVideo.views_count)+" ",1)])]),h("button",{onClick:e[2]||(e[2]=o=>i.playVideo(n.displayVideo.id)),class:"play-btn"},[...e[18]||(e[18]=[h("i",{class:"fas fa-play"},null,-1),Z("  ",-1)])])])])])):Tt("",!0)])])):(U(),M("div",D_,[e[21]||(e[21]=h("i",{class:"fas fa-masks-theater"},null,-1)),e[22]||(e[22]=h("p",null,"",-1)),h("button",{onClick:e[3]||(e[3]=(...o)=>i.goToCategories&&i.goToCategories(...o)),class:"btn"},"  ")]))])}const L_=vt(u_,[["render",U_],["__scopeId","data-v-354f07f1"]]);const M_={name:"Videos",data(){return{searchQuery:"",selectedCategory:"",currentVideo:null,categories:[],videos:[],loading:!1,page:1,pageSize:12,totalPages:0,totalVideos:0}},computed:{filteredVideos(){return this.videos},hasMoreVideos(){return this.page<this.totalPages}},async mounted(){await this.loadCategories(),await this.loadVideos()},methods:{async loadCategories(){try{this.categories=await He.getCategories()}catch(t){console.error(":",t)}},async loadVideos(){this.loading=!0;try{const t={categoryId:this.selectedCategory||null,page:this.page,pageSize:this.pageSize},e=await He.getVideos(t);this.videos=e.videos,this.totalVideos=e.total,this.totalPages=e.totalPages}catch(t){console.error(":",t),this.videos=[]}finally{this.loading=!1}},async handleSearch(){if(this.searchQuery.trim())try{await He.recordSearchKeyword(this.searchQuery);const t=await He.searchVideos(this.searchQuery);this.videos=t.videos,this.totalVideos=t.total,this.totalPages=t.totalPages,this.page=1}catch(t){console.error(":",t)}else await this.loadVideos()},async filterVideos(){this.page=1,await this.loadVideos()},playVideo(t){this.$router.push(`/video/${t.id}`)},closeVideo(){this.currentVideo=null},getCategoryName(t){const e=this.categories.find(s=>s.id===t);return e?e.name:""},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},async loadMoreVideos(){if(this.hasMoreVideos){this.page++;try{const t={categoryId:this.selectedCategory||null,page:this.page,pageSize:this.pageSize},e=await He.getVideos(t);this.videos=[...this.videos,...e.videos]}catch(t){console.error(":",t),this.page--}}}}},B_={class:"videos"},V_={class:"container"},F_={class:"videos-header"},q_={class:"search-controls"},H_={class:"search-box"},K_=["value"],W_={key:0,class:"loading"},G_={key:1,class:"videos-grid"},z_=["onClick"],J_={class:"video-thumbnail"},Q_={class:"video-duration"},Y_={class:"video-category"},X_={class:"video-info"},Z_={class:"video-title"},em={class:"video-description"},tm={class:"video-meta"},sm={class:"video-performer"},rm={class:"video-views"},nm={class:"video-tags"},im={key:2,class:"empty-state"},om={key:3,class:"load-more"},am={class:"video-details"},lm={class:"video-info"};function cm(t,e,s,r,n,i){return U(),M("div",B_,[h("div",V_,[h("div",F_,[e[10]||(e[10]=h("h1",{class:"page-title"},"",-1)),e[11]||(e[11]=h("p",{class:"page-subtitle"},"",-1)),h("div",q_,[h("div",H_,[e[8]||(e[8]=h("i",{class:"fas fa-search search-icon"},null,-1)),Xs(h("input",{type:"text",class:"search-input",placeholder:"...","onUpdate:modelValue":e[0]||(e[0]=o=>n.searchQuery=o),onInput:e[1]||(e[1]=(...o)=>i.handleSearch&&i.handleSearch(...o))},null,544),[[an,n.searchQuery]])]),Xs(h("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>n.selectedCategory=o),class:"category-filter",onChange:e[3]||(e[3]=(...o)=>i.filterVideos&&i.filterVideos(...o))},[e[9]||(e[9]=h("option",{value:""},"",-1)),(U(!0),M(ve,null,Ge(n.categories,o=>(U(),M("option",{key:o.id,value:o.id},N(o.name),9,K_))),128))],544),[[eh,n.selectedCategory]])])]),n.loading?(U(),M("div",W_,[...e[12]||(e[12]=[h("div",{class:"spinner"},null,-1),h("p",null,"...",-1)])])):(U(),M("div",G_,[(U(!0),M(ve,null,Ge(i.filteredVideos,o=>(U(),M("div",{key:o.id,class:"video-card card",onClick:a=>i.playVideo(o)},[h("div",J_,[e[13]||(e[13]=h("i",{class:"fas fa-play-circle play-icon"},null,-1)),h("div",Q_,N(i.formatDuration(o.duration)),1),h("div",Y_,N(i.getCategoryName(o.category_id)),1)]),h("div",X_,[h("h3",Z_,N(o.title),1),h("p",em,N(o.description),1),h("div",tm,[h("span",sm,[e[14]||(e[14]=h("i",{class:"fas fa-user"},null,-1)),Z(" "+N(o.performer||""),1)]),h("span",rm,[e[15]||(e[15]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+N(o.views_count||0)+"  ",1)])]),h("div",nm,[(U(!0),M(ve,null,Ge(o.tags||[],a=>(U(),M("span",{key:a,class:"tag"},N(a),1))),128))])])],8,z_))),128))])),!n.loading&&i.filteredVideos.length===0?(U(),M("div",im,[...e[16]||(e[16]=[h("i",{class:"fas fa-video-slash"},null,-1),h("h3",null,"",-1),h("p",null,"",-1)])])):Tt("",!0),i.hasMoreVideos?(U(),M("div",om,[h("button",{class:"btn",onClick:e[4]||(e[4]=(...o)=>i.loadMoreVideos&&i.loadMoreVideos(...o))},[...e[17]||(e[17]=[Z("  ",-1),h("i",{class:"fas fa-arrow-down"},null,-1)])])])):Tt("",!0)]),n.currentVideo?(U(),M("div",{key:0,class:"video-modal",onClick:e[7]||(e[7]=(...o)=>i.closeVideo&&i.closeVideo(...o))},[h("div",{class:"modal-content",onClick:e[6]||(e[6]=lr(()=>{},["stop"]))},[h("button",{class:"close-btn",onClick:e[5]||(e[5]=(...o)=>i.closeVideo&&i.closeVideo(...o))},[...e[18]||(e[18]=[h("i",{class:"fas fa-times"},null,-1)])]),e[19]||(e[19]=h("div",{class:"video-player"},[h("div",{class:"player-placeholder"},[h("i",{class:"fas fa-play-circle"}),h("p",null,"")])],-1)),h("div",am,[h("h3",null,N(n.currentVideo.title),1),h("p",null,N(n.currentVideo.description),1),h("div",lm,[h("span",null,""+N(n.currentVideo.teacher),1),h("span",null,""+N(n.currentVideo.duration),1),h("span",null,""+N(i.getCategoryName(n.currentVideo.categoryId)),1)])])])])):Tt("",!0)])}const um=vt(M_,[["render",cm],["__scopeId","data-v-86751c6c"]]);const dm={name:"About",data(){return{contactForm:{message:""}}},methods:{submitContact(){alert(""),this.contactForm={message:""}}}},hm={class:"about"},fm={class:"container"},pm={class:"contact-section"},gm={class:"contact-form card"},vm={class:"form-group"};function _m(t,e,s,r,n,i){return U(),M("div",hm,[h("div",fm,[e[4]||(e[4]=h("div",{class:"page-header"},[h("h1",{class:"page-title"},"")],-1)),h("section",pm,[h("div",gm,[e[3]||(e[3]=h("h3",null,"",-1)),h("form",{onSubmit:e[1]||(e[1]=lr((...o)=>i.submitContact&&i.submitContact(...o),["prevent"]))},[h("div",vm,[Xs(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.contactForm.message=o),placeholder:"",rows:"8",required:""},null,512),[[an,n.contactForm.message]])]),e[2]||(e[2]=h("button",{type:"submit",class:"btn"},"",-1))],32)])])])])}const mm=vt(dm,[["render",_m],["__scopeId","data-v-61516447"]]);class Hr{static async sendMessage(e,s=[]){try{const r=[{role:"system",content:`



`},...s,{role:"user",content:e}],n=await fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.API_KEY}`},body:JSON.stringify({model:"deepseek-chat",messages:r,temperature:.7,max_tokens:1e3,stream:!1})});if(!n.ok)throw new Error(`API: ${n.status}`);const i=await n.json();if(i.choices&&i.choices.length>0)return i.choices[0].message.content;throw new Error("API")}catch(r){throw console.error("AI:",r),new Error(`: ${r.message}`)}}static getSuggestedQuestions(){return[{id:1,text:"",category:""},{id:2,text:"",category:""},{id:3,text:"",category:""},{id:4,text:"",category:""}]}}dn(Hr,"API_KEY","sk-8a2db8ef29ce411c8cc63bfe3aaf1f32"),dn(Hr,"API_URL","https://api.deepseek.com/v1/chat/completions");const ym={name:"AIChat",data(){return{messages:[],inputMessage:"",isLoading:!1,suggestedQuestions:Hr.getSuggestedQuestions()}},mounted(){this.focusInput()},methods:{async handleSendMessage(){const t=this.inputMessage.trim();if(!(!t||this.isLoading)){this.addMessage("user",t),this.inputMessage="",this.isLoading=!0;try{const e=this.messages.map(r=>({role:r.role,content:r.content})),s=await Hr.sendMessage(t,e);this.addMessage("assistant",s)}catch(e){console.error(":",e),this.addMessage("assistant","")}finally{this.isLoading=!1,this.focusInput()}}},addMessage(t,e){this.messages.push({role:t,content:e,timestamp:new Date}),this.$nextTick(()=>{this.scrollToBottom()})},useSuggestedQuestion(t){this.inputMessage=t,this.focusInput()},focusInput(){this.$nextTick(()=>{this.$refs.messageInput&&this.$refs.messageInput.focus()})},scrollToBottom(){const t=this.$refs.messagesContainer;t&&(t.scrollTop=t.scrollHeight)},formatTime(t){return new Date(t).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}}},wm={class:"ai-chat-layout"},bm={class:"chat-container"},Em={class:"main-content"},Sm={class:"questions-section"},Om={class:"questions-list"},Tm=["onClick"],Rm={class:"question-content"},Am={class:"question-category"},km={class:"question-text"},Cm={class:"dialogue-section"},Pm={class:"messages-container",ref:"messagesContainer"},Im={key:0,class:"welcome-message"},xm={key:1,class:"messages-list"},jm={class:"message-avatar"},$m={key:0,class:"fas fa-user"},Nm={key:1,class:"fas fa-robot"},Dm={class:"message-content"},Um={class:"message-text"},Lm={class:"message-time"},Mm={key:0,class:"message assistant"},Bm={class:"input-container"},Vm={class:"input-wrapper"},Fm=["disabled"];function qm(t,e,s,r,n,i){return U(),M("div",wm,[h("div",bm,[e[7]||(e[7]=h("div",{class:"page-header"},[h("h1",null,"AI")],-1)),h("div",Em,[h("div",Sm,[e[3]||(e[3]=h("div",{class:"questions-header"},[h("h2",null,"")],-1)),h("div",Om,[(U(!0),M(ve,null,Ge(n.suggestedQuestions,o=>(U(),M("button",{key:o.id,onClick:a=>i.useSuggestedQuestion(o.text),class:"question-btn"},[h("div",Rm,[h("span",Am,N(o.category),1),h("span",km,N(o.text),1)])],8,Tm))),128))])]),h("div",Cm,[h("div",Pm,[n.messages.length===0?(U(),M("div",Im,[...e[4]||(e[4]=[h("div",{class:"welcome-content"},[h("h3",null,"AI"),h("p",null,""),h("p",null,"")],-1)])])):(U(),M("div",xm,[(U(!0),M(ve,null,Ge(n.messages,(o,a)=>(U(),M("div",{key:a,class:Ce(["message",o.role])},[h("div",jm,[o.role==="user"?(U(),M("i",$m)):(U(),M("i",Nm))]),h("div",Dm,[h("div",Um,N(o.content),1),h("div",Lm,N(i.formatTime(o.timestamp)),1)])],2))),128)),n.isLoading?(U(),M("div",Mm,[...e[5]||(e[5]=[h("div",{class:"message-avatar"},[h("i",{class:"fas fa-robot"})],-1),h("div",{class:"message-content"},[h("div",{class:"typing-indicator"},[h("span"),h("span"),h("span"),h("span",null,"AI...")])],-1)])])):Tt("",!0)]))],512),h("div",Bm,[h("div",Vm,[Xs(h("textarea",{"onUpdate:modelValue":e[0]||(e[0]=o=>n.inputMessage=o),onKeydown:e[1]||(e[1]=fl(lr((...o)=>i.handleSendMessage&&i.handleSendMessage(...o),["prevent"]),["enter"])),placeholder:"...",rows:"1",class:"message-input",ref:"messageInput"},null,544),[[an,n.inputMessage]]),h("button",{onClick:e[2]||(e[2]=(...o)=>i.handleSendMessage&&i.handleSendMessage(...o)),disabled:n.isLoading||!n.inputMessage.trim(),class:"send-btn"},[...e[6]||(e[6]=[h("i",{class:"fas fa-paper-plane"},null,-1)])],8,Fm)])])])])])])}const Hm=vt(ym,[["render",qm],["__scopeId","data-v-fa455b64"]]);const Km={name:"VideoPlayer",props:{videoId:{type:[String,Number],required:!0}},data(){return{video:null,relatedVideos:[],loading:!1,isPlaying:!1,currentTime:0,isLiked:!1,isFavorited:!1}},computed:{videoUrl(){var t;return((t=this.video)==null?void 0:t.video_url)||""}},watch:{videoId:{immediate:!0,async handler(t){t&&await this.loadVideoData()}}},methods:{async loadVideoData(){this.loading=!0;try{this.video=await He.getVideoDetail(this.videoId),this.video&&this.video.tags&&(this.relatedVideos=await He.getRelatedVideosByTags(this.video.tags,4)),await He.incrementVideoViews(this.videoId)}catch(t){console.error(":",t),this.video=null}finally{this.loading=!1}},playVideo(){this.$refs.videoElement&&this.$refs.videoElement.play()},onPlay(){this.isPlaying=!0},onPause(){this.isPlaying=!1},onTimeUpdate(t){this.currentTime=t.target.currentTime},onEnded(){this.isPlaying=!1},toggleLike(){this.isLiked=!this.isLiked},toggleFavorite(){this.isFavorited=!this.isFavorited},shareVideo(){navigator.share?navigator.share({title:this.video.title,text:this.video.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert(""))},playRelatedVideo(t){this.$router.push(`/video/${t.id}`)},formatDuration(t){if(!t)return"00:00";const e=Math.floor(t/60),s=t%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},formatDate(t){return t?new Date(t).toLocaleDateString("zh-CN"):""}}},Wm={key:0,class:"video-player"},Gm={class:"player-container"},zm={class:"player-wrapper"},Jm=["src"],Qm={key:0,class:"custom-controls"},Ym={class:"video-info"},Xm={class:"video-title"},Zm={class:"video-meta"},ey={class:"meta-item"},ty={class:"meta-item"},sy={class:"meta-item"},ry={class:"meta-item"},ny={class:"video-description"},iy={class:"video-tags"},oy={class:"video-actions"},ay={key:0,class:"related-videos"},ly={class:"related-grid"},cy=["onClick"],uy={class:"related-thumbnail"},dy={class:"duration"},hy={class:"related-info"},fy={key:1,class:"loading"},py={key:2,class:"error-state"};function gy(t,e,s,r,n,i){return n.video?(U(),M("div",Wm,[h("div",Gm,[h("div",zm,[h("video",{ref:"videoElement",src:i.videoUrl,controls:"",class:"video-element",onPlay:e[0]||(e[0]=(...o)=>i.onPlay&&i.onPlay(...o)),onPause:e[1]||(e[1]=(...o)=>i.onPause&&i.onPause(...o)),onTimeupdate:e[2]||(e[2]=(...o)=>i.onTimeUpdate&&i.onTimeUpdate(...o)),onEnded:e[3]||(e[3]=(...o)=>i.onEnded&&i.onEnded(...o))},"  ",40,Jm),n.isPlaying?Tt("",!0):(U(),M("div",Qm,[h("button",{class:"play-button",onClick:e[4]||(e[4]=(...o)=>i.playVideo&&i.playVideo(...o))},[...e[9]||(e[9]=[h("i",{class:"fas fa-play"},null,-1)])])]))]),h("div",Ym,[h("h1",Xm,N(n.video.title),1),h("div",Zm,[h("span",ey,[e[10]||(e[10]=h("i",{class:"fas fa-user"},null,-1)),Z(" "+N(n.video.performer||""),1)]),h("span",ty,[e[11]||(e[11]=h("i",{class:"fas fa-eye"},null,-1)),Z(" "+N(n.video.views_count||0)+"  ",1)]),h("span",sy,[e[12]||(e[12]=h("i",{class:"fas fa-clock"},null,-1)),Z(" "+N(i.formatDuration(n.video.duration)),1)]),h("span",ry,[e[13]||(e[13]=h("i",{class:"fas fa-calendar"},null,-1)),Z(" "+N(i.formatDate(n.video.performance_date)),1)])]),h("div",ny,[h("p",null,N(n.video.description),1)]),h("div",iy,[(U(!0),M(ve,null,Ge(n.video.tags||[],o=>(U(),M("span",{key:o,class:"tag"},N(o),1))),128))]),h("div",oy,[h("button",{class:"btn btn-outline",onClick:e[5]||(e[5]=(...o)=>i.toggleLike&&i.toggleLike(...o))},[h("i",{class:Ce([n.isLiked?"fas":"far","fa-heart"])},null,2),Z(" "+N(n.video.likes_count||0)+"  ",1)]),h("button",{class:"btn btn-outline",onClick:e[6]||(e[6]=(...o)=>i.toggleFavorite&&i.toggleFavorite(...o))},[h("i",{class:Ce([n.isFavorited?"fas":"far","fa-star"])},null,2),e[14]||(e[14]=Z("  ",-1))]),h("button",{class:"btn btn-outline",onClick:e[7]||(e[7]=(...o)=>i.shareVideo&&i.shareVideo(...o))},[...e[15]||(e[15]=[h("i",{class:"fas fa-share-alt"},null,-1),Z("  ",-1)])])])])]),n.relatedVideos.length>0?(U(),M("div",ay,[e[17]||(e[17]=h("h3",null,"",-1)),h("div",ly,[(U(!0),M(ve,null,Ge(n.relatedVideos,o=>(U(),M("div",{key:o.id,class:"related-card",onClick:a=>i.playRelatedVideo(o)},[h("div",uy,[e[16]||(e[16]=h("i",{class:"fas fa-play-circle"},null,-1)),h("div",dy,N(i.formatDuration(o.duration)),1)]),h("div",hy,[h("h4",null,N(o.title),1),h("p",null,N(o.performer),1)])],8,cy))),128))])])):Tt("",!0)])):n.loading?(U(),M("div",fy,[...e[18]||(e[18]=[h("div",{class:"spinner"},null,-1),h("p",null,"...",-1)])])):(U(),M("div",py,[e[19]||(e[19]=h("i",{class:"fas fa-exclamation-triangle"},null,-1)),e[20]||(e[20]=h("h3",null,"",-1)),e[21]||(e[21]=h("p",null,"",-1)),h("button",{class:"btn",onClick:e[8]||(e[8]=o=>t.$router.push("/videos"))},"")]))}const vy=vt(Km,[["render",gy],["__scopeId","data-v-b9177ecd"]]),_y=[{path:"/",name:"Home",component:qv},{path:"/categories",name:"Categories",component:c_},{path:"/category/:id",name:"CategoryDetail",component:L_,props:!0},{path:"/videos",name:"Videos",component:um},{path:"/ai-chat",name:"AIChat",component:Hm},{path:"/about",name:"About",component:mm},{path:"/video/:id",name:"VideoPlayer",component:vy,props:!0}],my=Uf({history:gf(),routes:_y});const Ic=oh(Ph);Ic.use(my);Ic.mount("#app");
